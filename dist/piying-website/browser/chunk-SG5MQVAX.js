import{a as f}from"./chunk-F75DZB5I.js";import{$a as d,Ec as u,V as r,Wb as m,_ as c,cb as p,ta as l}from"./chunk-FALGJD55.js";var g=["type","code-editor"],i,o=class a extends f{eleRef=c(l);instance;constructor(){super(),this.instance=this.amdInit()?.then(()=>this.init())}writeValue(t){super.writeValue(t),this.instance?.then(e=>{e.setValue(t??"")})}async amdInit(){if(document&&!i)return i=new Promise(t=>{let e=document.createElement("script");e.src="./lib/monaco-editor/vs/loader.js",document.head.appendChild(e),e.onload=()=>{AMDLoader.global.require.config({paths:{vs:"vs"},baseUrl:document.baseURI+"lib/monaco-editor",preferScriptTags:!0,"vs/nls":{availableLanguages:{"*":"zh-cn"}}}),AMDLoader.global.require(["vs/editor/editor.main"],()=>{t()})}}),i}async init(){monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),monaco.languages.typescript.javascriptDefaults.setCompilerOptions({target:monaco.languages.typescript.ScriptTarget.ESNext,allowNonTsExtensions:!0,skipDefaultLibCheck:!0,skipLibCheck:!0});let t=await fetch("./declaration/online-type.d.ts").then(s=>s.text());monaco.languages.typescript.javascriptDefaults.addExtraLib(t,"piying.ts");let n=monaco.editor.create(this.eleRef.nativeElement,{value:"",language:"javascript",minimap:{enabled:!1}});return setTimeout(()=>{n.getAction("editor.action.formatDocument").run()},50),n.onDidChangeModelContent(s=>{this.valueChange(n.getValue())}),n}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=d({type:a,selectors:[["div","type","code-editor"]],features:[m([{provide:u,useExisting:r(()=>a),multi:!0}]),p],attrs:g,decls:0,vars:0,template:function(e,n){},encapsulation:2})};export{o as default};
