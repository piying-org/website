import{$a as be,$b as ht,Bb as lt,Db as D,Eb as yn,Ec as _n,Fb as at,Hc as wn,Ic as vt,Jb as ae,Kb as ct,Lb as Fe,Na as ge,O as nt,Ob as dn,P as nn,Pb as mn,Ra as ut,Rb as vn,Sb as gn,Tb as Me,Ub as ft,Vb as Q,W as rn,Wa as sn,Wb as bn,Xb as pt,Y as L,Yb as B,Za as un,_ as j,_a as on,_b as Y,a as h,ab as ke,ac as kn,b as v,ba as G,bb as ln,cb as ot,d as ro,db as se,dc as O,e as Yt,ec as m,f as io,fa as S,fb as an,fc as ce,gc as yt,ha as ve,hc as Le,jc as Cn,kc as I,l as en,la as rt,lc as Ce,m as tn,ma as _,mb as ue,nb as oe,qa as it,qb as cn,ra as Ne,rb as fn,rc as $n,sb as X,sc as dt,ta as st,tb as pn,u as et,ub as hn,v as tt,yb as le,yc as En,zc as mt}from"./chunk-FALGJD55.js";var Ru=ro((hc,qu)=>{"use strict";qu.exports=Dl;function he(n){return n instanceof Buffer?Buffer.from(n):new n.constructor(n.buffer.slice(),n.byteOffset,n.length)}function Dl(n){if(n=n||{},n.circles)return Il(n);let t=new Map;if(t.set(Date,u=>new Date(u)),t.set(Map,(u,l)=>new Map(r(Array.from(u),l))),t.set(Set,(u,l)=>new Set(r(Array.from(u),l))),n.constructorHandlers)for(let u of n.constructorHandlers)t.set(u[0],u[1]);let e=null;return n.proto?s:i;function r(u,l){let o=Object.keys(u),a=new Array(o.length);for(let c=0;c<o.length;c++){let p=o[c],y=u[p];typeof y!="object"||y===null?a[p]=y:y.constructor!==Object&&(e=t.get(y.constructor))?a[p]=e(y,l):ArrayBuffer.isView(y)?a[p]=he(y):a[p]=l(y)}return a}function i(u){if(typeof u!="object"||u===null)return u;if(Array.isArray(u))return r(u,i);if(u.constructor!==Object&&(e=t.get(u.constructor)))return e(u,i);let l={};for(let o in u){if(Object.hasOwnProperty.call(u,o)===!1)continue;let a=u[o];typeof a!="object"||a===null?l[o]=a:a.constructor!==Object&&(e=t.get(a.constructor))?l[o]=e(a,i):ArrayBuffer.isView(a)?l[o]=he(a):l[o]=i(a)}return l}function s(u){if(typeof u!="object"||u===null)return u;if(Array.isArray(u))return r(u,s);if(u.constructor!==Object&&(e=t.get(u.constructor)))return e(u,s);let l={};for(let o in u){let a=u[o];typeof a!="object"||a===null?l[o]=a:a.constructor!==Object&&(e=t.get(a.constructor))?l[o]=e(a,s):ArrayBuffer.isView(a)?l[o]=he(a):l[o]=s(a)}return l}}function Il(n){let t=[],e=[],r=new Map;if(r.set(Date,o=>new Date(o)),r.set(Map,(o,a)=>new Map(s(Array.from(o),a))),r.set(Set,(o,a)=>new Set(s(Array.from(o),a))),n.constructorHandlers)for(let o of n.constructorHandlers)r.set(o[0],o[1]);let i=null;return n.proto?l:u;function s(o,a){let c=Object.keys(o),p=new Array(c.length);for(let y=0;y<c.length;y++){let b=c[y],k=o[b];if(typeof k!="object"||k===null)p[b]=k;else if(k.constructor!==Object&&(i=r.get(k.constructor)))p[b]=i(k,a);else if(ArrayBuffer.isView(k))p[b]=he(k);else{let C=t.indexOf(k);C!==-1?p[b]=e[C]:p[b]=a(k)}}return p}function u(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return s(o,u);if(o.constructor!==Object&&(i=r.get(o.constructor)))return i(o,u);let a={};t.push(o),e.push(a);for(let c in o){if(Object.hasOwnProperty.call(o,c)===!1)continue;let p=o[c];if(typeof p!="object"||p===null)a[c]=p;else if(p.constructor!==Object&&(i=r.get(p.constructor)))a[c]=i(p,u);else if(ArrayBuffer.isView(p))a[c]=he(p);else{let y=t.indexOf(p);y!==-1?a[c]=e[y]:a[c]=u(p)}}return t.pop(),e.pop(),a}function l(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return s(o,l);if(o.constructor!==Object&&(i=r.get(o.constructor)))return i(o,l);let a={};t.push(o),e.push(a);for(let c in o){let p=o[c];if(typeof p!="object"||p===null)a[c]=p;else if(p.constructor!==Object&&(i=r.get(p.constructor)))a[c]=i(p,l);else if(ArrayBuffer.isView(p))a[c]=he(p);else{let y=t.indexOf(p);y!==-1?a[c]=e[y]:a[c]=l(p)}}return t.pop(),e.pop(),a}}});var so=Object.getOwnPropertyNames,uo=Object.getOwnPropertySymbols,oo=Object.prototype.hasOwnProperty;function xn(n,t){return function(r,i,s){return n(r,i,s)&&t(r,i,s)}}function Ge(n){return function(e,r,i){if(!e||!r||typeof e!="object"||typeof r!="object")return n(e,r,i);var s=i.cache,u=s.get(e),l=s.get(r);if(u&&l)return u===r&&l===e;s.set(e,r),s.set(r,e);var o=n(e,r,i);return s.delete(e),s.delete(r),o}}function On(n){return so(n).concat(uo(n))}var lo=Object.hasOwn||function(n,t){return oo.call(n,t)};function ee(n,t){return n===t||!n&&!t&&n!==n&&t!==t}var ao="__v",co="__o",fo="_owner",An=Object.getOwnPropertyDescriptor,jn=Object.keys;function po(n,t,e){var r=n.length;if(t.length!==r)return!1;for(;r-- >0;)if(!e.equals(n[r],t[r],r,r,n,t,e))return!1;return!0}function ho(n,t){return ee(n.getTime(),t.getTime())}function yo(n,t){return n.name===t.name&&n.message===t.message&&n.cause===t.cause&&n.stack===t.stack}function mo(n,t){return n===t}function Dn(n,t,e){var r=n.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),s=n.entries(),u,l,o=0;(u=s.next())&&!u.done;){for(var a=t.entries(),c=!1,p=0;(l=a.next())&&!l.done;){if(i[p]){p++;continue}var y=u.value,b=l.value;if(e.equals(y[0],b[0],o,p,n,t,e)&&e.equals(y[1],b[1],y[0],b[0],n,t,e)){c=i[p]=!0;break}p++}if(!c)return!1;o++}return!0}var vo=ee;function go(n,t,e){var r=jn(n),i=r.length;if(jn(t).length!==i)return!1;for(;i-- >0;)if(!Pn(n,t,e,r[i]))return!1;return!0}function $e(n,t,e){var r=On(n),i=r.length;if(On(t).length!==i)return!1;for(var s,u,l;i-- >0;)if(s=r[i],!Pn(n,t,e,s)||(u=An(n,s),l=An(t,s),(u||l)&&(!u||!l||u.configurable!==l.configurable||u.enumerable!==l.enumerable||u.writable!==l.writable)))return!1;return!0}function bo(n,t){return ee(n.valueOf(),t.valueOf())}function ko(n,t){return n.source===t.source&&n.flags===t.flags}function In(n,t,e){var r=n.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),s=n.values(),u,l;(u=s.next())&&!u.done;){for(var o=t.values(),a=!1,c=0;(l=o.next())&&!l.done;){if(!i[c]&&e.equals(u.value,l.value,u.value,l.value,n,t,e)){a=i[c]=!0;break}c++}if(!a)return!1}return!0}function Co(n,t){var e=n.length;if(t.length!==e)return!1;for(;e-- >0;)if(n[e]!==t[e])return!1;return!0}function $o(n,t){return n.hostname===t.hostname&&n.pathname===t.pathname&&n.protocol===t.protocol&&n.port===t.port&&n.hash===t.hash&&n.username===t.username&&n.password===t.password}function Pn(n,t,e,r){return(r===fo||r===co||r===ao)&&(n.$$typeof||t.$$typeof)?!0:lo(t,r)&&e.equals(n[r],t[r],r,r,n,t,e)}var Eo="[object Arguments]",_o="[object Boolean]",wo="[object Date]",xo="[object Error]",Oo="[object Map]",Ao="[object Number]",jo="[object Object]",Do="[object RegExp]",Io="[object Set]",To="[object String]",So="[object URL]",Po=Array.isArray,Tn=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Sn=Object.assign,Vo=Object.prototype.toString.call.bind(Object.prototype.toString);function qo(n){var t=n.areArraysEqual,e=n.areDatesEqual,r=n.areErrorsEqual,i=n.areFunctionsEqual,s=n.areMapsEqual,u=n.areNumbersEqual,l=n.areObjectsEqual,o=n.arePrimitiveWrappersEqual,a=n.areRegExpsEqual,c=n.areSetsEqual,p=n.areTypedArraysEqual,y=n.areUrlsEqual;return function(k,C,g){if(k===C)return!0;if(k==null||C==null)return!1;var A=typeof k;if(A!==typeof C)return!1;if(A!=="object")return A==="number"?u(k,C,g):A==="function"?i(k,C,g):!1;var U=k.constructor;if(U!==C.constructor)return!1;if(U===Object)return l(k,C,g);if(Po(k))return t(k,C,g);if(Tn!=null&&Tn(k))return p(k,C,g);if(U===Date)return e(k,C,g);if(U===RegExp)return a(k,C,g);if(U===Map)return s(k,C,g);if(U===Set)return c(k,C,g);var $=Vo(k);return $===wo?e(k,C,g):$===Do?a(k,C,g):$===Oo?s(k,C,g):$===Io?c(k,C,g):$===jo?typeof k.then!="function"&&typeof C.then!="function"&&l(k,C,g):$===So?y(k,C,g):$===xo?r(k,C,g):$===Eo?l(k,C,g):$===_o||$===Ao||$===To?o(k,C,g):!1}}function Ro(n){var t=n.circular,e=n.createCustomConfig,r=n.strict,i={areArraysEqual:r?$e:po,areDatesEqual:ho,areErrorsEqual:yo,areFunctionsEqual:mo,areMapsEqual:r?xn(Dn,$e):Dn,areNumbersEqual:vo,areObjectsEqual:r?$e:go,arePrimitiveWrappersEqual:bo,areRegExpsEqual:ko,areSetsEqual:r?xn(In,$e):In,areTypedArraysEqual:r?$e:Co,areUrlsEqual:$o};if(e&&(i=Sn({},i,e(i))),t){var s=Ge(i.areArraysEqual),u=Ge(i.areMapsEqual),l=Ge(i.areObjectsEqual),o=Ge(i.areSetsEqual);i=Sn({},i,{areArraysEqual:s,areMapsEqual:u,areObjectsEqual:l,areSetsEqual:o})}return i}function No(n){return function(t,e,r,i,s,u,l){return n(t,e,l)}}function Fo(n){var t=n.circular,e=n.comparator,r=n.createState,i=n.equals,s=n.strict;if(r)return function(o,a){var c=r(),p=c.cache,y=p===void 0?t?new WeakMap:void 0:p,b=c.meta;return e(o,a,{cache:y,equals:i,meta:b,strict:s})};if(t)return function(o,a){return e(o,a,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var u={cache:void 0,equals:i,meta:void 0,strict:s};return function(o,a){return e(o,a,u)}}var P=H(),rc=H({strict:!0}),ic=H({circular:!0}),sc=H({circular:!0,strict:!0}),uc=H({createInternalComparator:function(){return ee}}),oc=H({strict:!0,createInternalComparator:function(){return ee}}),lc=H({circular:!0,createInternalComparator:function(){return ee}}),ac=H({circular:!0,createInternalComparator:function(){return ee},strict:!0});function H(n){n===void 0&&(n={});var t=n.circular,e=t===void 0?!1:t,r=n.createInternalComparator,i=n.createState,s=n.strict,u=s===void 0?!1:s,l=Ro(n),o=qo(l),a=r?r(o):No(o);return Fo({circular:e,comparator:o,createState:i,equals:a,strict:u})}var Ea={};Yt(Ea,{AbstractControl:()=>ye,CoreSchemaHandle:()=>me,FieldArray:()=>de,FieldControl:()=>Te,FieldGroup:()=>Ve,FieldLogicGroup:()=>Se,FormBuilder:()=>qe,INVALID:()=>ie,NFCSchema:()=>$a,PENDING:()=>q,PI_FORM_BUILDER_ALIAS_MAP:()=>Mt,PI_FORM_BUILDER_OPTIONS_TOKEN:()=>Bt,PI_VIEW_CONFIG_TOKEN:()=>Re,SortedArray:()=>Ie,VALID:()=>De,arrayStartsWith:()=>Nt,asControl:()=>Tt,asVirtualGroup:()=>Vt,changeObject:()=>qt,clone:()=>Lt,componentClass:()=>Ca,condition:()=>Pt,convert:()=>Ut,disableWhen:()=>ba,effectListen:()=>zu,formConfig:()=>pa,getDefaults:()=>R,getSchemaByIssuePath:()=>He,getSchemaMetadata:()=>Fu,hideWhen:()=>ga,isArray:()=>zt,isFieldArray:()=>Wu,isFieldControl:()=>Fl,isFieldGroup:()=>Nl,isFieldLogicGroup:()=>Pe,isGroup:()=>Ke,layout:()=>Xu,mergeHooks:()=>Wl,mergeHooksFn:()=>F,mergeOutputFn:()=>Wt,mergeOutputs:()=>ia,nonFieldControl:()=>Ju,outputChange:()=>sa,outputChangeFn:()=>Hu,patchAsyncInputs:()=>Ql,patchAttributes:()=>ya,patchHooks:()=>Bl,patchInputs:()=>Kl,patchInputsSignal:()=>Yl,patchOutputs:()=>ta,patchWrappers:()=>la,rawConfig:()=>E,removeAttributes:()=>da,removeHooks:()=>Ul,removeInputs:()=>Zl,removeOutputs:()=>na,removeWrappers:()=>aa,renderConfig:()=>fa,setAlias:()=>ca,setAttributes:()=>ha,setComponent:()=>Ll,setHooks:()=>Gl,setInputs:()=>Jl,setOutputs:()=>ea,setWrappers:()=>ua,toArray:()=>Gt,toObservable:()=>Ft,topClass:()=>ka,unWrapSignal:()=>N,valueChange:()=>va,valueChangeFn:()=>Qe});var Vu={};Yt(Vu,{BASE64_REGEX:()=>Ln,BIC_REGEX:()=>Gn,CUID2_REGEX:()=>Bn,DECIMAL_REGEX:()=>zn,DIGITS_REGEX:()=>Wn,EMAIL_REGEX:()=>Un,EMOJI_REGEX:()=>Xn,HEXADECIMAL_REGEX:()=>Hn,HEX_COLOR_REGEX:()=>Jn,IMEI_REGEX:()=>Kn,IPV4_REGEX:()=>Zn,IPV6_REGEX:()=>Qn,IP_REGEX:()=>Yn,ISO_DATE_REGEX:()=>er,ISO_DATE_TIME_REGEX:()=>tr,ISO_TIMESTAMP_REGEX:()=>ir,ISO_TIME_REGEX:()=>nr,ISO_TIME_SECOND_REGEX:()=>rr,ISO_WEEK_REGEX:()=>sr,MAC48_REGEX:()=>ur,MAC64_REGEX:()=>or,MAC_REGEX:()=>lr,NANO_ID_REGEX:()=>ar,OCTAL_REGEX:()=>cr,RFC_EMAIL_REGEX:()=>fr,SLUG_REGEX:()=>pr,ULID_REGEX:()=>hr,UUID_REGEX:()=>yr,ValiError:()=>z,_addIssue:()=>f,_getByteCount:()=>xe,_getGraphemeCount:()=>Oe,_getLastMetadata:()=>We,_getStandardProps:()=>d,_getWordCount:()=>Ae,_isLuhnAlgo:()=>_t,_isValidObjectKey:()=>ne,_joinExpects:()=>V,_stringify:()=>w,any:()=>ks,args:()=>Nn,argsAsync:()=>Fn,array:()=>Cs,arrayAsync:()=>$s,assert:()=>il,awaitAsync:()=>Mn,base64:()=>dr,bic:()=>mr,bigint:()=>Es,blob:()=>_s,boolean:()=>ws,brand:()=>vr,bytes:()=>gr,check:()=>br,checkAsync:()=>kr,checkItems:()=>Cr,checkItemsAsync:()=>$r,config:()=>sl,creditCard:()=>Er,cuid2:()=>_r,custom:()=>xs,customAsync:()=>Os,date:()=>As,decimal:()=>wr,deleteGlobalConfig:()=>Lo,deleteGlobalMessage:()=>Bo,deleteSchemaMessage:()=>Wo,deleteSpecificMessage:()=>Xo,description:()=>xr,digits:()=>Or,email:()=>Ar,emoji:()=>jr,empty:()=>Dr,endsWith:()=>Ir,entries:()=>Tr,entriesFromList:()=>Jo,entriesFromObjects:()=>Ko,enum:()=>js,enum_:()=>js,everyItem:()=>Sr,exactOptional:()=>Ds,exactOptionalAsync:()=>Is,excludes:()=>Pr,fallback:()=>ul,fallbackAsync:()=>ol,file:()=>Ts,filterItems:()=>Vr,findItem:()=>qr,finite:()=>Rr,flatten:()=>ll,flavor:()=>Nr,forward:()=>al,forwardAsync:()=>cl,function:()=>Ss,function_:()=>Ss,getDefault:()=>x,getDefaults:()=>kt,getDefaultsAsync:()=>Ct,getDescription:()=>fl,getDotPath:()=>wt,getFallback:()=>T,getFallbacks:()=>$t,getFallbacksAsync:()=>Et,getGlobalConfig:()=>pe,getGlobalMessage:()=>Vn,getMetadata:()=>pl,getSchemaMessage:()=>qn,getSpecificMessage:()=>Rn,getTitle:()=>hl,graphemes:()=>Fr,gtValue:()=>Mr,hash:()=>Lr,hexColor:()=>Br,hexadecimal:()=>Gr,imei:()=>zr,includes:()=>Wr,instance:()=>Ps,integer:()=>Ur,intersect:()=>Vs,intersectAsync:()=>qs,ip:()=>Xr,ipv4:()=>Hr,ipv6:()=>Jr,is:()=>yl,isOfKind:()=>Zo,isOfType:()=>Qo,isValiError:()=>Yo,isoDate:()=>Kr,isoDateTime:()=>Zr,isoTime:()=>Qr,isoTimeSecond:()=>Yr,isoTimestamp:()=>ei,isoWeek:()=>ti,keyof:()=>dl,lazy:()=>Rs,lazyAsync:()=>Ns,length:()=>ni,literal:()=>Fs,looseObject:()=>Ms,looseObjectAsync:()=>Ls,looseTuple:()=>Gs,looseTupleAsync:()=>Bs,ltValue:()=>ri,mac:()=>ii,mac48:()=>si,mac64:()=>ui,map:()=>zs,mapAsync:()=>Ws,mapItems:()=>oi,maxBytes:()=>li,maxEntries:()=>ai,maxGraphemes:()=>ci,maxLength:()=>fi,maxSize:()=>pi,maxValue:()=>hi,maxWords:()=>yi,message:()=>ml,metadata:()=>di,mimeType:()=>mi,minBytes:()=>vi,minEntries:()=>gi,minGraphemes:()=>bi,minLength:()=>ki,minSize:()=>Ci,minValue:()=>$i,minWords:()=>Ei,multipleOf:()=>_i,nan:()=>Us,nanoid:()=>wi,never:()=>Xs,nonEmpty:()=>xi,nonNullable:()=>Hs,nonNullableAsync:()=>Js,nonNullish:()=>Ks,nonNullishAsync:()=>Zs,nonOptional:()=>xt,nonOptionalAsync:()=>Ot,normalize:()=>Oi,notBytes:()=>Ai,notEntries:()=>ji,notGraphemes:()=>Di,notLength:()=>Ii,notSize:()=>Ti,notValue:()=>Si,notValues:()=>Pi,notWords:()=>Vi,null:()=>Qs,null_:()=>Qs,nullable:()=>Ys,nullableAsync:()=>eu,nullish:()=>tu,nullishAsync:()=>nu,number:()=>ru,object:()=>iu,objectAsync:()=>su,objectWithRest:()=>uu,objectWithRestAsync:()=>ou,octal:()=>qi,omit:()=>vl,optional:()=>je,optionalAsync:()=>At,parse:()=>Iu,parseAsync:()=>Tu,parseJson:()=>Ri,parser:()=>gl,parserAsync:()=>bl,partial:()=>kl,partialAsync:()=>Cl,partialCheck:()=>Fi,partialCheckAsync:()=>Mi,pick:()=>$l,picklist:()=>jt,pipe:()=>El,pipeAsync:()=>_l,promise:()=>lu,rawCheck:()=>Li,rawCheckAsync:()=>Gi,rawTransform:()=>Bi,rawTransformAsync:()=>zi,readonly:()=>Wi,record:()=>au,recordAsync:()=>cu,reduceItems:()=>Ui,regex:()=>Xi,required:()=>wl,requiredAsync:()=>xl,returns:()=>Hi,returnsAsync:()=>Ji,rfcEmail:()=>Ki,safeInteger:()=>Zi,safeParse:()=>Su,safeParseAsync:()=>Pu,safeParser:()=>Dt,safeParserAsync:()=>Ol,set:()=>fu,setAsync:()=>pu,setGlobalConfig:()=>Mo,setGlobalMessage:()=>Go,setSchemaMessage:()=>zo,setSpecificMessage:()=>Uo,size:()=>Qi,slug:()=>Yi,someItem:()=>es,sortItems:()=>ts,startsWith:()=>ns,strictObject:()=>hu,strictObjectAsync:()=>yu,strictTuple:()=>du,strictTupleAsync:()=>mu,string:()=>vu,stringifyJson:()=>rs,summarize:()=>Al,symbol:()=>gu,title:()=>is,toLowerCase:()=>ss,toMaxValue:()=>us,toMinValue:()=>os,toUpperCase:()=>ls,transform:()=>as,transformAsync:()=>cs,trim:()=>fs,trimEnd:()=>ps,trimStart:()=>hs,tuple:()=>bu,tupleAsync:()=>ku,tupleWithRest:()=>Cu,tupleWithRestAsync:()=>$u,ulid:()=>ys,undefined:()=>Eu,undefined_:()=>Eu,undefinedable:()=>_u,undefinedableAsync:()=>wu,union:()=>xu,unionAsync:()=>Ou,unknown:()=>Au,unwrap:()=>jl,url:()=>ds,uuid:()=>ms,value:()=>vs,values:()=>gs,variant:()=>ju,variantAsync:()=>Du,void:()=>Ue,void_:()=>Ue,words:()=>bs});var fe;function Mo(n){fe=h(h({},fe),n)}function pe(n){return{lang:n?.lang??fe?.lang,message:n?.message,abortEarly:n?.abortEarly??fe?.abortEarly,abortPipeEarly:n?.abortPipeEarly??fe?.abortPipeEarly}}function Lo(){fe=void 0}var _e;function Go(n,t){_e||(_e=new Map),_e.set(t,n)}function Vn(n){return _e?.get(n)}function Bo(n){_e?.delete(n)}var we;function zo(n,t){we||(we=new Map),we.set(t,n)}function qn(n){return we?.get(n)}function Wo(n){we?.delete(n)}var te;function Uo(n,t,e){te||(te=new Map),te.get(n)||te.set(n,new Map),te.get(n).set(e,t)}function Rn(n,t){return te?.get(n)?.get(t)}function Xo(n,t){te?.get(n)?.delete(t)}function w(n){let t=typeof n;return t==="string"?`"${n}"`:t==="number"||t==="bigint"||t==="boolean"?`${n}`:t==="object"||t==="function"?(n&&Object.getPrototypeOf(n)?.constructor?.name)??"null":t}function f(n,t,e,r,i){let s=i&&"input"in i?i.input:e.value,u=i?.expected??n.expects??null,l=i?.received??w(s),o={kind:n.kind,type:n.type,input:s,expected:u,received:l,message:`Invalid ${t}: ${u?`Expected ${u} but r`:"R"}eceived ${l}`,requirement:n.requirement,path:i?.path,issues:i?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},a=n.kind==="schema",c=i?.message??n.message??Rn(n.reference,o.lang)??(a?qn(o.lang):null)??r.message??Vn(o.lang);c!==void 0&&(o.message=typeof c=="function"?c(o):c),a&&(e.typed=!1),e.issues?e.issues.push(o):e.issues=[o]}var gt;function xe(n){return gt||(gt=new TextEncoder),gt.encode(n).length}var bt;function Oe(n){bt||(bt=new Intl.Segmenter);let t=bt.segment(n),e=0;for(let r of t)e++;return e}function We(n,t){if("pipe"in n){let e=[];for(let r=n.pipe.length-1;r>=0;r--){let i=n.pipe[r];if(i.kind==="schema"&&"pipe"in i)e.push(i);else if(i.kind==="metadata"&&i.type===t)return i[t]}for(let r of e){let i=We(r,t);if(i!==void 0)return i}}}function d(n){return{version:1,vendor:"valibot",validate(t){return n["~run"]({value:t},pe())}}}var Ee;function Ae(n,t){Ee||(Ee=new Map),Ee.get(n)||Ee.set(n,new Intl.Segmenter(n,{granularity:"word"}));let e=Ee.get(n).segment(t),r=0;for(let i of e)i.isWordLike&&r++;return r}var Ho=/\D/gu;function _t(n){let t=n.replace(Ho,""),e=t.length,r=1,i=0;for(;e;){let s=+t[--e];r^=1,i+=r?[0,2,4,6,8,1,3,5,7,9][s]:s}return i%10===0}function ne(n,t){return Object.hasOwn(n,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function V(n,t){let e=[...new Set(n)];return e.length>1?`(${e.join(` ${t} `)})`:e[0]??"never"}function Jo(n,t){let e={};for(let r of n)e[r]=t;return e}function Ko(n){let t={};for(let e of n)Object.assign(t,e.entries);return t}function wt(n){if(n.path){let t="";for(let e of n.path)if(typeof e.key=="string"||typeof e.key=="number")t?t+=`.${e.key}`:t+=e.key;else return null;return t}return null}function Zo(n,t){return t.kind===n}function Qo(n,t){return t.type===n}function Yo(n){return n instanceof z}var z=class extends Error{constructor(n){super(n[0].message),this.name="ValiError",this.issues=n}};function Nn(n){return{kind:"transformation",type:"args",reference:Nn,async:!1,schema:n,"~run"(t,e){let r=t.value;return t.value=(...i)=>{let s=this.schema["~run"]({value:i},e);if(s.issues)throw new z(s.issues);return r(...s.value)},t}}}function Fn(n){return{kind:"transformation",type:"args",reference:Fn,async:!1,schema:n,"~run"(t,e){let r=t.value;return t.value=async(...i)=>{let s=await n["~run"]({value:i},e);if(s.issues)throw new z(s.issues);return r(...s.value)},t}}}function Mn(){return{kind:"transformation",type:"await",reference:Mn,async:!0,async"~run"(n){return n.value=await n.value,n}}}var Ln=/^(?:[\da-z+/]{4})*(?:[\da-z+/]{2}==|[\da-z+/]{3}=)?$/iu,Gn=/^[A-Z]{6}(?!00)[\dA-Z]{2}(?:[\dA-Z]{3})?$/u,Bn=/^[a-z][\da-z]*$/u,zn=/^[+-]?(?:\d*\.)?\d+$/u,Wn=/^\d+$/u,Un=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,Xn=new RegExp("^(?:[\\u{1F1E6}-\\u{1F1FF}]{2}|\\u{1F3F4}[\\u{E0061}-\\u{E007A}]{2}[\\u{E0030}-\\u{E0039}\\u{E0061}-\\u{E007A}]{1,3}\\u{E007F}|(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation})(?:\\u200D(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation}))*)+$","u"),Hn=/^(?:0[hx])?[\da-fA-F]+$/u,Jn=/^#(?:[\da-fA-F]{3,4}|[\da-fA-F]{6}|[\da-fA-F]{8})$/u,Kn=/^\d{15}$|^\d{2}-\d{6}-\d{6}-\d$/u,Zn=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$/u,Qn=/^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,Yn=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$|^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,er=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u,tr=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])[T ](?:0\d|1\d|2[0-3]):[0-5]\d$/u,nr=/^(?:0\d|1\d|2[0-3]):[0-5]\d$/u,rr=/^(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}$/u,ir=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])[T ](?:0\d|1\d|2[0-3])(?::[0-5]\d){2}(?:\.\d{1,9})?(?:Z|[+-](?:0\d|1\d|2[0-3])(?::?[0-5]\d)?)$/u,sr=/^\d{4}-W(?:0[1-9]|[1-4]\d|5[0-3])$/u,ur=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$/iu,or=/^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,lr=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$|^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,ar=/^[\w-]+$/u,cr=/^(?:0o)?[0-7]+$/u,fr=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,pr=/^[\da-z]+(?:[-_][\da-z]+)*$/u,hr=/^[\da-hjkmnp-tv-zA-HJKMNP-TV-Z]{26}$/u,yr=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function dr(n){return{kind:"validation",type:"base64",reference:dr,async:!1,expects:null,requirement:Ln,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"Base64",t,e),t}}}function mr(n){return{kind:"validation",type:"bic",reference:mr,async:!1,expects:null,requirement:Gn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"BIC",t,e),t}}}function vr(n){return{kind:"transformation",type:"brand",reference:vr,async:!1,name:n,"~run"(t){return t}}}function gr(n,t){return{kind:"validation",type:"bytes",reference:gr,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=xe(e.value);i!==this.requirement&&f(this,"bytes",e,r,{received:`${i}`})}return e}}}function br(n,t){return{kind:"validation",type:"check",reference:br,async:!1,expects:null,requirement:n,message:t,"~run"(e,r){return e.typed&&!this.requirement(e.value)&&f(this,"input",e,r),e}}}function kr(n,t){return{kind:"validation",type:"check",reference:kr,async:!0,expects:null,requirement:n,message:t,async"~run"(e,r){return e.typed&&!await this.requirement(e.value)&&f(this,"input",e,r),e}}}function Cr(n,t){return{kind:"validation",type:"check_items",reference:Cr,async:!1,expects:null,requirement:n,message:t,"~run"(e,r){if(e.typed)for(let i=0;i<e.value.length;i++){let s=e.value[i];this.requirement(s,i,e.value)||f(this,"item",e,r,{input:s,path:[{type:"array",origin:"value",input:e.value,key:i,value:s}]})}return e}}}function $r(n,t){return{kind:"validation",type:"check_items",reference:$r,async:!0,expects:null,requirement:n,message:t,async"~run"(e,r){if(e.typed){let i=await Promise.all(e.value.map(this.requirement));for(let s=0;s<e.value.length;s++)if(!i[s]){let u=e.value[s];f(this,"item",e,r,{input:u,path:[{type:"array",origin:"value",input:e.value,key:s,value:u}]})}}return e}}}var el=/^(?:\d{14,19}|\d{4}(?: \d{3,6}){2,4}|\d{4}(?:-\d{3,6}){2,4})$/u,tl=/[- ]/gu,nl=[/^3[47]\d{13}$/u,/^3(?:0[0-5]|[68]\d)\d{11,13}$/u,/^6(?:011|5\d{2})\d{12,15}$/u,/^(?:2131|1800|35\d{3})\d{11}$/u,/^5[1-5]\d{2}|(?:222\d|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}$/u,/^(?:6[27]\d{14,17}|81\d{14,17})$/u,/^4\d{12}(?:\d{3,6})?$/u];function Er(n){return{kind:"validation",type:"credit_card",reference:Er,async:!1,expects:null,requirement(t){let e;return el.test(t)&&(e=t.replace(tl,""))&&nl.some(r=>r.test(e))&&_t(e)},message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"credit card",t,e),t}}}function _r(n){return{kind:"validation",type:"cuid2",reference:_r,async:!1,expects:null,requirement:Bn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"Cuid2",t,e),t}}}function wr(n){return{kind:"validation",type:"decimal",reference:wr,async:!1,expects:null,requirement:zn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"decimal",t,e),t}}}function xr(n){return{kind:"metadata",type:"description",reference:xr,description:n}}function Or(n){return{kind:"validation",type:"digits",reference:Or,async:!1,expects:null,requirement:Wn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"digits",t,e),t}}}function Ar(n){return{kind:"validation",type:"email",reference:Ar,expects:null,async:!1,requirement:Un,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"email",t,e),t}}}function jr(n){return{kind:"validation",type:"emoji",reference:jr,async:!1,expects:null,requirement:Xn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"emoji",t,e),t}}}function Dr(n){return{kind:"validation",type:"empty",reference:Dr,async:!1,expects:"0",message:n,"~run"(t,e){return t.typed&&t.value.length>0&&f(this,"length",t,e,{received:`${t.value.length}`}),t}}}function Ir(n,t){return{kind:"validation",type:"ends_with",reference:Ir,async:!1,expects:`"${n}"`,requirement:n,message:t,"~run"(e,r){return e.typed&&!e.value.endsWith(this.requirement)&&f(this,"end",e,r,{received:`"${e.value.slice(-this.requirement.length)}"`}),e}}}function Tr(n,t){return{kind:"validation",type:"entries",reference:Tr,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){if(!e.typed)return e;let i=Object.keys(e.value).length;return e.typed&&i!==this.requirement&&f(this,"entries",e,r,{received:`${i}`}),e}}}function Sr(n,t){return{kind:"validation",type:"every_item",reference:Sr,async:!1,expects:null,requirement:n,message:t,"~run"(e,r){return e.typed&&!e.value.every(this.requirement)&&f(this,"item",e,r),e}}}function Pr(n,t){let e=w(n);return{kind:"validation",type:"excludes",reference:Pr,async:!1,expects:`!${e}`,requirement:n,message:t,"~run"(r,i){return r.typed&&r.value.includes(this.requirement)&&f(this,"content",r,i,{received:e}),r}}}function Vr(n){return{kind:"transformation",type:"filter_items",reference:Vr,async:!1,operation:n,"~run"(t){return t.value=t.value.filter(this.operation),t}}}function qr(n){return{kind:"transformation",type:"find_item",reference:qr,async:!1,operation:n,"~run"(t){return t.value=t.value.find(this.operation),t}}}function Rr(n){return{kind:"validation",type:"finite",reference:Rr,async:!1,expects:null,requirement:Number.isFinite,message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"finite",t,e),t}}}function Nr(n){return{kind:"transformation",type:"flavor",reference:Nr,async:!1,name:n,"~run"(t){return t}}}function Fr(n,t){return{kind:"validation",type:"graphemes",reference:Fr,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Oe(e.value);i!==this.requirement&&f(this,"graphemes",e,r,{received:`${i}`})}return e}}}function Mr(n,t){return{kind:"validation",type:"gt_value",reference:Mr,async:!1,expects:`>${n instanceof Date?n.toJSON():w(n)}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!(e.value>this.requirement)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}var rl={md4:32,md5:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8,adler32:8};function Lr(n,t){return{kind:"validation",type:"hash",reference:Lr,expects:null,async:!1,requirement:RegExp(n.map(e=>`^[a-f0-9]{${rl[e]}}$`).join("|"),"iu"),message:t,"~run"(e,r){return e.typed&&!this.requirement.test(e.value)&&f(this,"hash",e,r),e}}}function Gr(n){return{kind:"validation",type:"hexadecimal",reference:Gr,async:!1,expects:null,requirement:Hn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"hexadecimal",t,e),t}}}function Br(n){return{kind:"validation",type:"hex_color",reference:Br,async:!1,expects:null,requirement:Jn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"hex color",t,e),t}}}function zr(n){return{kind:"validation",type:"imei",reference:zr,async:!1,expects:null,requirement(t){return Kn.test(t)&&_t(t)},message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"IMEI",t,e),t}}}function Wr(n,t){let e=w(n);return{kind:"validation",type:"includes",reference:Wr,async:!1,expects:e,requirement:n,message:t,"~run"(r,i){return r.typed&&!r.value.includes(this.requirement)&&f(this,"content",r,i,{received:`!${e}`}),r}}}function Ur(n){return{kind:"validation",type:"integer",reference:Ur,async:!1,expects:null,requirement:Number.isInteger,message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"integer",t,e),t}}}function Xr(n){return{kind:"validation",type:"ip",reference:Xr,async:!1,expects:null,requirement:Yn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"IP",t,e),t}}}function Hr(n){return{kind:"validation",type:"ipv4",reference:Hr,async:!1,expects:null,requirement:Zn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"IPv4",t,e),t}}}function Jr(n){return{kind:"validation",type:"ipv6",reference:Jr,async:!1,expects:null,requirement:Qn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"IPv6",t,e),t}}}function Kr(n){return{kind:"validation",type:"iso_date",reference:Kr,async:!1,expects:null,requirement:er,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"date",t,e),t}}}function Zr(n){return{kind:"validation",type:"iso_date_time",reference:Zr,async:!1,expects:null,requirement:tr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"date-time",t,e),t}}}function Qr(n){return{kind:"validation",type:"iso_time",reference:Qr,async:!1,expects:null,requirement:nr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"time",t,e),t}}}function Yr(n){return{kind:"validation",type:"iso_time_second",reference:Yr,async:!1,expects:null,requirement:rr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"time-second",t,e),t}}}function ei(n){return{kind:"validation",type:"iso_timestamp",reference:ei,async:!1,expects:null,requirement:ir,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"timestamp",t,e),t}}}function ti(n){return{kind:"validation",type:"iso_week",reference:ti,async:!1,expects:null,requirement:sr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"week",t,e),t}}}function ni(n,t){return{kind:"validation",type:"length",reference:ni,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.length!==this.requirement&&f(this,"length",e,r,{received:`${e.value.length}`}),e}}}function ri(n,t){return{kind:"validation",type:"lt_value",reference:ri,async:!1,expects:`<${n instanceof Date?n.toJSON():w(n)}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!(e.value<this.requirement)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function ii(n){return{kind:"validation",type:"mac",reference:ii,async:!1,expects:null,requirement:lr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"MAC",t,e),t}}}function si(n){return{kind:"validation",type:"mac48",reference:si,async:!1,expects:null,requirement:ur,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"48-bit MAC",t,e),t}}}function ui(n){return{kind:"validation",type:"mac64",reference:ui,async:!1,expects:null,requirement:or,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"64-bit MAC",t,e),t}}}function oi(n){return{kind:"transformation",type:"map_items",reference:oi,async:!1,operation:n,"~run"(t){return t.value=t.value.map(this.operation),t}}}function li(n,t){return{kind:"validation",type:"max_bytes",reference:li,async:!1,expects:`<=${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=xe(e.value);i>this.requirement&&f(this,"bytes",e,r,{received:`${i}`})}return e}}}function ai(n,t){return{kind:"validation",type:"max_entries",reference:ai,async:!1,expects:`<=${n}`,requirement:n,message:t,"~run"(e,r){if(!e.typed)return e;let i=Object.keys(e.value).length;return e.typed&&i>this.requirement&&f(this,"entries",e,r,{received:`${i}`}),e}}}function ci(n,t){return{kind:"validation",type:"max_graphemes",reference:ci,async:!1,expects:`<=${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Oe(e.value);i>this.requirement&&f(this,"graphemes",e,r,{received:`${i}`})}return e}}}function fi(n,t){return{kind:"validation",type:"max_length",reference:fi,async:!1,expects:`<=${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.length>this.requirement&&f(this,"length",e,r,{received:`${e.value.length}`}),e}}}function pi(n,t){return{kind:"validation",type:"max_size",reference:pi,async:!1,expects:`<=${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.size>this.requirement&&f(this,"size",e,r,{received:`${e.value.size}`}),e}}}function hi(n,t){return{kind:"validation",type:"max_value",reference:hi,async:!1,expects:`<=${n instanceof Date?n.toJSON():w(n)}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!(e.value<=this.requirement)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function yi(n,t,e){return{kind:"validation",type:"max_words",reference:yi,async:!1,expects:`<=${t}`,locales:n,requirement:t,message:e,"~run"(r,i){if(r.typed){let s=Ae(this.locales,r.value);s>this.requirement&&f(this,"words",r,i,{received:`${s}`})}return r}}}function di(n){return{kind:"metadata",type:"metadata",reference:di,metadata:n}}function mi(n,t){return{kind:"validation",type:"mime_type",reference:mi,async:!1,expects:V(n.map(e=>`"${e}"`),"|"),requirement:n,message:t,"~run"(e,r){return e.typed&&!this.requirement.includes(e.value.type)&&f(this,"MIME type",e,r,{received:`"${e.value.type}"`}),e}}}function vi(n,t){return{kind:"validation",type:"min_bytes",reference:vi,async:!1,expects:`>=${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=xe(e.value);i<this.requirement&&f(this,"bytes",e,r,{received:`${i}`})}return e}}}function gi(n,t){return{kind:"validation",type:"min_entries",reference:gi,async:!1,expects:`>=${n}`,requirement:n,message:t,"~run"(e,r){if(!e.typed)return e;let i=Object.keys(e.value).length;return e.typed&&i<this.requirement&&f(this,"entries",e,r,{received:`${i}`}),e}}}function bi(n,t){return{kind:"validation",type:"min_graphemes",reference:bi,async:!1,expects:`>=${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Oe(e.value);i<this.requirement&&f(this,"graphemes",e,r,{received:`${i}`})}return e}}}function ki(n,t){return{kind:"validation",type:"min_length",reference:ki,async:!1,expects:`>=${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.length<this.requirement&&f(this,"length",e,r,{received:`${e.value.length}`}),e}}}function Ci(n,t){return{kind:"validation",type:"min_size",reference:Ci,async:!1,expects:`>=${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.size<this.requirement&&f(this,"size",e,r,{received:`${e.value.size}`}),e}}}function $i(n,t){return{kind:"validation",type:"min_value",reference:$i,async:!1,expects:`>=${n instanceof Date?n.toJSON():w(n)}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!(e.value>=this.requirement)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function Ei(n,t,e){return{kind:"validation",type:"min_words",reference:Ei,async:!1,expects:`>=${t}`,locales:n,requirement:t,message:e,"~run"(r,i){if(r.typed){let s=Ae(this.locales,r.value);s<this.requirement&&f(this,"words",r,i,{received:`${s}`})}return r}}}function _i(n,t){return{kind:"validation",type:"multiple_of",reference:_i,async:!1,expects:`%${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value%this.requirement!=0&&f(this,"multiple",e,r),e}}}function wi(n){return{kind:"validation",type:"nanoid",reference:wi,async:!1,expects:null,requirement:ar,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"Nano ID",t,e),t}}}function xi(n){return{kind:"validation",type:"non_empty",reference:xi,async:!1,expects:"!0",message:n,"~run"(t,e){return t.typed&&t.value.length===0&&f(this,"length",t,e,{received:"0"}),t}}}function Oi(n){return{kind:"transformation",type:"normalize",reference:Oi,async:!1,form:n,"~run"(t){return t.value=t.value.normalize(this.form),t}}}function Ai(n,t){return{kind:"validation",type:"not_bytes",reference:Ai,async:!1,expects:`!${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=xe(e.value);i===this.requirement&&f(this,"bytes",e,r,{received:`${i}`})}return e}}}function ji(n,t){return{kind:"validation",type:"not_entries",reference:ji,async:!1,expects:`!${n}`,requirement:n,message:t,"~run"(e,r){if(!e.typed)return e;let i=Object.keys(e.value).length;return e.typed&&i===this.requirement&&f(this,"entries",e,r,{received:`${i}`}),e}}}function Di(n,t){return{kind:"validation",type:"not_graphemes",reference:Di,async:!1,expects:`!${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Oe(e.value);i===this.requirement&&f(this,"graphemes",e,r,{received:`${i}`})}return e}}}function Ii(n,t){return{kind:"validation",type:"not_length",reference:Ii,async:!1,expects:`!${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.length===this.requirement&&f(this,"length",e,r,{received:`${e.value.length}`}),e}}}function Ti(n,t){return{kind:"validation",type:"not_size",reference:Ti,async:!1,expects:`!${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.size===this.requirement&&f(this,"size",e,r,{received:`${e.value.size}`}),e}}}function Si(n,t){return{kind:"validation",type:"not_value",reference:Si,async:!1,expects:n instanceof Date?`!${n.toJSON()}`:`!${w(n)}`,requirement:n,message:t,"~run"(e,r){return e.typed&&this.requirement<=e.value&&this.requirement>=e.value&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function Pi(n,t){return{kind:"validation",type:"not_values",reference:Pi,async:!1,expects:`!${V(n.map(e=>e instanceof Date?e.toJSON():w(e)),"|")}`,requirement:n,message:t,"~run"(e,r){return e.typed&&this.requirement.some(i=>i<=e.value&&i>=e.value)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function Vi(n,t,e){return{kind:"validation",type:"not_words",reference:Vi,async:!1,expects:`!${t}`,locales:n,requirement:t,message:e,"~run"(r,i){if(r.typed){let s=Ae(this.locales,r.value);s===this.requirement&&f(this,"words",r,i,{received:`${s}`})}return r}}}function qi(n){return{kind:"validation",type:"octal",reference:qi,async:!1,expects:null,requirement:cr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"octal",t,e),t}}}function Ri(n,t){return{kind:"transformation",type:"parse_json",reference:Ri,config:n,message:t,async:!1,"~run"(e,r){try{e.value=JSON.parse(e.value,this.config?.reviver)}catch(i){if(i instanceof Error)f(this,"JSON",e,r,{received:`"${i.message}"`}),e.typed=!1;else throw i}return e}}}function Ni(n,t){if(n.issues)for(let e of t)for(let r of n.issues){let i=!1,s=Math.min(e.length,r.path?.length??0);for(let u=0;u<s;u++)if(e[u]!==r.path[u].key&&(e[u]!=="$"||r.path[u].type!=="array")){i=!0;break}if(!i)return!1}return!0}function Fi(n,t,e){return{kind:"validation",type:"partial_check",reference:Fi,async:!1,expects:null,paths:n,requirement:t,message:e,"~run"(r,i){return(r.typed||Ni(r,n))&&!this.requirement(r.value)&&f(this,"input",r,i),r}}}function Mi(n,t,e){return{kind:"validation",type:"partial_check",reference:Mi,async:!0,expects:null,paths:n,requirement:t,message:e,async"~run"(r,i){return(r.typed||Ni(r,n))&&!await this.requirement(r.value)&&f(this,"input",r,i),r}}}function Li(n){return{kind:"validation",type:"raw_check",reference:Li,async:!1,expects:null,"~run"(t,e){return n({dataset:t,config:e,addIssue:r=>f(this,r?.label??"input",t,e,r)}),t}}}function Gi(n){return{kind:"validation",type:"raw_check",reference:Gi,async:!0,expects:null,async"~run"(t,e){return await n({dataset:t,config:e,addIssue:r=>f(this,r?.label??"input",t,e,r)}),t}}}function Bi(n){return{kind:"transformation",type:"raw_transform",reference:Bi,async:!1,"~run"(t,e){let r=n({dataset:t,config:e,addIssue:i=>f(this,i?.label??"input",t,e,i),NEVER:null});return t.issues?t.typed=!1:t.value=r,t}}}function zi(n){return{kind:"transformation",type:"raw_transform",reference:zi,async:!0,async"~run"(t,e){let r=await n({dataset:t,config:e,addIssue:i=>f(this,i?.label??"input",t,e,i),NEVER:null});return t.issues?t.typed=!1:t.value=r,t}}}function Wi(){return{kind:"transformation",type:"readonly",reference:Wi,async:!1,"~run"(n){return n}}}function Ui(n,t){return{kind:"transformation",type:"reduce_items",reference:Ui,async:!1,operation:n,initial:t,"~run"(e){return e.value=e.value.reduce(this.operation,this.initial),e}}}function Xi(n,t){return{kind:"validation",type:"regex",reference:Xi,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!this.requirement.test(e.value)&&f(this,"format",e,r),e}}}function Hi(n){return{kind:"transformation",type:"returns",reference:Hi,async:!1,schema:n,"~run"(t,e){let r=t.value;return t.value=(...i)=>{let s=this.schema["~run"]({value:r(...i)},e);if(s.issues)throw new z(s.issues);return s.value},t}}}function Ji(n){return{kind:"transformation",type:"returns",reference:Ji,async:!1,schema:n,"~run"(t,e){let r=t.value;return t.value=async(...i)=>{let s=await this.schema["~run"]({value:await r(...i)},e);if(s.issues)throw new z(s.issues);return s.value},t}}}function Ki(n){return{kind:"validation",type:"rfc_email",reference:Ki,expects:null,async:!1,requirement:fr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"email",t,e),t}}}function Zi(n){return{kind:"validation",type:"safe_integer",reference:Zi,async:!1,expects:null,requirement:Number.isSafeInteger,message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"safe integer",t,e),t}}}function Qi(n,t){return{kind:"validation",type:"size",reference:Qi,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.size!==this.requirement&&f(this,"size",e,r,{received:`${e.value.size}`}),e}}}function Yi(n){return{kind:"validation",type:"slug",reference:Yi,async:!1,expects:null,requirement:pr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"slug",t,e),t}}}function es(n,t){return{kind:"validation",type:"some_item",reference:es,async:!1,expects:null,requirement:n,message:t,"~run"(e,r){return e.typed&&!e.value.some(this.requirement)&&f(this,"item",e,r),e}}}function ts(n){return{kind:"transformation",type:"sort_items",reference:ts,async:!1,operation:n,"~run"(t){return t.value=t.value.sort(this.operation),t}}}function ns(n,t){return{kind:"validation",type:"starts_with",reference:ns,async:!1,expects:`"${n}"`,requirement:n,message:t,"~run"(e,r){return e.typed&&!e.value.startsWith(this.requirement)&&f(this,"start",e,r,{received:`"${e.value.slice(0,this.requirement.length)}"`}),e}}}function rs(n,t){return{kind:"transformation",type:"stringify_json",reference:rs,message:t,config:n,async:!1,"~run"(e,r){try{let i=JSON.stringify(e.value,this.config?.replacer,this.config?.space);i===void 0&&(f(this,"JSON",e,r),e.typed=!1),e.value=i}catch(i){if(i instanceof Error)f(this,"JSON",e,r,{received:`"${i.message}"`}),e.typed=!1;else throw i}return e}}}function is(n){return{kind:"metadata",type:"title",reference:is,title:n}}function ss(){return{kind:"transformation",type:"to_lower_case",reference:ss,async:!1,"~run"(n){return n.value=n.value.toLowerCase(),n}}}function us(n){return{kind:"transformation",type:"to_max_value",reference:us,async:!1,requirement:n,"~run"(t){return t.value=t.value>this.requirement?this.requirement:t.value,t}}}function os(n){return{kind:"transformation",type:"to_min_value",reference:os,async:!1,requirement:n,"~run"(t){return t.value=t.value<this.requirement?this.requirement:t.value,t}}}function ls(){return{kind:"transformation",type:"to_upper_case",reference:ls,async:!1,"~run"(n){return n.value=n.value.toUpperCase(),n}}}function as(n){return{kind:"transformation",type:"transform",reference:as,async:!1,operation:n,"~run"(t){return t.value=this.operation(t.value),t}}}function cs(n){return{kind:"transformation",type:"transform",reference:cs,async:!0,operation:n,async"~run"(t){return t.value=await this.operation(t.value),t}}}function fs(){return{kind:"transformation",type:"trim",reference:fs,async:!1,"~run"(n){return n.value=n.value.trim(),n}}}function ps(){return{kind:"transformation",type:"trim_end",reference:ps,async:!1,"~run"(n){return n.value=n.value.trimEnd(),n}}}function hs(){return{kind:"transformation",type:"trim_start",reference:hs,async:!1,"~run"(n){return n.value=n.value.trimStart(),n}}}function ys(n){return{kind:"validation",type:"ulid",reference:ys,async:!1,expects:null,requirement:hr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"ULID",t,e),t}}}function ds(n){return{kind:"validation",type:"url",reference:ds,async:!1,expects:null,requirement(t){try{return new URL(t),!0}catch{return!1}},message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"URL",t,e),t}}}function ms(n){return{kind:"validation",type:"uuid",reference:ms,async:!1,expects:null,requirement:yr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"UUID",t,e),t}}}function vs(n,t){return{kind:"validation",type:"value",reference:vs,async:!1,expects:n instanceof Date?n.toJSON():w(n),requirement:n,message:t,"~run"(e,r){return e.typed&&!(this.requirement<=e.value&&this.requirement>=e.value)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function gs(n,t){return{kind:"validation",type:"values",reference:gs,async:!1,expects:`${V(n.map(e=>e instanceof Date?e.toJSON():w(e)),"|")}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!this.requirement.some(i=>i<=e.value&&i>=e.value)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function bs(n,t,e){return{kind:"validation",type:"words",reference:bs,async:!1,expects:`${t}`,locales:n,requirement:t,message:e,"~run"(r,i){if(r.typed){let s=Ae(this.locales,r.value);s!==this.requirement&&f(this,"words",r,i,{received:`${s}`})}return r}}}function il(n,t){let e=n["~run"]({value:t},{abortEarly:!0}).issues;if(e)throw new z(e)}function sl(n,t){return v(h({},n),{get"~standard"(){return d(this)},"~run"(e,r){return n["~run"](e,h(h({},r),t))}})}function T(n,t,e){return typeof n.fallback=="function"?n.fallback(t,e):n.fallback}function ul(n,t){return v(h({},n),{fallback:t,get"~standard"(){return d(this)},"~run"(e,r){let i=n["~run"](e,r);return i.issues?{typed:!0,value:T(this,i,r)}:i}})}function ol(n,t){return v(h({},n),{fallback:t,async:!0,get"~standard"(){return d(this)},async"~run"(e,r){let i=await n["~run"](e,r);return i.issues?{typed:!0,value:await T(this,i,r)}:i}})}function ll(n){let t={};for(let e of n)if(e.path){let r=wt(e);r?(t.nested||(t.nested={}),t.nested[r]?t.nested[r].push(e.message):t.nested[r]=[e.message]):t.other?t.other.push(e.message):t.other=[e.message]}else t.root?t.root.push(e.message):t.root=[e.message];return t}function al(n,t){return v(h({},n),{"~run"(e,r){let i=e.issues&&[...e.issues];if(e=n["~run"](e,r),e.issues){for(let s of e.issues)if(!i?.includes(s)){let u=e.value;for(let l of t){let o=u[l],a={type:"unknown",origin:"value",input:u,key:l,value:o};if(s.path?s.path.push(a):s.path=[a],!o)break;u=o}}}return e}})}function cl(n,t){return v(h({},n),{async:!0,async"~run"(e,r){let i=e.issues&&[...e.issues];if(e=await n["~run"](e,r),e.issues){for(let s of e.issues)if(!i?.includes(s)){let u=e.value;for(let l of t){let o=u[l],a={type:"unknown",origin:"value",input:u,key:l,value:o};if(s.path?s.path.push(a):s.path=[a],!o)break;u=o}}}return e}})}function x(n,t,e){return typeof n.default=="function"?n.default(t,e):n.default}function kt(n){if("entries"in n){let t={};for(let e in n.entries)t[e]=kt(n.entries[e]);return t}return"items"in n?n.items.map(kt):x(n)}async function Ct(n){return"entries"in n?Object.fromEntries(await Promise.all(Object.entries(n.entries).map(async([t,e])=>[t,await Ct(e)]))):"items"in n?Promise.all(n.items.map(Ct)):x(n)}function fl(n){return We(n,"description")}function $t(n){if("entries"in n){let t={};for(let e in n.entries)t[e]=$t(n.entries[e]);return t}return"items"in n?n.items.map($t):T(n)}async function Et(n){return"entries"in n?Object.fromEntries(await Promise.all(Object.entries(n.entries).map(async([t,e])=>[t,await Et(e)]))):"items"in n?Promise.all(n.items.map(Et)):T(n)}function pl(n){let t={};function e(r){if("pipe"in r)for(let i of r.pipe)i.kind==="schema"&&"pipe"in i?e(i):i.kind==="metadata"&&i.type==="metadata"&&Object.assign(t,i.metadata)}return e(n),t}function hl(n){return We(n,"title")}function yl(n,t){return!n["~run"]({value:t},{abortEarly:!0}).issues}function ks(){return{kind:"schema",type:"any",reference:ks,expects:"any",async:!1,get"~standard"(){return d(this)},"~run"(n){return n.typed=!0,n}}}function Cs(n,t){return{kind:"schema",type:"array",reference:Cs,expects:"Array",async:!1,item:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];for(let s=0;s<i.length;s++){let u=i[s],l=this.item["~run"]({value:u},r);if(l.issues){let o={type:"array",origin:"value",input:i,key:s,value:u};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.push(l.value)}}else f(this,"type",e,r);return e}}}function $s(n,t){return{kind:"schema",type:"array",reference:$s,expects:"Array",async:!0,item:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];let s=await Promise.all(i.map(u=>this.item["~run"]({value:u},r)));for(let u=0;u<s.length;u++){let l=s[u];if(l.issues){let o={type:"array",origin:"value",input:i,key:u,value:i[u]};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.push(l.value)}}else f(this,"type",e,r);return e}}}function Es(n){return{kind:"schema",type:"bigint",reference:Es,expects:"bigint",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="bigint"?t.typed=!0:f(this,"type",t,e),t}}}function _s(n){return{kind:"schema",type:"blob",reference:_s,expects:"Blob",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value instanceof Blob?t.typed=!0:f(this,"type",t,e),t}}}function ws(n){return{kind:"schema",type:"boolean",reference:ws,expects:"boolean",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="boolean"?t.typed=!0:f(this,"type",t,e),t}}}function xs(n,t){return{kind:"schema",type:"custom",reference:xs,expects:"unknown",async:!1,check:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return this.check(e.value)?e.typed=!0:f(this,"type",e,r),e}}}function Os(n,t){return{kind:"schema",type:"custom",reference:Os,expects:"unknown",async:!0,check:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){return await this.check(e.value)?e.typed=!0:f(this,"type",e,r),e}}}function As(n){return{kind:"schema",type:"date",reference:As,expects:"Date",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value instanceof Date?isNaN(t.value)?f(this,"type",t,e,{received:'"Invalid Date"'}):t.typed=!0:f(this,"type",t,e),t}}}function js(n,t){let e=[];for(let r in n)(`${+r}`!==r||typeof n[r]!="string"||!Object.is(n[n[r]],+r))&&e.push(n[r]);return{kind:"schema",type:"enum",reference:js,expects:V(e.map(w),"|"),async:!1,enum:n,options:e,message:t,get"~standard"(){return d(this)},"~run"(r,i){return this.options.includes(r.value)?r.typed=!0:f(this,"type",r,i),r}}}function Ds(n,t){return{kind:"schema",type:"exact_optional",reference:Ds,expects:n.expects,async:!1,wrapped:n,default:t,get"~standard"(){return d(this)},"~run"(e,r){return this.wrapped["~run"](e,r)}}}function Is(n,t){return{kind:"schema",type:"exact_optional",reference:Is,expects:n.expects,async:!0,wrapped:n,default:t,get"~standard"(){return d(this)},async"~run"(e,r){return this.wrapped["~run"](e,r)}}}function Ts(n){return{kind:"schema",type:"file",reference:Ts,expects:"File",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value instanceof File?t.typed=!0:f(this,"type",t,e),t}}}function Ss(n){return{kind:"schema",type:"function",reference:Ss,expects:"Function",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="function"?t.typed=!0:f(this,"type",t,e),t}}}function Ps(n,t){return{kind:"schema",type:"instance",reference:Ps,expects:n.name,async:!1,class:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value instanceof this.class?e.typed=!0:f(this,"type",e,r),e}}}function Be(n,t){if(typeof n==typeof t){if(n===t||n instanceof Date&&t instanceof Date&&+n==+t)return{value:n};if(n&&t&&n.constructor===Object&&t.constructor===Object){for(let e in t)if(e in n){let r=Be(n[e],t[e]);if(r.issue)return r;n[e]=r.value}else n[e]=t[e];return{value:n}}if(Array.isArray(n)&&Array.isArray(t)&&n.length===t.length){for(let e=0;e<n.length;e++){let r=Be(n[e],t[e]);if(r.issue)return r;n[e]=r.value}return{value:n}}}return{issue:!0}}function Vs(n,t){return{kind:"schema",type:"intersect",reference:Vs,expects:V(n.map(e=>e.expects),"&"),async:!1,options:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){if(this.options.length){let i=e.value,s;e.typed=!0;for(let u of this.options){let l=u["~run"]({value:i},r);if(l.issues&&(e.issues?e.issues.push(...l.issues):e.issues=l.issues,r.abortEarly)){e.typed=!1;break}l.typed||(e.typed=!1),e.typed&&(s?s.push(l.value):s=[l.value])}if(e.typed){e.value=s[0];for(let u=1;u<s.length;u++){let l=Be(e.value,s[u]);if(l.issue){f(this,"type",e,r,{received:"unknown"});break}e.value=l.value}}}else f(this,"type",e,r);return e}}}function qs(n,t){return{kind:"schema",type:"intersect",reference:qs,expects:V(n.map(e=>e.expects),"&"),async:!0,options:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){if(this.options.length){let i=e.value,s;e.typed=!0;let u=await Promise.all(this.options.map(l=>l["~run"]({value:i},r)));for(let l of u){if(l.issues&&(e.issues?e.issues.push(...l.issues):e.issues=l.issues,r.abortEarly)){e.typed=!1;break}l.typed||(e.typed=!1),e.typed&&(s?s.push(l.value):s=[l.value])}if(e.typed){e.value=s[0];for(let l=1;l<s.length;l++){let o=Be(e.value,s[l]);if(o.issue){f(this,"type",e,r,{received:"unknown"});break}e.value=o.value}}}else f(this,"type",e,r);return e}}}function Rs(n){return{kind:"schema",type:"lazy",reference:Rs,expects:"unknown",async:!1,getter:n,get"~standard"(){return d(this)},"~run"(t,e){return this.getter(t.value)["~run"](t,e)}}}function Ns(n){return{kind:"schema",type:"lazy",reference:Ns,expects:"unknown",async:!0,getter:n,get"~standard"(){return d(this)},async"~run"(t,e){return(await this.getter(t.value))["~run"](t,e)}}}function Fs(n,t){return{kind:"schema",type:"literal",reference:Fs,expects:w(n),async:!1,literal:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value===this.literal?e.typed=!0:f(this,"type",e,r),e}}}function Ms(n,t){return{kind:"schema",type:"loose_object",reference:Ms,expects:"Object",async:!1,entries:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};for(let s in this.entries){let u=this.entries[s];if(s in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){let l=s in i?i[s]:x(u),o=u["~run"]({value:l},r);if(o.issues){let a={type:"object",origin:"value",input:i,key:s,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[s]=o.value}else if(u.fallback!==void 0)e.value[s]=T(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]}),r.abortEarly))break}if(!e.issues||!r.abortEarly)for(let s in i)ne(i,s)&&!(s in this.entries)&&(e.value[s]=i[s])}else f(this,"type",e,r);return e}}}function Ls(n,t){return{kind:"schema",type:"loose_object",reference:Ls,expects:"Object",async:!0,entries:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};let s=await Promise.all(Object.entries(this.entries).map(async([u,l])=>{if(u in i||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){let o=u in i?i[u]:await x(l);return[u,o,l,await l["~run"]({value:o},r)]}return[u,i[u],l,null]}));for(let[u,l,o,a]of s)if(a){if(a.issues){let c={type:"object",origin:"value",input:i,key:u,value:l};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],e.issues?.push(p);if(e.issues||(e.issues=a.issues),r.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[u]=a.value}else if(o.fallback!==void 0)e.value[u]=await T(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:i,key:u,value:l}]}),r.abortEarly))break;if(!e.issues||!r.abortEarly)for(let u in i)ne(i,u)&&!(u in this.entries)&&(e.value[u]=i[u])}else f(this,"type",e,r);return e}}}function Gs(n,t){return{kind:"schema",type:"loose_tuple",reference:Gs,expects:"Array",async:!1,items:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];for(let s=0;s<this.items.length;s++){let u=i[s],l=this.items[s]["~run"]({value:u},r);if(l.issues){let o={type:"array",origin:"value",input:i,key:s,value:u};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.push(l.value)}if(!e.issues||!r.abortEarly)for(let s=this.items.length;s<i.length;s++)e.value.push(i[s])}else f(this,"type",e,r);return e}}}function Bs(n,t){return{kind:"schema",type:"loose_tuple",reference:Bs,expects:"Array",async:!0,items:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];let s=await Promise.all(this.items.map(async(u,l)=>{let o=i[l];return[l,o,await u["~run"]({value:o},r)]}));for(let[u,l,o]of s){if(o.issues){let a={type:"array",origin:"value",input:i,key:u,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}if(!e.issues||!r.abortEarly)for(let u=this.items.length;u<i.length;u++)e.value.push(i[u])}else f(this,"type",e,r);return e}}}function zs(n,t,e){return{kind:"schema",type:"map",reference:zs,expects:"Map",async:!1,key:n,value:t,message:e,get"~standard"(){return d(this)},"~run"(r,i){let s=r.value;if(s instanceof Map){r.typed=!0,r.value=new Map;for(let[u,l]of s){let o=this.key["~run"]({value:u},i);if(o.issues){let c={type:"map",origin:"key",input:s,key:u,value:l};for(let p of o.issues)p.path?p.path.unshift(c):p.path=[c],r.issues?.push(p);if(r.issues||(r.issues=o.issues),i.abortEarly){r.typed=!1;break}}let a=this.value["~run"]({value:l},i);if(a.issues){let c={type:"map",origin:"value",input:s,key:u,value:l};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],r.issues?.push(p);if(r.issues||(r.issues=a.issues),i.abortEarly){r.typed=!1;break}}(!o.typed||!a.typed)&&(r.typed=!1),r.value.set(o.value,a.value)}}else f(this,"type",r,i);return r}}}function Ws(n,t,e){return{kind:"schema",type:"map",reference:Ws,expects:"Map",async:!0,key:n,value:t,message:e,get"~standard"(){return d(this)},async"~run"(r,i){let s=r.value;if(s instanceof Map){r.typed=!0,r.value=new Map;let u=await Promise.all([...s].map(([l,o])=>Promise.all([l,o,this.key["~run"]({value:l},i),this.value["~run"]({value:o},i)])));for(let[l,o,a,c]of u){if(a.issues){let p={type:"map",origin:"key",input:s,key:l,value:o};for(let y of a.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=a.issues),i.abortEarly){r.typed=!1;break}}if(c.issues){let p={type:"map",origin:"value",input:s,key:l,value:o};for(let y of c.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=c.issues),i.abortEarly){r.typed=!1;break}}(!a.typed||!c.typed)&&(r.typed=!1),r.value.set(a.value,c.value)}}else f(this,"type",r,i);return r}}}function Us(n){return{kind:"schema",type:"nan",reference:Us,expects:"NaN",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return Number.isNaN(t.value)?t.typed=!0:f(this,"type",t,e),t}}}function Xs(n){return{kind:"schema",type:"never",reference:Xs,expects:"never",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return f(this,"type",t,e),t}}}function Hs(n,t){return{kind:"schema",type:"non_nullable",reference:Hs,expects:"!null",async:!1,wrapped:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value!==null&&(e=this.wrapped["~run"](e,r)),e.value===null&&f(this,"type",e,r),e}}}function Js(n,t){return{kind:"schema",type:"non_nullable",reference:Js,expects:"!null",async:!0,wrapped:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value!==null&&(e=await this.wrapped["~run"](e,r)),e.value===null&&f(this,"type",e,r),e}}}function Ks(n,t){return{kind:"schema",type:"non_nullish",reference:Ks,expects:"(!null & !undefined)",async:!1,wrapped:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value===null||e.value===void 0||(e=this.wrapped["~run"](e,r)),(e.value===null||e.value===void 0)&&f(this,"type",e,r),e}}}function Zs(n,t){return{kind:"schema",type:"non_nullish",reference:Zs,expects:"(!null & !undefined)",async:!0,wrapped:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value===null||e.value===void 0||(e=await this.wrapped["~run"](e,r)),(e.value===null||e.value===void 0)&&f(this,"type",e,r),e}}}function xt(n,t){return{kind:"schema",type:"non_optional",reference:xt,expects:"!undefined",async:!1,wrapped:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value!==void 0&&(e=this.wrapped["~run"](e,r)),e.value===void 0&&f(this,"type",e,r),e}}}function Ot(n,t){return{kind:"schema",type:"non_optional",reference:Ot,expects:"!undefined",async:!0,wrapped:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value!==void 0&&(e=await this.wrapped["~run"](e,r)),e.value===void 0&&f(this,"type",e,r),e}}}function Qs(n){return{kind:"schema",type:"null",reference:Qs,expects:"null",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value===null?t.typed=!0:f(this,"type",t,e),t}}}function Ys(n,t){return{kind:"schema",type:"nullable",reference:Ys,expects:`(${n.expects} | null)`,async:!1,wrapped:n,default:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value===null&&(this.default!==void 0&&(e.value=x(this,e,r)),e.value===null)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function eu(n,t){return{kind:"schema",type:"nullable",reference:eu,expects:`(${n.expects} | null)`,async:!0,wrapped:n,default:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value===null&&(this.default!==void 0&&(e.value=await x(this,e,r)),e.value===null)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function tu(n,t){return{kind:"schema",type:"nullish",reference:tu,expects:`(${n.expects} | null | undefined)`,async:!1,wrapped:n,default:t,get"~standard"(){return d(this)},"~run"(e,r){return(e.value===null||e.value===void 0)&&(this.default!==void 0&&(e.value=x(this,e,r)),e.value===null||e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function nu(n,t){return{kind:"schema",type:"nullish",reference:nu,expects:`(${n.expects} | null | undefined)`,async:!0,wrapped:n,default:t,get"~standard"(){return d(this)},async"~run"(e,r){return(e.value===null||e.value===void 0)&&(this.default!==void 0&&(e.value=await x(this,e,r)),e.value===null||e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function ru(n){return{kind:"schema",type:"number",reference:ru,expects:"number",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:f(this,"type",t,e),t}}}function iu(n,t){return{kind:"schema",type:"object",reference:iu,expects:"Object",async:!1,entries:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};for(let s in this.entries){let u=this.entries[s];if(s in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){let l=s in i?i[s]:x(u),o=u["~run"]({value:l},r);if(o.issues){let a={type:"object",origin:"value",input:i,key:s,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[s]=o.value}else if(u.fallback!==void 0)e.value[s]=T(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]}),r.abortEarly))break}}else f(this,"type",e,r);return e}}}function su(n,t){return{kind:"schema",type:"object",reference:su,expects:"Object",async:!0,entries:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};let s=await Promise.all(Object.entries(this.entries).map(async([u,l])=>{if(u in i||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){let o=u in i?i[u]:await x(l);return[u,o,l,await l["~run"]({value:o},r)]}return[u,i[u],l,null]}));for(let[u,l,o,a]of s)if(a){if(a.issues){let c={type:"object",origin:"value",input:i,key:u,value:l};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],e.issues?.push(p);if(e.issues||(e.issues=a.issues),r.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[u]=a.value}else if(o.fallback!==void 0)e.value[u]=await T(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:i,key:u,value:l}]}),r.abortEarly))break}else f(this,"type",e,r);return e}}}function uu(n,t,e){return{kind:"schema",type:"object_with_rest",reference:uu,expects:"Object",async:!1,entries:n,rest:t,message:e,get"~standard"(){return d(this)},"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(let u in this.entries){let l=this.entries[u];if(u in s||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){let o=u in s?s[u]:x(l),a=l["~run"]({value:o},i);if(a.issues){let c={type:"object",origin:"value",input:s,key:u,value:o};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],r.issues?.push(p);if(r.issues||(r.issues=a.issues),i.abortEarly){r.typed=!1;break}}a.typed||(r.typed=!1),r.value[u]=a.value}else if(l.fallback!==void 0)r.value[u]=T(l);else if(l.type!=="exact_optional"&&l.type!=="optional"&&l.type!=="nullish"&&(f(this,"key",r,i,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:s,key:u,value:s[u]}]}),i.abortEarly))break}if(!r.issues||!i.abortEarly){for(let u in s)if(ne(s,u)&&!(u in this.entries)){let l=this.rest["~run"]({value:s[u]},i);if(l.issues){let o={type:"object",origin:"value",input:s,key:u,value:s[u]};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],r.issues?.push(a);if(r.issues||(r.issues=l.issues),i.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),r.value[u]=l.value}}}else f(this,"type",r,i);return r}}}function ou(n,t,e){return{kind:"schema",type:"object_with_rest",reference:ou,expects:"Object",async:!0,entries:n,rest:t,message:e,get"~standard"(){return d(this)},async"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};let[u,l]=await Promise.all([Promise.all(Object.entries(this.entries).map(async([o,a])=>{if(o in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){let c=o in s?s[o]:await x(a);return[o,c,a,await a["~run"]({value:c},i)]}return[o,s[o],a,null]})),Promise.all(Object.entries(s).filter(([o])=>ne(s,o)&&!(o in this.entries)).map(async([o,a])=>[o,a,await this.rest["~run"]({value:a},i)]))]);for(let[o,a,c,p]of u)if(p){if(p.issues){let y={type:"object",origin:"value",input:s,key:o,value:a};for(let b of p.issues)b.path?b.path.unshift(y):b.path=[y],r.issues?.push(b);if(r.issues||(r.issues=p.issues),i.abortEarly){r.typed=!1;break}}p.typed||(r.typed=!1),r.value[o]=p.value}else if(c.fallback!==void 0)r.value[o]=await T(c);else if(c.type!=="exact_optional"&&c.type!=="optional"&&c.type!=="nullish"&&(f(this,"key",r,i,{input:void 0,expected:`"${o}"`,path:[{type:"object",origin:"key",input:s,key:o,value:a}]}),i.abortEarly))break;if(!r.issues||!i.abortEarly)for(let[o,a,c]of l){if(c.issues){let p={type:"object",origin:"value",input:s,key:o,value:a};for(let y of c.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=c.issues),i.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value[o]=c.value}}else f(this,"type",r,i);return r}}}function je(n,t){return{kind:"schema",type:"optional",reference:je,expects:`(${n.expects} | undefined)`,async:!1,wrapped:n,default:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value===void 0&&(this.default!==void 0&&(e.value=x(this,e,r)),e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function At(n,t){return{kind:"schema",type:"optional",reference:At,expects:`(${n.expects} | undefined)`,async:!0,wrapped:n,default:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value===void 0&&(this.default!==void 0&&(e.value=await x(this,e,r)),e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function jt(n,t){return{kind:"schema",type:"picklist",reference:jt,expects:V(n.map(w),"|"),async:!1,options:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return this.options.includes(e.value)?e.typed=!0:f(this,"type",e,r),e}}}function lu(n){return{kind:"schema",type:"promise",reference:lu,expects:"Promise",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value instanceof Promise?t.typed=!0:f(this,"type",t,e),t}}}function au(n,t,e){return{kind:"schema",type:"record",reference:au,expects:"Object",async:!1,key:n,value:t,message:e,get"~standard"(){return d(this)},"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(let u in s)if(ne(s,u)){let l=s[u],o=this.key["~run"]({value:u},i);if(o.issues){let c={type:"object",origin:"key",input:s,key:u,value:l};for(let p of o.issues)p.path=[c],r.issues?.push(p);if(r.issues||(r.issues=o.issues),i.abortEarly){r.typed=!1;break}}let a=this.value["~run"]({value:l},i);if(a.issues){let c={type:"object",origin:"value",input:s,key:u,value:l};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],r.issues?.push(p);if(r.issues||(r.issues=a.issues),i.abortEarly){r.typed=!1;break}}(!o.typed||!a.typed)&&(r.typed=!1),o.typed&&(r.value[o.value]=a.value)}}else f(this,"type",r,i);return r}}}function cu(n,t,e){return{kind:"schema",type:"record",reference:cu,expects:"Object",async:!0,key:n,value:t,message:e,get"~standard"(){return d(this)},async"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};let u=await Promise.all(Object.entries(s).filter(([l])=>ne(s,l)).map(([l,o])=>Promise.all([l,o,this.key["~run"]({value:l},i),this.value["~run"]({value:o},i)])));for(let[l,o,a,c]of u){if(a.issues){let p={type:"object",origin:"key",input:s,key:l,value:o};for(let y of a.issues)y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=a.issues),i.abortEarly){r.typed=!1;break}}if(c.issues){let p={type:"object",origin:"value",input:s,key:l,value:o};for(let y of c.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=c.issues),i.abortEarly){r.typed=!1;break}}(!a.typed||!c.typed)&&(r.typed=!1),a.typed&&(r.value[a.value]=c.value)}}else f(this,"type",r,i);return r}}}function fu(n,t){return{kind:"schema",type:"set",reference:fu,expects:"Set",async:!1,value:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(i instanceof Set){e.typed=!0,e.value=new Set;for(let s of i){let u=this.value["~run"]({value:s},r);if(u.issues){let l={type:"set",origin:"value",input:i,key:null,value:s};for(let o of u.issues)o.path?o.path.unshift(l):o.path=[l],e.issues?.push(o);if(e.issues||(e.issues=u.issues),r.abortEarly){e.typed=!1;break}}u.typed||(e.typed=!1),e.value.add(u.value)}}else f(this,"type",e,r);return e}}}function pu(n,t){return{kind:"schema",type:"set",reference:pu,expects:"Set",async:!0,value:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(i instanceof Set){e.typed=!0,e.value=new Set;let s=await Promise.all([...i].map(async u=>[u,await this.value["~run"]({value:u},r)]));for(let[u,l]of s){if(l.issues){let o={type:"set",origin:"value",input:i,key:null,value:u};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.add(l.value)}}else f(this,"type",e,r);return e}}}function hu(n,t){return{kind:"schema",type:"strict_object",reference:hu,expects:"Object",async:!1,entries:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};for(let s in this.entries){let u=this.entries[s];if(s in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){let l=s in i?i[s]:x(u),o=u["~run"]({value:l},r);if(o.issues){let a={type:"object",origin:"value",input:i,key:s,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[s]=o.value}else if(u.fallback!==void 0)e.value[s]=T(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]}),r.abortEarly))break}if(!e.issues||!r.abortEarly){for(let s in i)if(!(s in this.entries)){f(this,"key",e,r,{input:s,expected:"never",path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]});break}}}else f(this,"type",e,r);return e}}}function yu(n,t){return{kind:"schema",type:"strict_object",reference:yu,expects:"Object",async:!0,entries:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};let s=await Promise.all(Object.entries(this.entries).map(async([u,l])=>{if(u in i||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){let o=u in i?i[u]:await x(l);return[u,o,l,await l["~run"]({value:o},r)]}return[u,i[u],l,null]}));for(let[u,l,o,a]of s)if(a){if(a.issues){let c={type:"object",origin:"value",input:i,key:u,value:l};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],e.issues?.push(p);if(e.issues||(e.issues=a.issues),r.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[u]=a.value}else if(o.fallback!==void 0)e.value[u]=await T(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:i,key:u,value:l}]}),r.abortEarly))break;if(!e.issues||!r.abortEarly){for(let u in i)if(!(u in this.entries)){f(this,"key",e,r,{input:u,expected:"never",path:[{type:"object",origin:"key",input:i,key:u,value:i[u]}]});break}}}else f(this,"type",e,r);return e}}}function du(n,t){return{kind:"schema",type:"strict_tuple",reference:du,expects:"Array",async:!1,items:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];for(let s=0;s<this.items.length;s++){let u=i[s],l=this.items[s]["~run"]({value:u},r);if(l.issues){let o={type:"array",origin:"value",input:i,key:s,value:u};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.push(l.value)}!(e.issues&&r.abortEarly)&&this.items.length<i.length&&f(this,"type",e,r,{input:i[this.items.length],expected:"never",path:[{type:"array",origin:"value",input:i,key:this.items.length,value:i[this.items.length]}]})}else f(this,"type",e,r);return e}}}function mu(n,t){return{kind:"schema",type:"strict_tuple",reference:mu,expects:"Array",async:!0,items:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];let s=await Promise.all(this.items.map(async(u,l)=>{let o=i[l];return[l,o,await u["~run"]({value:o},r)]}));for(let[u,l,o]of s){if(o.issues){let a={type:"array",origin:"value",input:i,key:u,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}!(e.issues&&r.abortEarly)&&this.items.length<i.length&&f(this,"type",e,r,{input:i[this.items.length],expected:"never",path:[{type:"array",origin:"value",input:i,key:this.items.length,value:i[this.items.length]}]})}else f(this,"type",e,r);return e}}}function vu(n){return{kind:"schema",type:"string",reference:vu,expects:"string",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="string"?t.typed=!0:f(this,"type",t,e),t}}}function gu(n){return{kind:"schema",type:"symbol",reference:gu,expects:"symbol",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="symbol"?t.typed=!0:f(this,"type",t,e),t}}}function bu(n,t){return{kind:"schema",type:"tuple",reference:bu,expects:"Array",async:!1,items:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];for(let s=0;s<this.items.length;s++){let u=i[s],l=this.items[s]["~run"]({value:u},r);if(l.issues){let o={type:"array",origin:"value",input:i,key:s,value:u};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.push(l.value)}}else f(this,"type",e,r);return e}}}function ku(n,t){return{kind:"schema",type:"tuple",reference:ku,expects:"Array",async:!0,items:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];let s=await Promise.all(this.items.map(async(u,l)=>{let o=i[l];return[l,o,await u["~run"]({value:o},r)]}));for(let[u,l,o]of s){if(o.issues){let a={type:"array",origin:"value",input:i,key:u,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else f(this,"type",e,r);return e}}}function Cu(n,t,e){return{kind:"schema",type:"tuple_with_rest",reference:Cu,expects:"Array",async:!1,items:n,rest:t,message:e,get"~standard"(){return d(this)},"~run"(r,i){let s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let u=0;u<this.items.length;u++){let l=s[u],o=this.items[u]["~run"]({value:l},i);if(o.issues){let a={type:"array",origin:"value",input:s,key:u,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],r.issues?.push(c);if(r.issues||(r.issues=o.issues),i.abortEarly){r.typed=!1;break}}o.typed||(r.typed=!1),r.value.push(o.value)}if(!r.issues||!i.abortEarly)for(let u=this.items.length;u<s.length;u++){let l=s[u],o=this.rest["~run"]({value:l},i);if(o.issues){let a={type:"array",origin:"value",input:s,key:u,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],r.issues?.push(c);if(r.issues||(r.issues=o.issues),i.abortEarly){r.typed=!1;break}}o.typed||(r.typed=!1),r.value.push(o.value)}}else f(this,"type",r,i);return r}}}function $u(n,t,e){return{kind:"schema",type:"tuple_with_rest",reference:$u,expects:"Array",async:!0,items:n,rest:t,message:e,get"~standard"(){return d(this)},async"~run"(r,i){let s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];let[u,l]=await Promise.all([Promise.all(this.items.map(async(o,a)=>{let c=s[a];return[a,c,await o["~run"]({value:c},i)]})),Promise.all(s.slice(this.items.length).map(async(o,a)=>[a+this.items.length,o,await this.rest["~run"]({value:o},i)]))]);for(let[o,a,c]of u){if(c.issues){let p={type:"array",origin:"value",input:s,key:o,value:a};for(let y of c.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=c.issues),i.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}if(!r.issues||!i.abortEarly)for(let[o,a,c]of l){if(c.issues){let p={type:"array",origin:"value",input:s,key:o,value:a};for(let y of c.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=c.issues),i.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}}else f(this,"type",r,i);return r}}}function Eu(n){return{kind:"schema",type:"undefined",reference:Eu,expects:"undefined",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value===void 0?t.typed=!0:f(this,"type",t,e),t}}}function _u(n,t){return{kind:"schema",type:"undefinedable",reference:_u,expects:`(${n.expects} | undefined)`,async:!1,wrapped:n,default:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value===void 0&&(this.default!==void 0&&(e.value=x(this,e,r)),e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function wu(n,t){return{kind:"schema",type:"undefinedable",reference:wu,expects:`(${n.expects} | undefined)`,async:!0,wrapped:n,default:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value===void 0&&(this.default!==void 0&&(e.value=await x(this,e,r)),e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function ze(n){let t;if(n)for(let e of n)t?t.push(...e.issues):t=e.issues;return t}function xu(n,t){return{kind:"schema",type:"union",reference:xu,expects:V(n.map(e=>e.expects),"|"),async:!1,options:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i,s,u;for(let l of this.options){let o=l["~run"]({value:e.value},r);if(o.typed)if(o.issues)s?s.push(o):s=[o];else{i=o;break}else u?u.push(o):u=[o]}if(i)return i;if(s){if(s.length===1)return s[0];f(this,"type",e,r,{issues:ze(s)}),e.typed=!0}else{if(u?.length===1)return u[0];f(this,"type",e,r,{issues:ze(u)})}return e}}}function Ou(n,t){return{kind:"schema",type:"union",reference:Ou,expects:V(n.map(e=>e.expects),"|"),async:!0,options:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i,s,u;for(let l of this.options){let o=await l["~run"]({value:e.value},r);if(o.typed)if(o.issues)s?s.push(o):s=[o];else{i=o;break}else u?u.push(o):u=[o]}if(i)return i;if(s){if(s.length===1)return s[0];f(this,"type",e,r,{issues:ze(s)}),e.typed=!0}else{if(u?.length===1)return u[0];f(this,"type",e,r,{issues:ze(u)})}return e}}}function Au(){return{kind:"schema",type:"unknown",reference:Au,expects:"unknown",async:!1,get"~standard"(){return d(this)},"~run"(n){return n.typed=!0,n}}}function ju(n,t,e){return{kind:"schema",type:"variant",reference:ju,expects:"Object",async:!1,key:n,options:t,message:e,get"~standard"(){return d(this)},"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){let u,l=0,o=this.key,a=[],c=(p,y)=>{for(let b of p.options){if(b.type==="variant")c(b,new Set(y).add(b.key));else{let k=!0,C=0;for(let g of y){let A=b.entries[g];if(g in s?A["~run"]({typed:!1,value:s[g]},{abortEarly:!0}).issues:A.type!=="exact_optional"&&A.type!=="optional"&&A.type!=="nullish"){k=!1,o!==g&&(l<C||l===C&&g in s&&!(o in s))&&(l=C,o=g,a=[]),o===g&&a.push(b.entries[g].expects);break}C++}if(k){let g=b["~run"]({value:s},i);(!u||!u.typed&&g.typed)&&(u=g)}}if(u&&!u.issues)break}};if(c(this,new Set([this.key])),u)return u;f(this,"type",r,i,{input:s[o],expected:V(a,"|"),path:[{type:"object",origin:"value",input:s,key:o,value:s[o]}]})}else f(this,"type",r,i);return r}}}function Du(n,t,e){return{kind:"schema",type:"variant",reference:Du,expects:"Object",async:!0,key:n,options:t,message:e,get"~standard"(){return d(this)},async"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){let u,l=0,o=this.key,a=[],c=async(p,y)=>{for(let b of p.options){if(b.type==="variant")await c(b,new Set(y).add(b.key));else{let k=!0,C=0;for(let g of y){let A=b.entries[g];if(g in s?(await A["~run"]({typed:!1,value:s[g]},{abortEarly:!0})).issues:A.type!=="exact_optional"&&A.type!=="optional"&&A.type!=="nullish"){k=!1,o!==g&&(l<C||l===C&&g in s&&!(o in s))&&(l=C,o=g,a=[]),o===g&&a.push(b.entries[g].expects);break}C++}if(k){let g=await b["~run"]({value:s},i);(!u||!u.typed&&g.typed)&&(u=g)}}if(u&&!u.issues)break}};if(await c(this,new Set([this.key])),u)return u;f(this,"type",r,i,{input:s[o],expected:V(a,"|"),path:[{type:"object",origin:"value",input:s,key:o,value:s[o]}]})}else f(this,"type",r,i);return r}}}function Ue(n){return{kind:"schema",type:"void",reference:Ue,expects:"void",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value===void 0?t.typed=!0:f(this,"type",t,e),t}}}function dl(n,t){return jt(Object.keys(n.entries),t)}function ml(n,t){return v(h({},n),{get"~standard"(){return d(this)},"~run"(e,r){return n["~run"](e,v(h({},r),{message:t}))}})}function vl(n,t){let e=h({},n.entries);for(let r of t)delete e[r];return v(h({},n),{entries:e,get"~standard"(){return d(this)}})}function Iu(n,t,e){let r=n["~run"]({value:t},pe(e));if(r.issues)throw new z(r.issues);return r.value}async function Tu(n,t,e){let r=await n["~run"]({value:t},pe(e));if(r.issues)throw new z(r.issues);return r.value}function gl(n,t){let e=r=>Iu(n,r,t);return e.schema=n,e.config=t,e}function bl(n,t){let e=r=>Tu(n,r,t);return e.schema=n,e.config=t,e}function kl(n,t){let e={};for(let r in n.entries)e[r]=!t||t.includes(r)?je(n.entries[r]):n.entries[r];return v(h({},n),{entries:e,get"~standard"(){return d(this)}})}function Cl(n,t){let e={};for(let r in n.entries)e[r]=!t||t.includes(r)?At(n.entries[r]):n.entries[r];return v(h({},n),{entries:e,get"~standard"(){return d(this)}})}function $l(n,t){let e={};for(let r of t)e[r]=n.entries[r];return v(h({},n),{entries:e,get"~standard"(){return d(this)}})}function El(...n){return v(h({},n[0]),{pipe:n,get"~standard"(){return d(this)},"~run"(t,e){for(let r of n)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!e.abortEarly&&!e.abortPipeEarly)&&(t=r["~run"](t,e))}return t}})}function _l(...n){return v(h({},n[0]),{pipe:n,async:!0,get"~standard"(){return d(this)},async"~run"(t,e){for(let r of n)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!e.abortEarly&&!e.abortPipeEarly)&&(t=await r["~run"](t,e))}return t}})}function wl(n,t,e){let r=Array.isArray(t)?t:void 0,i=Array.isArray(t)?e:t,s={};for(let u in n.entries)s[u]=!r||r.includes(u)?xt(n.entries[u],i):n.entries[u];return v(h({},n),{entries:s,get"~standard"(){return d(this)}})}function xl(n,t,e){let r=Array.isArray(t)?t:void 0,i=Array.isArray(t)?e:t,s={};for(let u in n.entries)s[u]=!r||r.includes(u)?Ot(n.entries[u],i):n.entries[u];return v(h({},n),{entries:s,get"~standard"(){return d(this)}})}function Su(n,t,e){let r=n["~run"]({value:t},pe(e));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}async function Pu(n,t,e){let r=await n["~run"]({value:t},pe(e));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}function Dt(n,t){let e=r=>Su(n,r,t);return e.schema=n,e.config=t,e}function Ol(n,t){let e=r=>Pu(n,r,t);return e.schema=n,e.config=t,e}function Al(n){let t="";for(let e of n){t&&(t+=`
`),t+=`\xD7 ${e.message}`;let r=wt(e);r&&(t+=`
  \u2192 at ${r}`)}return t}function jl(n){return n.wrapped}var Bu=io(Ru(),1);function*It(n){if("pipe"in n)for(let t of n.pipe)yield*It(t);else"wrapped"in n?(yield n,yield*It(n.wrapped)):yield n}function Nu(n,t,e){let r=v(h({},e),{environments:e?.environments??["default"]}),i={lazyMap:new Map},s=new r.handle(r,void 0,void 0,i);return J(n,s),t(s)}function J(n,t){t.begin(n);let e=It(n),r,i=[];for(let s of e)if(s.kind==="schema")if("wrapped"in s)i.push(s);else{if(r)continue;r=s,t.defineSchema(r)}else s.kind==="metadata"?t.metadata(s,"init"):s.kind==="validation"?t.validation(s):s.kind==="transformation"&&t.transformation(s);for(let s of i.reverse())t.wrappedSchema(s);switch(t.beforeSchemaType(r),r.type){case"lazy":{t.lazySchema(r);break}case"array":{t.arraySchema(r);break}case"tuple":case"tuple_with_rest":case"loose_tuple":case"strict_tuple":{t.tupleSchema(r);break}case"object":case"object_with_rest":case"loose_object":case"strict_object":{t.objectSchema(r);break}case"record":{t.recordSchema(r.key,r.value);break}case"literal":{t.defaultSchema(r);break}case"enum":case"picklist":{t.enumSchema(r);break}case"union":case"variant":{t.unionSchema(r);break}case"intersect":{t.intersectSchema(r);break}case"any":case"unknown":{t.anySchema(r);break}case"undefined":case"null":{t.undefinedSchema(r);break}case"string":case"number":case"boolean":{t.basicSchema(r);break}case"void":case"never":{t.voidSchema(r);break}case"custom":{t.customSchema(r);break}default:t.otherSchema(r)}t.afterSchemaType(r),t.end(n)}function Tt(n=!0){return{kind:"metadata",type:"asControl",reference:Tt,value:n}}function St(n){return(t,e)=>({kind:"metadata",type:n,reference:Tl,value:t,workOn:e})}var Tl=St("rawConfig");function Pt(n){return{kind:"metadata",type:"condition",reference:Pt,value:n}}function Vt(n=!0){return{kind:"metadata",type:"asVirtualGroup",reference:Vt,value:n}}function Xe(n,t){"pipe"in n?n.pipe.forEach(e=>{Xe(e,t)}):"wrapped"in n?Xe(n.wrapped,t):t(n)}function Sl(n){let t=!1;return Xe(n,e=>{e.kind==="metadata"&&e.type==="asControl"&&(t=e.value)}),t}function He(n,t){for(t=t.slice();t.length;){let e=t[0];if(Sl(n))return n;switch(n.type){case"object":case"object_with_rest":case"loose_object":case"strict_object":n=n.entries[e.key];break;case"array":{n=n.item;break}case"tuple":case"tuple_with_rest":case"loose_tuple":case"strict_tuple":{n=n.items[e.key];break}case"intersect":case"variant":case"union":{for(let i=0;i<n.options.length;i++){let s=n.options[i],u=He(s,t);if(u)return u}break}case"nullable":case"nullish":case"exact_optional":case"optional":case"undefinedable":case"non_nullable":case"non_nullish":case"non_optional":{let i=n.wrapped,s=He(n.wrapped,t);return s===i?i:s}default:return n}if(!n)return;t.shift()}return n}function Fu(n){let t,e,r;return Xe(n,i=>{if(i.kind==="metadata")switch(i.type){case"title":t=i.title;break;case"metadata":r=i.metadata;break;case"description":e=i.description;break;default:break}}),{title:t,description:e,metadata:r}}function Pl(n){for(;"wrapped"in n;)n=n.wrapped;return n}function R(n){let t=Pl(n);if("entries"in t){let e={},r=x(n);for(let i in t.entries){let s=r?.[i]??R(t.entries[i]);s!==void 0&&(e[i]=s)}return Object.keys(e).length?e:void 0}if("items"in t){let e=[];for(let r=0;r<t.items.length;r++){let i=t.items[r],s=R(i);s!==void 0&&(e[r]=s)}return e.length?e:void 0}if("options"in t){if(t.type==="intersect"){let e=t.options.slice().reduce((r,i)=>h(h({},r),R(i)),{});return Object.keys(e).length?e:void 0}if(t.type==="union"||t.type==="variant")for(let e of t.options){let r=R(e);if(r!==void 0)return r}}return x(n)}var Mu=class{key;fullPath=[];children=[];parent;type;isGroup;isObjectControl=!1;arrayChild;defaultValue;props;priority=0;childrenAsVirtualGroup=!1;undefinedable=!1;nullable=!1;globalConfig;callSchemaHandle;callDefineSchema;sourceSchema;lazyWrapped;context;afterSchemaTypeList=[];constructor(n,t,e,r){this.globalConfig=n,this.callSchemaHandle=t,this.callDefineSchema=e,t&&(this.context=t.context),r&&(this.context=r)}begin(n){this.sourceSchema=n}end(n){}defineSchema(n){this.type=n.type}beforeSchemaType(n){}tupleSchema(n){if(this.isObjectControl){this.defaultValue=R(this.sourceSchema);return}this.tupleDefault(n);for(let t=0;t<n.items.length;t++){let e=n.items[t];this.objectItemSchema(e,t)}n.type==="tuple_with_rest"&&this.restSchema(n.rest),this.afterTupleSchema(n)}tupleDefault(n){}afterTupleSchema(n){}objectSchema(n){if(this.isObjectControl){this.defaultValue=R(this.sourceSchema);return}this.objectDefault(n),this.isGroup??=!0;for(let t in n.entries){let e=n.entries[t];this.objectItemSchema(e,t)}n.type==="object_with_rest"&&this.restSchema(n.rest),this.afterObjectSchema(n)}objectDefault(n){}afterObjectSchema(n){}optionalWrapSchema(n){switch(n.type){case"undefinedable":case"optional":case"exact_optional":this.undefinedable=!0;break;case"nullable":this.nullable=!0;break;case"nullish":this.nullable=!0,this.undefinedable=!0;break;default:break}}nonOptionalSchema(n){switch(n.type){case"non_nullable":this.nullable=!1;break;case"non_nullish":this.nullable=!1,this.undefinedable=!1;break;case"non_optional":this.undefinedable=!1;break;default:break}}wrappedSchema(n){"default"in n?(this.optionalWrapSchema(n),this.defaultValue=n.default):(this.nonOptionalSchema(n),delete this.defaultValue)}recordSchema(n,t){}defaultSchema(n){}enumSchema(n){}voidSchema(n){}customSchema(n){}otherSchema(n){}afterSchemaType(n){this.afterSchemaTypeList.forEach(t=>{this.metadata(t,t.workOn)})}metadataDefaulthandle(n,t,e){}metadataHandle(n,t,e){if(!(this.globalConfig.environments!==t&&this.globalConfig.environments.every(r=>!t.includes(r)))){if(e==="init"&&"workOn"in n&&n.workOn){this.afterSchemaTypeList.push(n);return}switch(n.type){case"rawConfig":{n.value(this,this.globalConfig.context);break}case"title":{this.props??={},this.props.title=n.title;break}case"description":{this.props??={},this.props.description=n.description;break}case"metadata":{this.props??={},this.props.metadata=n.metadata;break}case"asControl":{this.isObjectControl=n.value,this.isGroup=!1;break}case"asVirtualGroup":{this.isGroup=!0,this.childrenAsVirtualGroup=n.value;break}case"condition":n.value.actions.forEach(r=>{this.metadataHandle(r,n.value.environments,e)});default:this.metadataDefaulthandle(n,t,e);break}}}metadata(n,t){this.metadataHandle(n,this.globalConfig.environments,t)}validation(n){}transformation(n){}lazySchema(n){let t=this.context.lazyMap.get(n);if(t)this.lazyWrapped=t;else{let e=n.getter(void 0);t=new this.globalConfig.handle(this.globalConfig,this,e),this.context.lazyMap.set(n,t),this.lazyWrapped=t,J(e,t)}}arraySchema(n){if(this.isObjectControl)return;let t=new this.globalConfig.handle(this.globalConfig,this,n);J(n.item,t),this.arrayChild=t}objectItemSchema(n,t){let e=new this.globalConfig.handle(this.globalConfig,this,n);e.key=t,e.fullPath=[...this.fullPath,t],e.setParent(this),J(n,e)}restSchema(n){}anySchema(n){}undefinedSchema(n){}basicSchema(n){}intersectSchema(n){if(this.isObjectControl){this.defaultValue=R(this.sourceSchema);return}this.intersectBefore(n),n.options.forEach((t,e)=>{this.logicItemSchema(t,e,"intersect")})}intersectBefore(n){this.childrenAsVirtualGroup&&(this.type="intersect-group")}logicItemSchema(n,t,e){let r=new this.globalConfig.handle(this.globalConfig,this,n);r.fullPath=[...this.fullPath],r.setParent(this),J(n,r)}unionSchema(n){if(this.isObjectControl){this.defaultValue=R(this.sourceSchema);return}this.unionBefore(n),n.options.forEach((t,e)=>{this.logicItemSchema(t,e,"union")})}unionBefore(n){}setParent(n){this.parent=n,n.children??=[],n.children.push(this)}};function Vl(n){return n.type==="object"||n.type==="loose_object"||n.type==="object_with_rest"||n.type==="strict_object"}function ql(n){return n.type==="intersect"}function qt(n,t){if(Vl(n)){let e=h({},n.entries);for(let r in t)if(t[r]&&n.entries[r]){let i=t[r](n.entries[r]);e[r]=i}return v(h({},n),{entries:e,get"~standard"(){return d(this)}})}else if(ql(n)){let e=[...n.options];for(let r=0;r<e.length;r++){let i=e[r];e[r]=qt(i,t)}return v(h({},n),{options:e,get"~standard"(){return d(this)}})}throw new Error("not object or intersect")}function Lu(n){var t,e,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(t=0;t<i;t++)n[t]&&(e=Lu(n[t]))&&(r&&(r+=" "),r+=e)}else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function Rl(){for(var n,t,e=0,r="",i=arguments.length;e<i;e++)(n=arguments[e])&&(t=Lu(n))&&(r&&(r+=" "),r+=t);return r}var K=Rl;function Nt(n,t){return(Array.isArray(t)?t:[t]).every((e,r)=>e===n[r])}function zu(n,t,e){let r=!0,i=n();return ce(()=>{let s=n();if(r){r=!1,P(i,s)||t();return}return t()},e)}function Ft(n,t,e){let r=e?.injector??j(S),i=new tn(t()),s=zu(n,()=>{let u;try{u=t()}catch(l){O(()=>i.error(l));return}O(()=>i.next(u))},{injector:r,manualCleanup:!0});return r.get(ve).onDestroy(()=>{s.destroy(),i.complete()}),i.asObservable()}var Lt=(0,Bu.default)({proto:!1,circles:!1});function N(n){return rt(n)?n():n}function Gt(n){return n===void 0||Array.isArray(n)?n:[n]}var Ie=class extends Array{#e;constructor(t){super(),this.#e=t}push(...t){let e=super.push(...t);return this.sort(this.#e),e}};function Gu(n){return n}var De="VALID",ie="INVALID",q="PENDING",ye=class{emptyValue$$=m(()=>Lt(this.config$().emptyValue));shouldInclude$$=m(()=>this.valueNoError$$()&&(!this.selfDisabled$$()||this.selfDisabled$$()&&this.config$().disabledValue==="reserve"));injector;selfDisabled$$=m(()=>this.config$?.().disabled??!1);selfEnabled$$=m(()=>!this.selfDisabled$$());disabled$$=m(()=>(this.parent?.disabled$$()||this.selfDisabled$$())??!1);enabled$$=m(()=>!this.disabled$$());get disabled(){return this.disabled$$()}get enabled(){return!this.disabled$$()}enable(){this.config$.update(t=>(t=v(h({},t),{disabled:!1}),v(h({},t),{disabled:!1})))}disable(){this.config$.update(t=>v(h({},t),{disabled:!0}))}selfTouched$=_(!1);touched$$=m(()=>this.reduceChildren(this.selfTouched$(),(t,e)=>e||t.touched$$(),Gu));get touched(){return O(this.touched$$)}get untouched(){return!O(this.touched$$)}selfDirty$=_(!1);dirty$$=m(()=>this.reduceChildren(this.selfDirty$(),(t,e)=>e||t.dirty$$(),Gu));get dirty(){return O(this.dirty$$)}get pristine(){return!O(this.dirty$$)}#e=m(()=>this.config$().validators??[]);#t=m(()=>this.config$().asyncValidators??[]);syncError$$=yt(m(()=>{if(this.disabled$$())return;this.value$$();let e=this.#e().reduce((i,s)=>{let u=O(()=>s(this));return u&&(i=h(h({},i),u)),i},{}),r=this.#i();return r.success?Object.keys(e).length?e:void 0:v(h({},e),{valibot:r.issues})}));asyncErrorRes$$=m(()=>{let t=this.#t();if(t.length!==0)return O(()=>Le({params:()=>this.value$$(),loader:async()=>{let r=(await Promise.all(t.map(i=>O(()=>i(this))))).reduce((i,s)=>(s&&(i=h(h({},i),s)),i),{});return Object.keys(r).length?r:void 0},injector:this.injector}))});asyncError$$=m(()=>{if(this.disabled$$())return;let e=this.asyncErrorRes$$();if(e)return e.isLoading()?q:e.value()});rawError$$=m(()=>{if(this.disabled$$())return;let e=this.syncError$$(),r=this.asyncError$$();return r===q?q:e&&r?h(h({},e),r):e||r?e||r:void 0});valueNoError$$=m(()=>this.rawError$$()===void 0);get errors(){let t=this.rawError$$();return t===q?void 0:t}_parent;get parent(){return this._parent}get value(){return this.value$$()}required$$=m(()=>this.config$().required);schemaParser;constructor(t,e){this.injector=e,this.schemaParser=Dt(t)}#i=m(()=>this.schemaParser(this.value$$()));setParent(t){this._parent=t}get valid(){return this.status$$()===De}get invalid(){return this.status$$()===ie}get pending(){return this.status$$()===q}selfUpdateOn$$=m(()=>this.config$?.().updateOn);updateOn$$=m(()=>(this.selfUpdateOn$$()||this.parent?.updateOn$$())??"change");markAsTouched(){this.selfTouched$.set(!0)}markAllAsDirty(){this.markAsDirty(),this._forEachChild(t=>t.markAllAsDirty())}markAllAsTouched(){this.markAsTouched(),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(){this.selfTouched$.set(!1)}markAsDirty(){this.selfDirty$.set(!0)}markAsPristine(){this.selfDirty$.set(!1)}getRawValue(){return this.value}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r.find(i),this)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}config$=_({});initConfig(t){this.config$=t}find(t){return null}setControl(t,e){}reduceChildren(t,e,r){let i=this.children$$?.();if(!i)return t;let s=t;for(let u of i){if(r?.(s))break;s=e(u,s)}return s}#r;get valueChanges(){return this.#r??(this.#r=Ft(m(()=>({value:this.value$$(),disabled:this.disabled$$()})),this.value$$,{injector:this.injector}))}status$$=m(()=>this.disabled$$()?De:this.rawError$$()?this.rawError$$()!==q?ie:q:this.reduceChildren(De,(t,e)=>e===ie||t.status$$()===ie?ie:e===q||t.status$$()===q?q:De,t=>t===ie));#n;get statusChanges(){return this.#n??(this.#n=Ft(this.status$$,this.status$$,{injector:this.injector}))}},de=class extends ye{#e=m(()=>this.config$().deletionMode??"shrink");value$$=m(()=>{let t=[];for(let e of this.controls$())if(e&&e.shouldInclude$$())t.push(e.value$$());else{if(this.#e()==="shrink")continue;this.#e()==="mark"&&t.push(void 0)}return t.length===0?this.emptyValue$$():t});children$$=m(()=>this.controls$());controls$=_([]);get controls(){return this.controls$()}removeAt(t){let e=this._adjustIndex(t);this.controls$()[e]&&this.controls$.update(r=>(r=r.slice(),r.splice(e,1),r))}setControl(t,e){let r=this._adjustIndex(t);this.controls$.update(i=>(i=i.slice(),i[r]=e,i)),e.setParent(this)}get length(){return this.controls$().length}reset(t=[]){this._forEachChild((e,r)=>{e.reset(t[r])})}getRawValue(){return this.controls$().map(t=>t.getRawValue())}clear(){this.controls$().length<1||this.controls$.update(()=>[])}_adjustIndex(t){return t<0?Math.max(t+this.length,0):t}_forEachChild(t){this.controls$().forEach((e,r)=>{e&&t(e,r)})}find(t){return this.controls$()[this._adjustIndex(t)]}beforeUpdateList=[];updateValue(t=[]){P(t,this.value$$())||(this.beforeUpdateList.forEach(e=>e(t)),this.controls$().forEach((e,r)=>{e.updateValue(t[r])}))}},Te=class extends ye{children$$;#e=0;viewIndex$=_(0);modelValue$=_(void 0);modelValueToViewValueOrigin$$=m(()=>{let t=this.modelValue$(),e=this.config$?.().transfomer?.toView;return e?e(t,this):t});modelValueToViewValue$$=m(()=>(this.viewIndex$(),this.modelValueToViewValueOrigin$$()),{equal:()=>!1});value$$=_(void 0);reset(t=this.config$().defaultValue){this.updateValue(t),this.markAsPristine(),this.markAsUntouched()}_forEachChild(t){}#t=!0;setViewValue(t){this.#e++;let e=this.config$?.().transfomer?.toModel,r=e?e(t,this):t,i=this.schemaParser(r);i.success?(this.value$$.set(i.output),this.syncError$$.set(void 0)):this.syncError$$.set({valibot:i.issues}),this.markAllAsDirty()}updateValue(t){if(this.#t){this.#t=!1,t!==void 0&&!P(t,this.value$$())&&(this.modelValue$.set(t),this.value$$.set(t));return}P(t,this.value$$())||(this.viewIndex$.set(this.#e),this.modelValue$.set(t),this.value$$.set(t))}initConfig(t){super.initConfig(t),"defaultValue"in this.config$()&&(this.modelValue$.set(this.config$().defaultValue),this.value$$.set(this.config$().defaultValue))}},Se=class extends de{activateIndex$=_(0);type=_("and");activateControl$=_(void 0);value$$=m(()=>this.getValue(!1));getActivateControls(){let t;if(this.activateControl$())t=this.activateControl$();else if(this.type()==="and")t=this.controls$();else if(this.type()==="or")t=[this.controls$()[this.activateIndex$()]];else throw new Error("");return t}getValue(t){let e=t?this.getActivateControls():this.getActivateControls().filter(s=>s.shouldInclude$$()),r=e[0];if(e.length===0)return this.emptyValue$$();if(e.length===1)return r.value;let i=e.reduce((s,u)=>h(h({},s),u.value$$()),{});return Object.keys(i).length?i:this.emptyValue$$()}getRawValue(){return this.getValue(!0)}updateValue(t){P(t,this.value$$())||this.controls$().forEach((e,r)=>{e.updateValue(t)})}};function Nl(n){return n instanceof Ve}function Wu(n){return n instanceof de}function Fl(n){return n instanceof Te}function Pe(n){return n instanceof Se}var Ve=class extends ye{value$$=m(()=>{let t={},e=this._reduceChildren(t,(i,s,u)=>(s.shouldInclude$$()&&(i[u]=s.value),i)),r=h(h({},e),this.looseValue$$());return Object.keys(r).length?r:this.emptyValue$$()});children$$=m(()=>Object.values(this.controls$()));controls$=_({});get controls(){return this.controls$()}registerControl(t,e){return this.controls$()[t]?this.controls$()[t]:(this.controls$.update(r=>v(h({},r),{[t]:e})),e.setParent(this),e)}removeControl(t){this.controls$()[t]&&this.controls$.update(e=>(e=h({},e),delete e[t],e))}setControl(t,e){this.controls$.update(r=>(r=h({},r),delete r[t],r)),e&&this.registerControl(t,e)}reset(t={}){this._forEachChild((e,r)=>{e.reset(t?t[r]:void 0)})}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_forEachChild(t){Object.keys(this.controls$()).forEach(e=>{let r=this.controls$()[e];r&&t(r,e)})}_reduceChildren(t,e){let r=t;return this._forEachChild((i,s)=>{r=e(r,i,s)}),r}find(t){return this.controls$()[t]}looseValue$$=m(()=>{let t=this.#e();if(!t||Pe(this.parent))return{};let e=this.controls$(),r={};for(let i in t)i in e||(r[i]=t[i]);return r});#e=_({});setInitValue(t){this.#e.set(t)}updateValue(t){if(!P(t,this.value$$())){for(let e in this.controls$())this.controls$()[e].updateValue(t?.[e]);if(!P(t,this.#e())){this.setInitValue(t);return}}}},Re=new L("PI_VIEW_CONFIG"),Bt=new L("PI_FORM_BUILDER_OPTIONS"),Mt=new L("PI_FORM_BUILDER_ALIAS_MAP");function Ke(n){return n.isGroup}function zt(n){return n.isArray}function Ml(n,t,e,r,i,s){let u;t.isLogicAnd||t.isLogicOr?u=Se:Ke(t)?u=Ve:zt(t)||t.isTuple?u=de:u=Te;let l;return i?(l=new u(t.sourceSchema,s),Pe(l)&&l.type.set(t.isLogicAnd?"and":"or"),l.initConfig(r)):(l=n.get([e]),l||(l=new u(t.sourceSchema,s),Pe(l)&&l.type.set(t.isLogicAnd?"and":"or"),n.setControl?.(e,l),l.initConfig(r))),l}function Je(n){return rt(n)?n():n}var re={props:"merge",formConfig:"merge",renderConfig:"merge",inputs:"merge",outputs:"merge",wrappers:"replace",attributes:"merge"},Ze=class extends Map{parent;constructor(t){super(),this.parent=t}get(t){let e=super.get(t);return e===void 0?this.parent?.get(t):e}};function*Uu(n){for(let t of n)!t.keyPath?.length&&t.fieldGroup?.().length?yield*Uu(t.fieldGroup()):t.keyPath?.length&&(yield t)}function Rt(n,t,e,r,i){let s=Array.isArray(n)?n:typeof n=="number"?[n]:n.split("."),u=s[0],l;if(u==="#")t=r,l=[{field:r,level:1}];else if(u==="..")l=[{field:t.parent,level:1}];else if(typeof u=="string"&&u.startsWith("@")){let o=e.get(u.slice(1));!o&&i&&(o=i(u.slice(1),t)),l=[{field:o,level:1}]}else t.fieldGroup?l=Uu(t.fieldGroup()).filter(o=>o.keyPath&&Nt(s,o.keyPath)).map(o=>({field:o,level:o.keyPath?.length})):t.fieldArray&&(l=t.fieldArray().filter(o=>o.keyPath&&Nt(s,o.keyPath)).map(o=>({field:o,level:o.keyPath?.length})));if(l)for(let o of l){if(s.length===o.level)return o.field;let a=o.field.get(s.slice(o.level),i);if(a)return a}}var qe=class{#e=j(Mt,{optional:!0})??new Ze;#t=j(Bt);#i=j(S);#r=j(G);#n=j(Re,{optional:!0})??void 0;#s=[];buildRoot(t){let e=this.#l({type:"root",field:{fullPath:[]},form:void 0,resolvedField$:t.resolvedField$,append:()=>{}},t.field,0);this.allFieldInitHookCall()}allFieldInitHookCall(){let t=this.#s;this.#s=[],t.forEach(e=>e())}#u(t){t.type==="group"?this.#o(t):this.#c(t)}afterResolveConfig(t,e){}#l(t,e,r){let i,s=e.type,u;if(s){let M=this.#a(s);i=M.defaultConfig,u=M.define}let l=this.#n?.defaultConfigMergeStrategy,o=this.configMerge([this.#n?.defaultConfig?.inputs,i?.inputs,e.inputs],!1,typeof l=="string"?l:l?.inputs??re.inputs),a=this.configMerge([this.#n?.defaultConfig?.outputs,i?.outputs,e.outputs],!1,typeof l=="string"?l:l?.outputs??re.outputs),c=this.configMerge([this.#n?.defaultConfig?.attributes,i?.attributes,e.attributes],!1,typeof l=="string"?l:l?.attributes??re.attributes),p=this.configMerge([this.#n?.defaultConfig?.wrappers,i?.wrappers,e.wrappers],!0,typeof l=="string"?l:l?.wrappers??re.wrappers),y=this.configMerge([this.#n?.defaultConfig?.props,e.props],!1,typeof l=="string"?l:l?.props??re.props),b=this.configMerge([this.#n?.defaultConfig?.formConfig,i?.formConfig,e.formConfig],!1,typeof l=="string"?l:l?.formConfig??re.formConfig),k=this.configMerge([this.#n?.defaultConfig?.renderConfig,i?.renderConfig,e.renderConfig],!1,typeof l=="string"?l:l?.renderConfig??re.renderConfig),C,g=e.key;Pe(t.form)?g??=t.form.controls$().length:Wu(t.form)&&(g??=r);let A=t.type==="root";!e.nonFieldControl&&(g!==void 0||A)&&(C=Ml(t.form,e,g,b,A,this.#i));let U=this.#t.form$$,$={id:e.id,keyPath:Gt(g),get fullPath(){return[...$.parent.fullPath,...$.keyPath??[]]},form:{parent:t.form,control:C??(Ke(e)?t.form:void 0),get root(){return U()}},get:(M,Ye)=>O(()=>Rt(M,$,this.#e,this.#t.resolvedField$(),Ye)),parent:t.field,origin:e,renderConfig:k,formConfig:b,props:y,context:this.#t.context(),priority:e.priority,hooks:e.hooks,alias:e.alias,inputs:o,outputs:a,attributes:c,define:u?v(h({},u),{inputs:o,outputs:a,attributes:c}):void 0,wrappers:p,wrappers$$:m(()=>this.#f(p()))};return $=this.afterResolveConfig(e,$)??$,e.movePath?this.moveViewField(e.movePath,$):t.append($),e.alias&&this.#e.set(e.alias,$),$.hooks?.fieldResolved?.($),A&&t.resolvedField$.set($),Ke(e)||e.isLogicAnd||e.isLogicOr||e.isTuple?($.fieldGroup=_(new Ie((M,Ye)=>M.priority-Ye.priority)),this.#u({type:"group",fields:e.children,field:$,form:C||t.form,append:M=>{$.fieldGroup().push(M)}})):zt(e)&&this.#u({type:"array",templateField:e.arrayChild,field:$,form:C,append:M=>{}}),$.hooks?.allFieldsResolved&&this.#s.push(()=>{$.hooks.allFieldsResolved($)}),$}#o(t){for(let r=0;r<t.fields.length;r++){let i=t.fields[r];this.#l(t,i,r)}let e=t.field;e.hooks?.afterChildrenInit?.(e)}createArrayItem(t,e,r){let i=this.constructor,s=S.create({providers:[i,{provide:Mt,useValue:new Ze(this.#e)},{provide:G,useFactory:()=>s}],parent:this.#r});this.#r.get(ve).onDestroy(()=>{l.injector?.destroy()});let u=s.get(i),l=u.#l(t,e,r);return this.#s.push(()=>u.allFieldInitHookCall()),l.injector=s.get(G),l}#c(t){let{templateField:e,form:r}=t;t.field.action={set:(i,s)=>{O(()=>{s=typeof s=="number"?s:t.field.fieldArray?.().length??0;let u=this.createArrayItem(t,e,s),l=[...t.field.fieldArray()];l[s]=u,t.field.fieldArray.set(l),this.allFieldInitHookCall(),u.form.control.updateValue(i)})},remove:i=>{O(()=>{let s=[...t.field.fieldArray()],[u]=s.splice(i,1);t.field.fieldArray.set(s),r.removeAt(i),u&&(u.injector.destroy(),u.injector=void 0)})}},t.field.fieldArray=_([]),t.field.hooks?.afterChildrenInit?.(t.field),r.beforeUpdateList.push(i=>{let s=r.controls$().length;if(s<i.length){let u=t.field.fieldArray().slice();for(let l=s;l<i.length;l++){let o=this.createArrayItem(t,t.templateField,l);u[l]=o}t.field.fieldArray.set(u)}else if(i.length<s){let u=t.field.fieldArray().slice();for(let l=t.field.fieldArray().length-1;l>=i.length;l--){let[o]=u.splice(l,1);r.removeAt(l),o&&(o.injector?.destroy(),o.injector=void 0)}t.field.fieldArray.set(u)}this.allFieldInitHookCall()})}#a(t){let e,r;if(typeof t=="string"){let i=this.#n?.types?.[t];if(!i)throw new Error(`define:\u672A\u6CE8\u518C[${t}]`);if(r=i,Object.keys(i).length)return e=h({},i),{define:h({},i),defaultConfig:r}}else return{define:{type:t}};return{define:e,defaultConfig:r}}configMerge(t,e,r){let i;return e?r==="merge"?i=t.filter(Boolean).flat().map(s=>Je(s)):i=t.reduce((s,u)=>Je(u)??s,[]):r==="merge"?i=t.reduce((s,u)=>h(h({},s),Je(u)),{}):i=t.reduce((s,u)=>Je(u)??s,{}),_(Lt(i))}moveViewField(t,e){let r=Rt(t,e,this.#e,this.#t.resolvedField$(),(u,l)=>{let o=this.#t.form$$,a={alias:u,parent:l,get fullPath(){return l.fullPath},form:{parent:l.form.control??l.form.parent,control:void 0,get root(){return o()}},get:(c,p)=>Rt(c,a,this.#e,this.#t.resolvedField$(),p),fieldGroup:_(new Ie((c,p)=>c.priority-p.priority)),priority:0,renderConfig:_({}),wrappers$$:_([])};if(this.#e.set(u,a),e===l)throw new Error("\u6DFB\u52A0\u4F4D\u7F6E\u4E0D\u53EF\u4E3A\u81EA\u8EAB");return l.fieldGroup().push(a),a});if(!r)throw new Error("\u79FB\u52A8\u89C6\u56FE\u9879\u5931\u8D25");let i=e.parent.fieldGroup?.().findIndex(u=>u===e);typeof i=="number"&&i!==-1&&e.parent.fieldGroup?.().splice(i,1);let s=e.fullPath.slice(r.fullPath.length);e.keyPath=s,e.parent=r,r.fieldGroup().push(e)}#f(t){return(t??[]).map(e=>{if(typeof e=="string"){let r=this.#n?.wrappers?.[e];if(!r)throw new Error(`wrapper:\u672A\u6CE8\u518C[${e}]`);return v(h({},r),{inputs:_(r.inputs),attributes:_(r.attributes)})}else if(typeof e.type=="string"){let r=this.#n?.wrappers?.[e.type];if(!r)throw new Error(`wrapper:\u672A\u6CE8\u518C[${e.type}]`);return{inputs:_(h(h({},r.inputs),e.inputs)),outputs:h(h({},r.outputs),e.outputs),attributes:_(h(h({},r.attributes),e.attributes)),type:r.type}}else return v(h({},e),{inputs:_(e.inputs),attributes:_(e.attributes)})})}};function Xu(n){return{kind:"metadata",type:"layout",reference:Xu,value:n}}var E=St("viewRawConfig");function Ll(n){return E(t=>{t.type=n})}var Gl=n=>E(t=>{t.hooks=n}),Bl=n=>E(t=>{t.hooks=h(h({},t.hooks),n)}),zl={position:"bottom"};function F(n,t,e){e.hooks??={};for(let r in n){let i=e.hooks[r];e.hooks[r]=(...s)=>{t.position==="top"&&n[r](...s),i?.(...s),t.position==="bottom"&&n[r](...s)}}}var Wl=(n,t=zl)=>E(e=>F(n,t,e));function Ul(n){return E(t=>{let e=t.hooks;e&&(n.forEach(r=>{delete e[r]}),t.hooks=e)})}function Xl(n){return!!n&&typeof n.then=="function"}function Hl(n){return!!n&&typeof n.subscribe=="function"}function Jl(n){return E(t=>{t.inputs=n})}function Kl(n){return E(t=>{let e=N(t.inputs);t.inputs=m(()=>h(h({},e),N(n)))})}function Zl(n){return E(t=>{let e=N(t.inputs);e&&(n.forEach(r=>{delete e[r]}),t.inputs=e)})}function Ql(n,t){return E(e=>{let r=Object.keys(n),i=t?.hookName??"fieldResolved";return e.inputs=h(h({},e.inputs),r.reduce((s,u)=>(s[u]=void 0,s),{})),F({[i]:s=>{r.forEach(u=>{let l=n[u](s);Xl(l)?l.then(o=>{s.inputs.update(a=>(a=h({},a),a[u]=o,a))}):Hl(l)?l.subscribe({next:o=>{s.inputs.update(a=>(a=h({},a),a[u]=o,a))}}):s.inputs.update(o=>(o=h({},o),o[u]=l,o))})}},{position:t?.addPosition??"bottom"},e)})}function Yl(n,t){return E(e=>{let r=Object.keys(n),i=t?.hookName??"fieldResolved";return F({[i]:s=>{let u=s.inputs;s.inputs=yt(m(()=>h(h({},u()),r.reduce((l,o)=>v(h({},l),{[o]:n[o]()}),{}))))}},{position:t?.addPosition??"bottom"},e)})}function ea(n){return E(t=>{t.outputs=n})}function ta(n){return E(t=>{let e=t.outputs;t.outputs=h(h({},e),n)})}function na(n){return E(t=>{let e=t.outputs;e&&(n.forEach(r=>{delete e[r]}),t.outputs=e)})}function Wt(n,t,e){n.outputs.update(r=>{r=h({},r);for(let i in t){let s=r[i];r[i]=(...u)=>{e.position==="top"&&t[i](...u,n),s?.(...u,n),e.position==="bottom"&&t[i](...u,n)}}return r})}var ra={position:"bottom"},ia=(n,t=ra)=>E(e=>{F({allFieldsResolved:r=>{Wt(r,n,t)}},{position:"bottom"},e)});function Hu(n,t){F({allFieldsResolved:e=>t(r=>{let i=[];for(let s of r){let u=s.list?e.get(s.list):e,l=new en;Wt(e,{[s.output]:(...o)=>{l.next(o)}},{position:"bottom"}),i.push({subject:l,field:u})}return tt(i.map(({subject:s})=>s.pipe(nn(void 0)))).pipe(nt(1),et(s=>({list:s,field:e,listenFields:i.map(u=>u.field)})))})},{position:"bottom"},n)}function sa(n){return E(t=>Hu(t,n))}function ua(n){return E(t=>{t.wrappers=n})}var oa={position:"tail"};function la(n,t=oa){return E(e=>{let r=Gt(n);e.wrappers??=[],t.position==="tail"?e.wrappers.push(...r):e.wrappers.unshift(...r)})}function aa(n){return E(t=>{if(!t.wrappers)return;let e=t.wrappers;for(let r=0;r<n.length;r++){let i=n[r];for(let s=0;s<e.length;s++){let u=e[s];if((typeof u=="string"?u:u.type)===i){e.splice(s,1);break}}}t.wrappers=e})}function ca(n){return E(t=>{t.alias=n})}function fa(n){return E(t=>{t.renderConfig=n})}function pa(n){return E(t=>{t.formConfig=h(h({},t.formConfig),n)})}function ha(n){return E(t=>{t.attributes=n})}function ya(n){return E(t=>{let e=N(t.attributes);t.attributes=m(()=>h(h({},e),N(n)))})}function da(n){return E(t=>{let e=N(t.attributes);e&&(n.forEach(r=>{delete e[r]}),t.attributes=e)})}var ma=[void 0];function Qe(n,t={}){let e=(t.list??ma).map(r=>r?n.get(r).form.control:n.form.control);return tt(e.map(r=>t.skipInitValue?r.valueChanges.pipe(nt(1)):r.valueChanges)).pipe(et(r=>({list:r,field:n,listenFields:r})))}function va(n){return E(t=>{F({allFieldsResolved:e=>{n(r=>Qe(e,r),e)}},{position:"bottom"},t)})}function ga(n){return E(t=>(F({allFieldsResolved:e=>{n.listen(r=>Qe(e,r)).subscribe(r=>{e.renderConfig.update(i=>!!i.hidden!==r?v(h({},i),{hidden:r}):i),n.disabled!==void 0&&e.formConfig&&e.formConfig.update(i=>(i=h({},i),i.disabled=r?n.disabled:!1,i))})}},{position:"bottom"},t),t))}function ba(n){return E(t=>(F({allFieldsResolved:e=>{n.listen(r=>Qe(e,r)).subscribe(r=>{e.formConfig().disabled!==r&&e.formConfig.update(i=>v(h({},i),{disabled:r}))})}},{position:"bottom"},t),t))}function ka(n,t){return E(e=>{F({fieldResolved:r=>{let i=r.wrappers();i?.length?typeof i[0]=="string"?i[0]={type:i[0],attributes:{class:K(n)}}:i[0]=v(h({},i[0]),{attributes:v(h({},i[0].attributes),{class:t?K(i[0].attributes?.class,n):K(n)})}):r.attributes.update(s=>v(h({},s),{class:t?K(s?.class,n):K(n)}))}},{position:"bottom"},e)})}function Ca(n,t){return E(e=>{e.attributes=v(h({},e.attributes),{class:t?K(e.attributes?.class,n):K(n)})})}function Ju(n=!0){return{kind:"metadata",type:"nonFieldControl",reference:Ju,value:n}}var me=class extends Mu{inputs;outputs;wrappers;attributes;alias;movePath;renderConfig;formConfig={};id;isLogicAnd=!1;isLogicOr=!1;isArray=!1;isTuple=!1;nonFieldControl=!1;hooks;lazySchema(t){super.lazySchema(t),this.type=this.lazyWrapped.type}arraySchema(t){if(!this.isObjectControl){this.isArray=!0;let e=new this.globalConfig.handle(this.globalConfig,this,t);e.fullPath=[],J(t.item,e),this.arrayChild=e}}defaultSchema(t){this.defaultValue=t.literal}tupleDefault(t){super.tupleDefault(t),this.isTuple=!0}enumSchema(t){this.props??={},this.props.options??=t.options}intersectBefore(t){this.childrenAsVirtualGroup?this.type==="intersect"&&(this.type="intersect-group"):this.isLogicAnd=!0}logicItemSchema(t,e,r){let i=new this.globalConfig.handle(this.globalConfig,this,t);this.childrenAsVirtualGroup?i.fullPath=[...this.fullPath]:(i.key=e,i.fullPath=[...this.fullPath,e]),i.setParent(this),J(t,i)}unionBefore(t){this.childrenAsVirtualGroup||(this.isLogicOr=!0)}beforeSchemaType(t){super.beforeSchemaType(t),this.formConfig.required=!this.undefinedable&&!this.nullable}voidSchema(t){this.nonFieldControl=!0}metadataDefaulthandle(t,e){switch(t.type){case"viewRawConfig":{t.value(this,this.globalConfig.context);break}case"layout":{this.movePath=t.value.keyPath,this.priority=t.value.priority;break}case"nonFieldControl":{this.nonFieldControl=t.value;break}default:break}}end(t){super.end(t),this.formConfig.defaultValue=this.defaultValue}};function Ut(n,t){let e={form$$:m(()=>e.resolvedField$()?.form.control),resolvedField$:_(void 0),context:m(()=>t.context)},r=S.create({providers:[{provide:Bt,useValue:e},{provide:Re,useValue:t.fieldGlobalConfig},t.builder,{provide:G,useFactory:()=>r}],parent:t.injector});return t.registerOnDestroy?.(()=>{r.get(G).destroy()}),Nu(n,i=>(r.get(t.builder).buildRoot({field:i,resolvedField$:e.resolvedField$}),e.resolvedField$()),v(h({},t),{handle:t?.handle??me}))}var $a=je(Ue());var eo=n=>({$implicit:n}),_a=(n,t)=>t.id||n;function wa(n,t){n&1&&le(0)}function xa(n,t){if(n&1&&se(0,wa,1,0,"ng-container",0),n&2){let e=t.$implicit,r=D();X("ngTemplateOutlet",r.fieldTemplateRef())("ngTemplateOutletContext",pt(2,eo,e))}}function Oa(n,t){if(n&1&&(le(0,1),B(1,"pure"),B(2,"pure")),n&2){let e;D(3);let r=Q(2),i=Q(5),s=D().$implicit,u=D(),l=Fe(1);X("ngComponentOutlet",r)("ngComponentOutletInputs",(e=ht(1,7,u.groupInputsValue,s.inputs,s.fieldGroup(),l))==null?null:e())("ngComponentOutletOutputs",s.outputs())("ngComponentOutletWrappers",i)("ngComponentOutletField",s)("ngComponentOutletDirectives",s.directives)("ngComponentOutletTopDirectives",Y(2,12,u.topDirectives,s.renderConfig))}}function Aa(n,t){if(n&1&&(ue(0,Oa,3,15,"ng-container",1),B(1,"pure")),n&2){let e=D(3).$implicit,r=D();oe(Y(1,1,r.groupHidden,e)()?-1:0)}}function ja(n,t){if(n&1&&(le(0,1),B(1,"pure"),B(2,"pure")),n&2){let e;D(2);let r=Q(2),i=Q(5),s=D().$implicit,u=D(),l=Fe(1);X("ngComponentOutlet",r)("ngComponentOutletInputs",(e=ht(1,7,u.groupInputsValue,s.inputs,s.fieldArray(),l))==null?null:e())("ngComponentOutletOutputs",s.outputs())("ngComponentOutletWrappers",i)("ngComponentOutletField",s)("ngComponentOutletDirectives",s.directives)("ngComponentOutletTopDirectives",Y(2,12,u.topDirectives,s.renderConfig))}}function Da(n,t){if(n&1&&(le(0,2),B(1,"pure")),n&2){D(2);let e=Q(2),r=Q(5),i=D().$implicit,s=D();X("ngComponentOutlet",e)("ngComponentOutletInputs",i.inputs())("ngComponentOutletOutputs",i.outputs())("ngComponentOutletFormControl",i.form.control)("ngComponentOutletWrappers",r)("ngComponentOutletField",i)("ngComponentOutletDirectives",i.directives)("ngComponentOutletTopDirectives",Y(1,9,s.topDirectives,i.renderConfig))("ngComponentOutletContent",i.contents)}}function Ia(n,t){if(n&1&&ue(0,Aa,2,4)(1,ja,3,15,"ng-container",1)(2,Da,2,12,"ng-container",2),n&2){let e=D(2).$implicit;oe(e.fieldGroup?0:e.fieldArray?1:2)}}function Ta(n,t){if(n&1&&(Me(0),B(1,"pure"),Me(2)(3),B(4,"pure"),Me(5),ue(6,Ia,3,1)),n&2){let e=D().$implicit,r=D(),i=Y(1,1,r.resolvedComponent,e.define);ge(2);let s=ft(i.value()),u=Y(4,5,r.resolvedWrapper,e.wrappers$$());ge(3),ft(u.value()),ge(),oe(s?6:-1)}}function Sa(n,t){if(n&1&&ue(0,Ta,7,9),n&2){let r=t.$implicit.renderConfig();oe(r!=null&&r.hidden?-1:0)}}function Pa(n,t){n&1&&le(0)}function Va(n,t){if(n&1&&se(0,Pa,1,0,"ng-container",3),n&2){D();let e=Fe(1);X("ngTemplateOutlet",e)("ngTemplateOutletContext",pt(2,eo,t))}}var qa=(()=>{class n{fields=I.required();fieldTemplateRef=I.required();static \u0275fac=function(r){return new(r||n)};static \u0275dir=ke({type:n,inputs:{fields:[1,"fields"],fieldTemplateRef:[1,"fieldTemplateRef"]}})}return n})(),Nc=(()=>{class n extends qa{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ne(n)))(i||n)}})();static \u0275cmp=be({type:n,selectors:[["piying-view-group"]],features:[ot],decls:2,vars:0,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,i){r&1&&cn(0,xa,1,4,"ng-container",null,_a),r&2&&fn(i.fields())},dependencies:[mt],encapsulation:2,changeDetection:0})}return n})(),to=new L("PI_VIEW_FIELD_TOKEN"),Ra=new L("PI_COMPONENT_LIST"),Ht=new L("PI_COMPONENT_INDEX"),Na=new L("PI_COMPONENT_LIST_LISTEN"),Fa=[],Ma={directives:"merge",formConfig:"merge",inputs:"merge",outputs:"merge",props:"merge",renderConfig:"merge",wrappers:"replace",attributes:"merge"};function Ku(n){return v(h({},n),{inputs:Object.keys(n.inputs()??{}).join(","),attributes:Object.keys(n.attributes()??{}).join(","),directives:n.directives?n.directives.map(t=>v(h({},t),{inputs:`${t.inputs?Object.keys(t.inputs()).join(","):""}`})):void 0,contents:n.contents?.map(t=>v(h({},t),{text:!!t.text}))})}var Zu=new RegExp(`(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*\\\\$]+)(?:=(["']?)([^\\]"']*)\\5)?\\])|(\\))|(\\s*,\\s*)`,"g"),Z=function(n){return n[n.ALL=0]="ALL",n[n.NOT=1]="NOT",n[n.TAG=2]="TAG",n[n.PREFIX=3]="PREFIX",n[n.ATTRIBUTE=4]="ATTRIBUTE",n[n.ATTRIBUTE_STRING=5]="ATTRIBUTE_STRING",n[n.ATTRIBUTE_VALUE=6]="ATTRIBUTE_VALUE",n[n.NOT_END=7]="NOT_END",n[n.SEPARATOR=8]="SEPARATOR",n}(Z||{}),Jt=class n{element=null;classNames=[];attrs=[];notSelectors=[];static parse(t){let e=[],r=(o,a)=>{a.notSelectors.length>0&&!a.element&&a.classNames.length==0&&a.attrs.length==0&&(a.element="*"),o.push(a)},i=new n,s,u=i,l=!1;for(Zu.lastIndex=0;s=Zu.exec(t);){if(s[Z.NOT]){if(l)throw new Error("Nesting :not in a selector is not allowed");l=!0,u=new n,i.notSelectors.push(u)}let o=s[Z.TAG];if(o){let c=s[Z.PREFIX];c==="#"?u.addAttribute("id",o.slice(1)):c==="."?u.addClassName(o.slice(1)):u.setElement(o)}let a=s[Z.ATTRIBUTE];if(a&&u.addAttribute(u.unescapeAttribute(a),s[Z.ATTRIBUTE_VALUE]),s[Z.NOT_END]&&(l=!1,u=i),s[Z.SEPARATOR]){if(l)throw new Error("Multiple selectors in :not are not supported");r(e,i),i=u=new n}}return r(e,i),e}unescapeAttribute(t){let e="",r=!1;for(let i=0;i<t.length;i++){let s=t.charAt(i);if(s==="\\"){r=!0;continue}if(s==="$"&&!r)throw new Error(`Error in attribute selector "${t}". Unescaped "$" is not supported. Please escape with "\\$".`);r=!1,e+=s}return e}escapeAttribute(t){return t.replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}setElement(t=null){this.element=t}addAttribute(t,e=""){this.attrs.push(t,e&&e.toLowerCase()||"")}addClassName(t){this.classNames.push(t.toLowerCase())}toString(){let t=this.element||"";if(this.classNames&&this.classNames.forEach(e=>t+=`.${e}`),this.attrs)for(let e=0;e<this.attrs.length;e+=2){let r=this.escapeAttribute(this.attrs[e]),i=this.attrs[e+1];t+=`[${r}${i?"="+i:""}]`}return this.notSelectors.forEach(e=>t+=`:not(${e})`),t}},W=function(n){return n[n.NOT=1]="NOT",n[n.ATTRIBUTE=2]="ATTRIBUTE",n[n.ELEMENT=4]="ELEMENT",n[n.CLASS=8]="CLASS",n}(W||{});function La(n){let t=n.classNames&&n.classNames.length?[W.CLASS,...n.classNames]:[];return[n.element&&n.element!=="*"?n.element:"",...n.attrs,...t]}function Ga(n){let t=n.classNames&&n.classNames.length?[W.CLASS,...n.classNames]:[];return n.element?[W.NOT|W.ELEMENT,n.element,...n.attrs,...t]:n.attrs.length?[W.NOT|W.ATTRIBUTE,...n.attrs,...t]:n.classNames&&n.classNames.length?[W.NOT|W.CLASS,...n.classNames]:[]}function Ba(n){let t=La(n),e=n.notSelectors&&n.notSelectors.length?n.notSelectors.map(r=>Ga(r)):[];return t.concat(...e)}function za(n){return n?Jt.parse(n).map(Ba):[]}function Wa(n,t){let e=0,r=[],i=[],s=[],u=[],l=[],o;if(typeof n.type=="string")o=n.type;else{let p=dt(n.type);o=n.selector??p.selector,i.push(n.type)}if(!o)throw new Error("\u672A\u627E\u5230\u5143\u7D20\u5BF9\u5E94\u7684\u9009\u62E9\u5668");let a=n.attributes?.();if(a)for(let p in a)r.push(p,a[p]);let c=[n,...t];for(let p=0;p<c.length;p++){let y=c[p];if(p>0){i.push(y.type);let k=y.type.\u0275dir.selectors,C=y.selector??k.find(g=>g.length===3&&g[0]===""&&g[2]==="")[1];(y.inputs&&!(C in y.inputs())||!y.inputs)&&(y.model&&!(C in y.model)||!y.model)&&r.push(C,"")}if(y.inputs){s[p]={signal:y.inputs,keyList:[]};for(let b in y.inputs())e++,s[p].keyList.push(b)}for(let b in y.outputs)u.push({eventName:b,listenerFn:y.outputs[b]});for(let b in y.model)e++,l.push({key:b,eventName:`${b}Change`,signal:y.model[b]})}return r.push(3),r.push(...new Set([...u.map(({eventName:p})=>p),...l.map(({eventName:p})=>p)])),r.push(...new Set([...s.flatMap(p=>p.keyList),...l.map(({key:p})=>p)])),{vars:e,consts:[["el",""],r],directiveList:i,propertyList:s,listenerList:u,modelList:l,elementTag:o}}var Xt=["el"],Ua=0;function Xa(n,t){let e=Wa(n,t),r,i;n.contents?.length&&(r=new Array(n.contents.length).fill("*"));function s(u,l){u&1&&(pn(0,e.elementTag,1,0),e.listenerList.reduce((o,a)=>o(a.eventName,a.listenerFn),lt),e.modelList.reduce((o,a)=>o(a.eventName,c=>{gn(a.signal,c)}),lt),n.contents?.length&&n.contents.forEach((o,a)=>{o.select?at(a+2,a,["ngProjectAs",o.select,5,za(o.select)[0]],o.text?(c,p)=>{c&1&&dn(0),c&2&&mn(o.text())}:void 0,o.text?1:void 0,o.text?1:void 0):at(a+1,a)}),hn()),u&2&&(e.propertyList.reduce((o,{signal:a,keyList:c})=>{let p=a();return c.reduce((y,b)=>y(b,p[b]),o)},X),e.modelList.reduce((o,a)=>o(a.key,a.signal),vn))}return class Kt{templateRef=Ce.required(ut);componentInstance=Ce("el");elementRef=Ce("el",{read:st});directiveRefList=t.map(({type:l})=>Ce("el",{read:l}));static \u0275fac=l=>new(l||Kt);static \u0275cmp=be({type:Kt,selectors:[[`d-${Ua++}`]],ngContentSelectors:r,decls:1,vars:0,consts:e.consts,template:(l,o)=>{l&1&&(r&&yn(r),se(0,s,2+(n.contents?.length??0),e.vars,"ng-template"))},viewQuery:(l,o)=>{l&1&&(ae(o.templateRef,ut,5),ae(o.componentInstance,Xt,5),ae(o.elementRef,Xt,5,st),t.forEach(({type:a},c)=>{ae(o.directiveRefList[c],Xt,5,a)})),l&2&&ct(3+t.length)},dependencies:e.directiveList,encapsulation:2,changeDetection:0})}}var Ha={},Ja=(()=>{class n{#e=j(Ht,{optional:!0});#t;#i;#r;destroyComponentFn;fieldComponentInstance;fieldElementRef;fieldDirectiveRefList;#n;#s(e){this.#n=m(()=>O(()=>Ku(e)))}setFieldData(e,r){this.#e=r}#u;#l;#o=_(0);createComponent(e,r){this.destroyComponentFn?.(),this.#r=r,this.#t=new an;let i=e[this.#e];this.#i=i,this.#u={inputs:m(()=>(this.#o(),this.#i.inputs()??Ha)),directiveList:this.#i?.directives?.map((o,a)=>o.inputs?m(()=>(this.#o(),this.#i.directives[a].inputs())):void 0)},this.#l=i.contents?.map((o,a)=>o.text?v(h({},o),{text:m(()=>(this.#o(),this.#i.contents[a].text()))}):o),this.#s(i);let s=Xa(v(h({},i),{inputs:this.#u.inputs,contents:this.#l}),i.directives?.map((o,a)=>v(h({},o),{inputs:this.#u.directiveList[a]}))??[]),u=S.create({providers:[{provide:Ra,useValue:e},{provide:Ht,useValue:this.#e+1},{provide:Na,useValue:this.#t}],parent:i.injector??r.injector}),l=$n(s,{elementInjector:u,environmentInjector:u.get(G),projectableNodes:i.contents?.map(({nodes:o})=>o).filter(Boolean)});if(r.createEmbeddedView(l.instance.templateRef()),this.fieldComponentInstance=l.instance.componentInstance(),this.fieldElementRef=l.instance.elementRef(),this.fieldDirectiveRefList=l.instance.directiveRefList.map(o=>o()),this.destroyComponentFn=()=>{r.clear(),l.destroy(),this.#t.unsubscribe()},e.length===this.#e+1){let o=u.get(to)();o.hooks?.afterCreateComponent?.(o)}}update(e){let r=e[this.#e],i=Ku(r);P(i,this.#n())?(this.#i=r,this.#o.update(u=>u+1),this.#t.next(e)):this.createComponent(e,this.#r)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ke({type:n})}return n})();function Ka(n,t){if(typeof n=="string")n=n.trim().split(/\s+/);else if(!n)return t??[];return typeof t=="string"&&(t=t.trim().split(/\s+/)),new Set([...n,...t??[]])}var Zt=class extends vt{field;constructor(t){super(),this.field=t}control=this;get value(){return this.field().value}get valid(){return this.field().valid}get invalid(){return!this.field().valid}get pending(){return!1}get disabled(){return this.field().disabled}get enabled(){return!this.field().disabled}get errors(){return this.field().errors??null}get pristine(){return!0}get dirty(){return!1}get touched(){return this.field().touched}get untouched(){return!this.field().touched}get submitted(){return!1}viewToModelUpdate(t){}get valueChanges(){return this.field().valueChanges}get statusChanges(){return this.field().statusChanges}hasValidator(t){return wn.required===t?this.field().required$$():!1}},Za={provide:vt,useFactory:()=>j(no).ngControl},no=(()=>{class n{fieldControl=I.required();cvaArray=j(_n);injector=j(S);get cva(){return this.cvaArray[0]}#e;get ngControl(){return this.#e??=new Zt(()=>this.fieldControl())}ngOnInit(){let e=this.cva,r,i=!1;e.registerOnChange(u=>{this.fieldControl().disabled$$()||(r=u,i=!0,this.fieldControl().updateOn$$()==="change"&&this.fieldControl().setViewValue(u))}),e.registerOnTouched(()=>{this.fieldControl().markAsTouched(),i&&this.fieldControl().updateOn$$()==="blur"&&(this.fieldControl().setViewValue(r),i=!1)});let s=ce(()=>{let u=this.fieldControl().modelValueToViewValue$$();O(()=>{e.writeValue(u)})},{injector:this.injector});if(this.cva.writeValue(this.fieldControl().modelValueToViewValue$$()),this.disposeList.push(()=>s.destroy()),e.setDisabledState){let u=ce(()=>{let l=this.fieldControl().disabled$$();O(()=>{e.setDisabledState(l)})},{injector:this.injector});e.setDisabledState(this.fieldControl().disabled$$()),this.disposeList.push(()=>u.destroy())}}disposeList=[];clear(){this.disposeList.forEach(e=>e()),this.disposeList=[]}ngOnDestroy(){this.clear()}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ke({type:n,selectors:[["","fieldControl",""]],inputs:{fieldControl:[1,"fieldControl"]},standalone:!1,features:[bn([Za])]})}return n})(),Qa=(()=>{class n extends Ja{ngComponentOutlet=I();ngComponentOutletInputs=I();ngComponentOutletOutputs=I();ngComponentOutletInjector=I();ngComponentOutletContent=I();ngComponentOutletFormControl=I();ngComponentOutletWrappers=I();ngComponentOutletTopDirectives=I();ngComponentOutletDirectives=I();ngComponentOutletField=I.required();#e=j(sn);#t=m(()=>this.ngComponentOutletWrappers()?.map(e=>v(h({},e),{type:e.type.component,module:e.type.module})));#i=m(()=>this.ngComponentOutletOutputs(),{equal:P});#r;#n=m(()=>{this.#r?.();let e=this.ngComponentOutletInjector()||this.#u,r=this.ngComponentOutlet()?.type.module;if(!r)return;let i=un(r,e);return this.#r=()=>{i.destroy(),this.#r=void 0},i});#s=m(()=>{let e=this.#n()?.injector??(this.ngComponentOutletInjector()||this.#u);return S.create({providers:[{provide:to,useValue:this.ngComponentOutletField},{provide:Ht,useValue:0}],parent:e}).get(S)});#u=j(S);#l=m(()=>{let e=this.ngComponentOutletFormControl();return e?{type:no,inputs:m(()=>({fieldControl:e}))}:void 0});#o=m(()=>{let e=this.ngComponentOutletDirectives(),r=this.#l();return r?[...e?.()??[],r]:e?.()});#c=m(()=>{let e=this.ngComponentOutlet();if(!e)return;let r=this.#o();return v(h({},e),{type:e.type.component,module:e.type.module,inputs:this.ngComponentOutletInputs,directives:r?r.map(i=>{let s=i.outputs;return s?v(h({},i),{outputs:s}):i}):void 0,outputs:this.#i(),contents:this.ngComponentOutletContent()})});#a=m(()=>{let e=this.#c();if(!e)return Fa;let r=this.#s(),i=[...this.#t()??[],e],s=this.ngComponentOutletTopDirectives();if(i[0]=v(h({},i[0]),{injector:r}),s){let u=i[0].directives?.findIndex(l=>l.type===s[0].type);if(typeof u=="number"&&u!==-1){let o=s.pop().inputs,a=i[0].directives?.[u]?.inputs;i[0].directives[u].inputs=m(()=>{let c=N(a)?.ngClass,p=N(o)?.ngClass;return{ngClass:Ka(c,p)}})}i[0]=v(h({},i[0]),{directives:i[0].directives?[...i[0].directives,...s]:[...s]})}return i});#f;ngOnChanges(){let e=this.#a();if(!e.length)return this.destroyComponentFn?.();if(this.#f)this.#f!==e&&this.update(e);else{let r=this.ngComponentOutletField();r.hooks?.beforeCreateComponent?.(r),this.setFieldData(this.ngComponentOutletField,0),this.createComponent(e,this.#e)}this.#f=e}ngOnDestroy(){this.#r?.(),this.destroyComponentFn?.()}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ne(n)))(i||n)}})();static \u0275dir=ke({type:n,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:[1,"ngComponentOutlet"],ngComponentOutletInputs:[1,"ngComponentOutletInputs"],ngComponentOutletOutputs:[1,"ngComponentOutletOutputs"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"],ngComponentOutletContent:[1,"ngComponentOutletContent"],ngComponentOutletFormControl:[1,"ngComponentOutletFormControl"],ngComponentOutletWrappers:[1,"ngComponentOutletWrappers"],ngComponentOutletTopDirectives:[1,"ngComponentOutletTopDirectives"],ngComponentOutletDirectives:[1,"ngComponentOutletDirectives"],ngComponentOutletField:[1,"ngComponentOutletField"]},exportAs:["ngComponentOutlet"],features:[ot,it]})}return n})();function Qu(n){return!!dt(n)}function Yu(n,t){let e=new Map,r=new Map;return i=>O(()=>{if(!i)return{value:m(()=>{})};let s=!1,u=(n?[i]:i).map(l=>{if(r.has(l))return r.get(l);if(e.has(l))return s=!0,e.get(l);let o=l,a=o.type;if(typeof a=="string"||Qu(a)){let c=v(h({},o),{type:{component:a}});return r.set(l,c),c}else if(typeof a=="function"){s=!0;let c=a().then(p=>{let y=v(h({},o),{type:Qu(p)?{component:p}:p});return r.set(l,y),e.delete(l),y});return e.set(l,c),c}else return o});return s?Le({loader:async()=>n?u[0]:Promise.all(u),injector:t}):{value:m(()=>n?u[0]:u)}})}function Ya(n,t,e,r){let i=!0;return ce(()=>{let s=t.value$$();i?(P(s,n)||r(s),i=!1):r(s)},{injector:e})}var ec=(()=>{class n extends qe{#e=j(Re,{optional:!0})??void 0;afterResolveConfig(e,r){let i=e,s=e.type,u,l,o=this.#e?.defaultConfigMergeStrategy;if(s){let c=this.#t(s);l=c.define,u=c.defaultConfig}let a=this.configMerge([u?.directives,i.directives],!0,typeof o=="string"?o:o?.directives??Ma.directives);return v(h({},r),{contents:i.contents?.sort((c,p)=>c.nodes&&p.nodes?0:c.nodes?-1:1),directives:a})}#t(e){let r,i;if(typeof e=="string"){let s=this.#e?.types?.[e];if(!s)throw new Error(`\u672A\u6CE8\u518C${e}`);i=s,Object.keys(s).length&&(r=h({},s))}else r={type:e};return{define:r,defaultConfig:i}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Ne(n)))(i||n)}})();static \u0275prov=rn({token:n,factory:n.\u0275fac})}return n})(),Qt=class extends me{contents;directives},tc=(()=>{class n{transform(e,...r){return e(...r)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=ln({name:"pure",type:n,pure:!0})}return n})(),nc={builder:ec,handle:Qt},Fc=(()=>{class n{schema=I.required();model=I(void 0);modelChange=Cn();options=I();form$$=m(()=>this.resolvedField$()?.form.control);#e;ngOnChanges(e){let r=this.#i();(this.#e!==r||"model"in e)&&this.#t(),this.#e=r}#t=m(()=>{let e=this.model();O(()=>this.#c(e))});#i=m(()=>(this.schema(),O(()=>this.#l())));#r=j(S);#n=j(G);#s;resolvedField$=_(void 0);#u=[];#l(){this.#o();let e=on([],this.#n);this.#s=e;let r=Ut(this.schema(),v(h(h({},nc),this.options()),{injector:e,registerOnDestroy:i=>{e.get(ve).onDestroy(()=>{i()})}}));if(this.resolvedField$.set(r),r.form.control){let i=Ya(this.model(),r.form.control,this.#r,s=>{O(()=>{r.form.control?.valueNoError$$()&&this.modelChange.emit(s)})});this.#u.push(()=>i.destroy())}return r}#o(e=!1){this.#u.forEach(r=>r()),this.#u=[],!e&&this.#s&&(this.#s.destroy(),this.#s=void 0)}#c(e){if(!this.resolvedField$())return;this.resolvedField$().form.control?.updateValue(e)}groupInputsValue=(e,r,i)=>m(()=>v(h({},e()),{fields:r,fieldTemplateRef:i}));resolvedComponent=Yu(!0,this.#r);resolvedWrapper=Yu(!1,this.#r);topDirectives=e=>[{type:En,inputs:m(()=>({ngClass:e().ngClass??""}))}];groupHidden=e=>m(()=>this.#a(e));#a(e){return e.fieldGroup?e.fieldGroup().length?e.fieldGroup().every(r=>this.#a(r)):!0:!e.define||!!e.renderConfig().hidden}ngOnDestroy(){this.#o(!0)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=be({type:n,selectors:[["piying-view"]],inputs:{schema:[1,"schema"],model:[1,"model"],options:[1,"options"]},outputs:{modelChange:"modelChange"},features:[it],decls:3,vars:1,consts:[["dynamicComponent",""],[3,"ngComponentOutlet","ngComponentOutletInputs","ngComponentOutletOutputs","ngComponentOutletWrappers","ngComponentOutletField","ngComponentOutletDirectives","ngComponentOutletTopDirectives"],[3,"ngComponentOutlet","ngComponentOutletInputs","ngComponentOutletOutputs","ngComponentOutletFormControl","ngComponentOutletWrappers","ngComponentOutletField","ngComponentOutletDirectives","ngComponentOutletTopDirectives","ngComponentOutletContent"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,i){if(r&1&&(se(0,Sa,1,1,"ng-template",null,0,kn),ue(2,Va,1,4,"ng-container")),r&2){let s;ge(2),oe((s=i.resolvedField$())?2:-1,s)}},dependencies:[Qa,tc,mt],encapsulation:2,changeDetection:0})}return n})();export{P as a,is as b,ws as c,Vs as d,ru as e,iu as f,je as g,jt as h,vu as i,El as j,Vu as k,Vt as l,Ll as m,Jl as n,Ql as o,va as p,ka as q,Ca as r,$a as s,Ea as t,qa as u,Nc as v,to as w,ec as x,Fc as y};
