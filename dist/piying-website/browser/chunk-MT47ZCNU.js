var h=":",R="|",S="@@",L="\u241F",$;function N(t){$??=new TextEncoder;let n=$.encode(t),e=new DataView(n.buffer,n.byteOffset,n.byteLength),i=U(e,n.length,0),o=U(e,n.length,102072);return i==0&&(o==0||o==1)&&(i=i^319790063,o=o^-1801410264),BigInt.asUintN(32,BigInt(i))<<BigInt(32)|BigInt.asUintN(32,BigInt(o))}function v(t,n=""){let e=N(t);return n&&(e=BigInt.asUintN(64,e<<BigInt(1))|e>>BigInt(63)&BigInt(1),e+=N(n)),BigInt.asUintN(63,e).toString()}function U(t,n,e){let i=2654435769,o=2654435769,r=0,c=n-12;for(;r<=c;r+=12){i+=t.getUint32(r,!0),o+=t.getUint32(r+4,!0),e+=t.getUint32(r+8,!0);let s=y(i,o,e);i=s[0],o=s[1],e=s[2]}let a=n-r;return e+=n,a>=4?(i+=t.getUint32(r,!0),r+=4,a>=8?(o+=t.getUint32(r,!0),r+=4,a>=9&&(e+=t.getUint8(r++)<<8),a>=10&&(e+=t.getUint8(r++)<<16),a===11&&(e+=t.getUint8(r++)<<24)):(a>=5&&(o+=t.getUint8(r++)),a>=6&&(o+=t.getUint8(r++)<<8),a===7&&(o+=t.getUint8(r++)<<16))):(a>=1&&(i+=t.getUint8(r++)),a>=2&&(i+=t.getUint8(r++)<<8),a===3&&(i+=t.getUint8(r++)<<16)),y(i,o,e)[2]}function y(t,n,e){return t-=n,t-=e,t^=e>>>13,n-=e,n-=t,n^=t<<8,e-=t,e-=n,e^=n>>>13,t-=n,t-=e,t^=e>>>12,n-=e,n-=t,n^=t<<16,e-=t,e-=n,e^=n>>>5,t-=n,t-=e,t^=e>>>3,n-=e,n-=t,n^=t<<10,e-=t,e-=n,e^=n>>>15,[t,n,e]}function k(t,n,e,i,o=[]){let r={},c={},a={},s=_(t[0],t.raw[0]),u=[s.text],p=[],d=s.text;for(let l=1;l<t.length;l++){let{messagePart:T,placeholderName:g=D(l),associatedMessageId:A}=w(t[l],t.raw[l]);d+=`{$${g}}${T}`,n!==void 0&&(r[g]=n[l-1],c[g]=o[l-1]),p.push(g),A!==void 0&&(a[g]=A),u.push(T)}let m=s.customId||v(d,s.meaning||""),E=s.legacyIds?s.legacyIds.filter(l=>l!==m):[];return{id:m,legacyIds:E,substitutions:r,substitutionLocations:c,text:d,customId:s.customId,meaning:s.meaning||"",description:s.description||"",messageParts:u,messagePartLocations:i,placeholderNames:p,associatedMessageIds:a,location:e}}function _(t,n){let{text:e,block:i}=O(t,n);if(i===void 0)return{text:e};{let[o,...r]=i.split(L),[c,a]=o.split(S,2),[s,u]=c.split(R,2);return u===void 0&&(u=s,s=void 0),u===""&&(u=void 0),{text:e,meaning:s,description:u,customId:a,legacyIds:r}}}function w(t,n){let{text:e,block:i}=O(t,n);if(i===void 0)return{messagePart:e};{let[o,r]=i.split(S);return{messagePart:e,placeholderName:o,associatedMessageId:r}}}function O(t,n){if(n.charAt(0)!==h)return{text:t};{let e=x(t,n);return{block:t.substring(1,e),text:t.substring(e+1)}}}function D(t){return t===1?"PH":`PH_${t-1}`}function x(t,n){for(let e=1,i=1;e<t.length;e++,i++)if(n[i]==="\\")i++;else if(t[e]===h)return e;throw new Error(`Unterminated $localize metadata block in "${n}".`)}var j=class extends Error{constructor(t){super(`No translation found for ${M(t)}.`),this.parsedMessage=t}type="MissingTranslationError"};function C(t,n,e){let i=k(n,e),o=t[i.id];if(i.legacyIds!==void 0)for(let r=0;r<i.legacyIds.length&&o===void 0;r++)o=t[i.legacyIds[r]];if(o===void 0)throw new j(i);return[o.messageParts,o.placeholderNames.map(r=>{if(i.substitutions.hasOwnProperty(r))return i.substitutions[r];throw new Error(`There is a placeholder name mismatch with the translation provided for the message ${M(i)}.
The translation contains a placeholder with name ${r}, which does not exist in the message.`)})]}function K(t){let n=t.split(/{\$([^}]*)}/),e=[n[0]],i=[];for(let r=1;r<n.length-1;r+=2)i.push(n[r]),e.push(`${n[r+1]}`);let o=e.map(r=>r.charAt(0)===h?"\\"+r:r);return{text:t,messageParts:z(e,o),placeholderNames:i}}function z(t,n){return Object.defineProperty(t,"raw",{value:n}),t}function M(t){let n=t.meaning&&` - "${t.meaning}"`,e=t.legacyIds&&t.legacyIds.length>0?` [${t.legacyIds.map(i=>`"${i}"`).join(", ")}]`:"";return`"${t.id}"${e} ("${t.text}"${n})`}var I=function(t,...n){if(I.translate){let i=I.translate(t,n);t=i[0],n=i[1]}let e=B(t[0],t.raw[0]);for(let i=1;i<t.length;i++)e+=n[i-1]+B(t[i],t.raw[i]);return e},H=":";function B(t,n){return n.charAt(0)===H?t.substring(x(t,n)+1):t}var f=I;function F(t){f.translate||(f.translate=G),f.TRANSLATIONS||(f.TRANSLATIONS={}),Object.keys(t).forEach(n=>{f.TRANSLATIONS[n]=K(t[n])})}function G(t,n){try{return C(f.TRANSLATIONS,t,n)}catch(e){return console.warn(e.message),[t,n]}}export{I as a,F as b};
