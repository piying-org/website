import{a as u}from"./chunk-X3ITOO5Z.js";import{Dc as m,V as r,Vb as p,_ as s,_a as l,bb as d,sa as c}from"./chunk-QTBQ66D2.js";var f=["type","code-editor"],o=class i extends u{eleRef=s(c);instance;constructor(){super(),this.instance=this.amdInit()?.then(()=>this.init())}writeValue(t){super.writeValue(t),this.instance?.then(e=>{e.setValue(t??"")})}amdInit(){if(document)return new Promise(t=>{let e=document.createElement("script");e.src="./lib/monaco-editor/vs/loader.js",document.head.appendChild(e),e.onload=()=>{AMDLoader.global.require.config({paths:{vs:"vs"},baseUrl:window.location.origin+"/lib/monaco-editor",preferScriptTags:!0,"vs/nls":{availableLanguages:{"*":"zh-cn"}}}),AMDLoader.global.require(["vs/editor/editor.main"],()=>{t()})}})}async init(){monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!1,noSyntaxValidation:!1}),monaco.languages.typescript.javascriptDefaults.setCompilerOptions({target:monaco.languages.typescript.ScriptTarget.ESNext,allowNonTsExtensions:!0,skipDefaultLibCheck:!0,skipLibCheck:!0});let t=await fetch("./declaration/online-type.d.ts").then(a=>a.text());monaco.languages.typescript.javascriptDefaults.addExtraLib(t,"piying.ts");let n=monaco.editor.create(this.eleRef.nativeElement,{value:"",language:"javascript",minimap:{enabled:!1}});return setTimeout(()=>{n.getAction("editor.action.formatDocument").run()},50),n.onDidChangeModelContent(a=>{this.valueChange(n.getValue())}),n}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=l({type:i,selectors:[["div","type","code-editor"]],features:[p([{provide:m,useExisting:r(()=>i),multi:!0}]),d],attrs:f,decls:0,vars:0,template:function(e,n){},encapsulation:2})};export{o as default};
