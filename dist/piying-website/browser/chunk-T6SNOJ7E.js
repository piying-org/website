import{a as wn,d as xn,e as gt}from"./chunk-7UPD5GGP.js";import{$ as A,$b as gn,Ab as X,Bb as hn,Cb as yn,Cc as En,Dc as mt,Gb as ce,Id as vt,Kb as ct,Mb as D,Nb as dn,O as st,Ob as ft,P as sn,Qa as Ce,Sb as Q,Tb as Le,Ua as at,Ub as Ge,W as un,Yb as mn,Z as L,Za as Fe,Zb as vn,a as h,ab as on,ac as bn,b as v,bb as ln,ca as G,cb as $e,cc as Be,d as uo,dc as pt,e as tn,eb as ue,ec as Y,f as oo,fb as an,fc as kn,ga as S,gb as Me,gc as ht,hb as oe,hc as B,ia as be,jc as ee,kb as cn,kc as yt,l as nn,lc as Cn,m as rn,ma as ut,na as _,oc as O,pc as m,qc as fe,ra as ot,rc as dt,sa as ke,sc as ze,u as rt,ua as lt,ub as le,uc as $n,v as it,vb as ae,vc as I,wc as pe,wd as _n,yb as fn,zb as pn}from"./chunk-HIAA3CTO.js";var Nu=uo((yc,Ru)=>{"use strict";Ru.exports=Sl;function de(n){return n instanceof Buffer?Buffer.from(n):new n.constructor(n.buffer.slice(),n.byteOffset,n.length)}function Sl(n){if(n=n||{},n.circles)return Pl(n);let t=new Map;if(t.set(Date,u=>new Date(u)),t.set(Map,(u,l)=>new Map(r(Array.from(u),l))),t.set(Set,(u,l)=>new Set(r(Array.from(u),l))),n.constructorHandlers)for(let u of n.constructorHandlers)t.set(u[0],u[1]);let e=null;return n.proto?s:i;function r(u,l){let o=Object.keys(u),a=new Array(o.length);for(let c=0;c<o.length;c++){let p=o[c],y=u[p];typeof y!="object"||y===null?a[p]=y:y.constructor!==Object&&(e=t.get(y.constructor))?a[p]=e(y,l):ArrayBuffer.isView(y)?a[p]=de(y):a[p]=l(y)}return a}function i(u){if(typeof u!="object"||u===null)return u;if(Array.isArray(u))return r(u,i);if(u.constructor!==Object&&(e=t.get(u.constructor)))return e(u,i);let l={};for(let o in u){if(Object.hasOwnProperty.call(u,o)===!1)continue;let a=u[o];typeof a!="object"||a===null?l[o]=a:a.constructor!==Object&&(e=t.get(a.constructor))?l[o]=e(a,i):ArrayBuffer.isView(a)?l[o]=de(a):l[o]=i(a)}return l}function s(u){if(typeof u!="object"||u===null)return u;if(Array.isArray(u))return r(u,s);if(u.constructor!==Object&&(e=t.get(u.constructor)))return e(u,s);let l={};for(let o in u){let a=u[o];typeof a!="object"||a===null?l[o]=a:a.constructor!==Object&&(e=t.get(a.constructor))?l[o]=e(a,s):ArrayBuffer.isView(a)?l[o]=de(a):l[o]=s(a)}return l}}function Pl(n){let t=[],e=[],r=new Map;if(r.set(Date,o=>new Date(o)),r.set(Map,(o,a)=>new Map(s(Array.from(o),a))),r.set(Set,(o,a)=>new Set(s(Array.from(o),a))),n.constructorHandlers)for(let o of n.constructorHandlers)r.set(o[0],o[1]);let i=null;return n.proto?l:u;function s(o,a){let c=Object.keys(o),p=new Array(c.length);for(let y=0;y<c.length;y++){let b=c[y],k=o[b];if(typeof k!="object"||k===null)p[b]=k;else if(k.constructor!==Object&&(i=r.get(k.constructor)))p[b]=i(k,a);else if(ArrayBuffer.isView(k))p[b]=de(k);else{let C=t.indexOf(k);C!==-1?p[b]=e[C]:p[b]=a(k)}}return p}function u(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return s(o,u);if(o.constructor!==Object&&(i=r.get(o.constructor)))return i(o,u);let a={};t.push(o),e.push(a);for(let c in o){if(Object.hasOwnProperty.call(o,c)===!1)continue;let p=o[c];if(typeof p!="object"||p===null)a[c]=p;else if(p.constructor!==Object&&(i=r.get(p.constructor)))a[c]=i(p,u);else if(ArrayBuffer.isView(p))a[c]=de(p);else{let y=t.indexOf(p);y!==-1?a[c]=e[y]:a[c]=u(p)}}return t.pop(),e.pop(),a}function l(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return s(o,l);if(o.constructor!==Object&&(i=r.get(o.constructor)))return i(o,l);let a={};t.push(o),e.push(a);for(let c in o){let p=o[c];if(typeof p!="object"||p===null)a[c]=p;else if(p.constructor!==Object&&(i=r.get(p.constructor)))a[c]=i(p,l);else if(ArrayBuffer.isView(p))a[c]=de(p);else{let y=t.indexOf(p);y!==-1?a[c]=e[y]:a[c]=l(p)}}return t.pop(),e.pop(),a}}});var lo=Object.getOwnPropertyNames,ao=Object.getOwnPropertySymbols,co=Object.prototype.hasOwnProperty;function On(n,t){return function(r,i,s){return n(r,i,s)&&t(r,i,s)}}function We(n){return function(e,r,i){if(!e||!r||typeof e!="object"||typeof r!="object")return n(e,r,i);var s=i.cache,u=s.get(e),l=s.get(r);if(u&&l)return u===r&&l===e;s.set(e,r),s.set(r,e);var o=n(e,r,i);return s.delete(e),s.delete(r),o}}function An(n){return lo(n).concat(ao(n))}var fo=Object.hasOwn||function(n,t){return co.call(n,t)};function te(n,t){return n===t||!n&&!t&&n!==n&&t!==t}var po="__v",ho="__o",yo="_owner",jn=Object.getOwnPropertyDescriptor,Dn=Object.keys;function mo(n,t,e){var r=n.length;if(t.length!==r)return!1;for(;r-- >0;)if(!e.equals(n[r],t[r],r,r,n,t,e))return!1;return!0}function vo(n,t){return te(n.getTime(),t.getTime())}function go(n,t){return n.name===t.name&&n.message===t.message&&n.cause===t.cause&&n.stack===t.stack}function bo(n,t){return n===t}function In(n,t,e){var r=n.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),s=n.entries(),u,l,o=0;(u=s.next())&&!u.done;){for(var a=t.entries(),c=!1,p=0;(l=a.next())&&!l.done;){if(i[p]){p++;continue}var y=u.value,b=l.value;if(e.equals(y[0],b[0],o,p,n,t,e)&&e.equals(y[1],b[1],y[0],b[0],n,t,e)){c=i[p]=!0;break}p++}if(!c)return!1;o++}return!0}var ko=te;function Co(n,t,e){var r=Dn(n),i=r.length;if(Dn(t).length!==i)return!1;for(;i-- >0;)if(!Vn(n,t,e,r[i]))return!1;return!0}function Ee(n,t,e){var r=An(n),i=r.length;if(An(t).length!==i)return!1;for(var s,u,l;i-- >0;)if(s=r[i],!Vn(n,t,e,s)||(u=jn(n,s),l=jn(t,s),(u||l)&&(!u||!l||u.configurable!==l.configurable||u.enumerable!==l.enumerable||u.writable!==l.writable)))return!1;return!0}function $o(n,t){return te(n.valueOf(),t.valueOf())}function Eo(n,t){return n.source===t.source&&n.flags===t.flags}function Tn(n,t,e){var r=n.size;if(r!==t.size)return!1;if(!r)return!0;for(var i=new Array(r),s=n.values(),u,l;(u=s.next())&&!u.done;){for(var o=t.values(),a=!1,c=0;(l=o.next())&&!l.done;){if(!i[c]&&e.equals(u.value,l.value,u.value,l.value,n,t,e)){a=i[c]=!0;break}c++}if(!a)return!1}return!0}function _o(n,t){var e=n.length;if(t.length!==e)return!1;for(;e-- >0;)if(n[e]!==t[e])return!1;return!0}function wo(n,t){return n.hostname===t.hostname&&n.pathname===t.pathname&&n.protocol===t.protocol&&n.port===t.port&&n.hash===t.hash&&n.username===t.username&&n.password===t.password}function Vn(n,t,e,r){return(r===yo||r===ho||r===po)&&(n.$$typeof||t.$$typeof)?!0:fo(t,r)&&e.equals(n[r],t[r],r,r,n,t,e)}var xo="[object Arguments]",Oo="[object Boolean]",Ao="[object Date]",jo="[object Error]",Do="[object Map]",Io="[object Number]",To="[object Object]",So="[object RegExp]",Po="[object Set]",Vo="[object String]",qo="[object URL]",Ro=Array.isArray,Sn=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Pn=Object.assign,No=Object.prototype.toString.call.bind(Object.prototype.toString);function Fo(n){var t=n.areArraysEqual,e=n.areDatesEqual,r=n.areErrorsEqual,i=n.areFunctionsEqual,s=n.areMapsEqual,u=n.areNumbersEqual,l=n.areObjectsEqual,o=n.arePrimitiveWrappersEqual,a=n.areRegExpsEqual,c=n.areSetsEqual,p=n.areTypedArraysEqual,y=n.areUrlsEqual;return function(k,C,g){if(k===C)return!0;if(k==null||C==null)return!1;var j=typeof k;if(j!==typeof C)return!1;if(j!=="object")return j==="number"?u(k,C,g):j==="function"?i(k,C,g):!1;var U=k.constructor;if(U!==C.constructor)return!1;if(U===Object)return l(k,C,g);if(Ro(k))return t(k,C,g);if(Sn!=null&&Sn(k))return p(k,C,g);if(U===Date)return e(k,C,g);if(U===RegExp)return a(k,C,g);if(U===Map)return s(k,C,g);if(U===Set)return c(k,C,g);var $=No(k);return $===Ao?e(k,C,g):$===So?a(k,C,g):$===Do?s(k,C,g):$===Po?c(k,C,g):$===To?typeof k.then!="function"&&typeof C.then!="function"&&l(k,C,g):$===qo?y(k,C,g):$===jo?r(k,C,g):$===xo?l(k,C,g):$===Oo||$===Io||$===Vo?o(k,C,g):!1}}function Mo(n){var t=n.circular,e=n.createCustomConfig,r=n.strict,i={areArraysEqual:r?Ee:mo,areDatesEqual:vo,areErrorsEqual:go,areFunctionsEqual:bo,areMapsEqual:r?On(In,Ee):In,areNumbersEqual:ko,areObjectsEqual:r?Ee:Co,arePrimitiveWrappersEqual:$o,areRegExpsEqual:Eo,areSetsEqual:r?On(Tn,Ee):Tn,areTypedArraysEqual:r?Ee:_o,areUrlsEqual:wo};if(e&&(i=Pn({},i,e(i))),t){var s=We(i.areArraysEqual),u=We(i.areMapsEqual),l=We(i.areObjectsEqual),o=We(i.areSetsEqual);i=Pn({},i,{areArraysEqual:s,areMapsEqual:u,areObjectsEqual:l,areSetsEqual:o})}return i}function Lo(n){return function(t,e,r,i,s,u,l){return n(t,e,l)}}function Go(n){var t=n.circular,e=n.comparator,r=n.createState,i=n.equals,s=n.strict;if(r)return function(o,a){var c=r(),p=c.cache,y=p===void 0?t?new WeakMap:void 0:p,b=c.meta;return e(o,a,{cache:y,equals:i,meta:b,strict:s})};if(t)return function(o,a){return e(o,a,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var u={cache:void 0,equals:i,meta:void 0,strict:s};return function(o,a){return e(o,a,u)}}var P=H(),ic=H({strict:!0}),sc=H({circular:!0}),uc=H({circular:!0,strict:!0}),oc=H({createInternalComparator:function(){return te}}),lc=H({strict:!0,createInternalComparator:function(){return te}}),ac=H({circular:!0,createInternalComparator:function(){return te}}),cc=H({circular:!0,createInternalComparator:function(){return te},strict:!0});function H(n){n===void 0&&(n={});var t=n.circular,e=t===void 0?!1:t,r=n.createInternalComparator,i=n.createState,s=n.strict,u=s===void 0?!1:s,l=Mo(n),o=Fo(l),a=r?r(o):Lo(o);return Go({circular:e,comparator:o,createState:i,equals:a,strict:u})}var xa={};tn(xa,{AbstractControl:()=>me,CoreSchemaHandle:()=>ge,FieldArray:()=>ve,FieldControl:()=>Se,FieldGroup:()=>qe,FieldLogicGroup:()=>Pe,FormBuilder:()=>Re,INVALID:()=>se,NFCSchema:()=>wa,PENDING:()=>q,PI_FORM_BUILDER_ALIAS_MAP:()=>Lt,PI_FORM_BUILDER_OPTIONS_TOKEN:()=>zt,PI_VIEW_CONFIG_TOKEN:()=>Ne,SortedArray:()=>Te,VALID:()=>Ie,arrayStartsWith:()=>Ft,asControl:()=>St,asVirtualGroup:()=>qt,changeObject:()=>Rt,clone:()=>Gt,componentClass:()=>_a,condition:()=>Vt,convert:()=>Xt,disableWhen:()=>$a,effectListen:()=>Wu,formConfig:()=>da,getDefaults:()=>R,getSchemaByIssuePath:()=>Ze,getSchemaMetadata:()=>Mu,hideWhen:()=>Ca,isArray:()=>Wt,isFieldArray:()=>Uu,isFieldControl:()=>Gl,isFieldGroup:()=>Ll,isFieldLogicGroup:()=>Ve,isGroup:()=>Ye,layout:()=>Hu,mergeHooks:()=>Hl,mergeHooksFn:()=>F,mergeOutputFn:()=>Ut,mergeOutputs:()=>oa,nonFieldControl:()=>Ku,outputChange:()=>la,outputChangeFn:()=>Ju,patchAsyncInputs:()=>ta,patchAttributes:()=>va,patchHooks:()=>Ul,patchInputs:()=>Yl,patchInputsSignal:()=>na,patchOutputs:()=>ia,patchWrappers:()=>fa,rawConfig:()=>E,removeAttributes:()=>ga,removeHooks:()=>Jl,removeInputs:()=>ea,removeOutputs:()=>sa,removeWrappers:()=>pa,renderConfig:()=>ya,setAlias:()=>ha,setAttributes:()=>ma,setComponent:()=>zl,setHooks:()=>Wl,setInputs:()=>Ql,setOutputs:()=>ra,setWrappers:()=>aa,toArray:()=>Bt,toObservable:()=>Mt,topClass:()=>Ea,unWrapSignal:()=>N,valueChange:()=>ka,valueChangeFn:()=>tt});var qu={};tn(qu,{BASE64_REGEX:()=>Gn,BIC_REGEX:()=>Bn,CUID2_REGEX:()=>zn,DECIMAL_REGEX:()=>Wn,DIGITS_REGEX:()=>Un,EMAIL_REGEX:()=>Xn,EMOJI_REGEX:()=>Hn,HEXADECIMAL_REGEX:()=>Jn,HEX_COLOR_REGEX:()=>Kn,IMEI_REGEX:()=>Zn,IPV4_REGEX:()=>Qn,IPV6_REGEX:()=>Yn,IP_REGEX:()=>er,ISO_DATE_REGEX:()=>tr,ISO_DATE_TIME_REGEX:()=>nr,ISO_TIMESTAMP_REGEX:()=>sr,ISO_TIME_REGEX:()=>rr,ISO_TIME_SECOND_REGEX:()=>ir,ISO_WEEK_REGEX:()=>ur,MAC48_REGEX:()=>or,MAC64_REGEX:()=>lr,MAC_REGEX:()=>ar,NANO_ID_REGEX:()=>cr,OCTAL_REGEX:()=>fr,RFC_EMAIL_REGEX:()=>pr,SLUG_REGEX:()=>hr,ULID_REGEX:()=>yr,UUID_REGEX:()=>dr,ValiError:()=>z,_addIssue:()=>f,_getByteCount:()=>Oe,_getGraphemeCount:()=>Ae,_getLastMetadata:()=>He,_getStandardProps:()=>d,_getWordCount:()=>je,_isLuhnAlgo:()=>wt,_isValidObjectKey:()=>re,_joinExpects:()=>V,_stringify:()=>w,any:()=>Cs,args:()=>Fn,argsAsync:()=>Mn,array:()=>$s,arrayAsync:()=>Es,assert:()=>ol,awaitAsync:()=>Ln,base64:()=>mr,bic:()=>vr,bigint:()=>_s,blob:()=>ws,boolean:()=>xs,brand:()=>gr,bytes:()=>br,check:()=>kr,checkAsync:()=>Cr,checkItems:()=>$r,checkItemsAsync:()=>Er,config:()=>ll,creditCard:()=>_r,cuid2:()=>wr,custom:()=>Os,customAsync:()=>As,date:()=>js,decimal:()=>xr,deleteGlobalConfig:()=>zo,deleteGlobalMessage:()=>Uo,deleteSchemaMessage:()=>Ho,deleteSpecificMessage:()=>Ko,description:()=>Or,digits:()=>Ar,email:()=>jr,emoji:()=>Dr,empty:()=>Ir,endsWith:()=>Tr,entries:()=>Sr,entriesFromList:()=>Qo,entriesFromObjects:()=>Yo,enum:()=>Ds,enum_:()=>Ds,everyItem:()=>Pr,exactOptional:()=>Is,exactOptionalAsync:()=>Ts,excludes:()=>Vr,fallback:()=>al,fallbackAsync:()=>cl,file:()=>Ss,filterItems:()=>qr,findItem:()=>Rr,finite:()=>Nr,flatten:()=>fl,flavor:()=>Fr,forward:()=>pl,forwardAsync:()=>hl,function:()=>Ps,function_:()=>Ps,getDefault:()=>x,getDefaults:()=>Ct,getDefaultsAsync:()=>$t,getDescription:()=>yl,getDotPath:()=>xt,getFallback:()=>T,getFallbacks:()=>Et,getFallbacksAsync:()=>_t,getGlobalConfig:()=>ye,getGlobalMessage:()=>qn,getMetadata:()=>dl,getSchemaMessage:()=>Rn,getSpecificMessage:()=>Nn,getTitle:()=>ml,graphemes:()=>Mr,gtValue:()=>Lr,hash:()=>Gr,hexColor:()=>zr,hexadecimal:()=>Br,imei:()=>Wr,includes:()=>Ur,instance:()=>Vs,integer:()=>Xr,intersect:()=>qs,intersectAsync:()=>Rs,ip:()=>Hr,ipv4:()=>Jr,ipv6:()=>Kr,is:()=>vl,isOfKind:()=>el,isOfType:()=>tl,isValiError:()=>nl,isoDate:()=>Zr,isoDateTime:()=>Qr,isoTime:()=>Yr,isoTimeSecond:()=>ei,isoTimestamp:()=>ti,isoWeek:()=>ni,keyof:()=>gl,lazy:()=>Ns,lazyAsync:()=>Fs,length:()=>ri,literal:()=>Ms,looseObject:()=>Ls,looseObjectAsync:()=>Gs,looseTuple:()=>Bs,looseTupleAsync:()=>zs,ltValue:()=>ii,mac:()=>si,mac48:()=>ui,mac64:()=>oi,map:()=>Ws,mapAsync:()=>Us,mapItems:()=>li,maxBytes:()=>ai,maxEntries:()=>ci,maxGraphemes:()=>fi,maxLength:()=>pi,maxSize:()=>hi,maxValue:()=>yi,maxWords:()=>di,message:()=>bl,metadata:()=>mi,mimeType:()=>vi,minBytes:()=>gi,minEntries:()=>bi,minGraphemes:()=>ki,minLength:()=>Ci,minSize:()=>$i,minValue:()=>Ei,minWords:()=>_i,multipleOf:()=>wi,nan:()=>Xs,nanoid:()=>xi,never:()=>Hs,nonEmpty:()=>Oi,nonNullable:()=>Js,nonNullableAsync:()=>Ks,nonNullish:()=>Zs,nonNullishAsync:()=>Qs,nonOptional:()=>Ot,nonOptionalAsync:()=>At,normalize:()=>Ai,notBytes:()=>ji,notEntries:()=>Di,notGraphemes:()=>Ii,notLength:()=>Ti,notSize:()=>Si,notValue:()=>Pi,notValues:()=>Vi,notWords:()=>qi,null:()=>Ys,null_:()=>Ys,nullable:()=>eu,nullableAsync:()=>tu,nullish:()=>nu,nullishAsync:()=>ru,number:()=>iu,object:()=>su,objectAsync:()=>uu,objectWithRest:()=>ou,objectWithRestAsync:()=>lu,octal:()=>Ri,omit:()=>kl,optional:()=>De,optionalAsync:()=>jt,parse:()=>Tu,parseAsync:()=>Su,parseJson:()=>Ni,parser:()=>Cl,parserAsync:()=>$l,partial:()=>El,partialAsync:()=>_l,partialCheck:()=>Mi,partialCheckAsync:()=>Li,pick:()=>wl,picklist:()=>Dt,pipe:()=>xl,pipeAsync:()=>Ol,promise:()=>au,rawCheck:()=>Gi,rawCheckAsync:()=>Bi,rawTransform:()=>zi,rawTransformAsync:()=>Wi,readonly:()=>Ui,record:()=>cu,recordAsync:()=>fu,reduceItems:()=>Xi,regex:()=>Hi,required:()=>Al,requiredAsync:()=>jl,returns:()=>Ji,returnsAsync:()=>Ki,rfcEmail:()=>Zi,safeInteger:()=>Qi,safeParse:()=>Pu,safeParseAsync:()=>Vu,safeParser:()=>It,safeParserAsync:()=>Dl,set:()=>pu,setAsync:()=>hu,setGlobalConfig:()=>Bo,setGlobalMessage:()=>Wo,setSchemaMessage:()=>Xo,setSpecificMessage:()=>Jo,size:()=>Yi,slug:()=>es,someItem:()=>ts,sortItems:()=>ns,startsWith:()=>rs,strictObject:()=>yu,strictObjectAsync:()=>du,strictTuple:()=>mu,strictTupleAsync:()=>vu,string:()=>gu,stringifyJson:()=>is,summarize:()=>Il,symbol:()=>bu,title:()=>ss,toLowerCase:()=>us,toMaxValue:()=>os,toMinValue:()=>ls,toUpperCase:()=>as,transform:()=>cs,transformAsync:()=>fs,trim:()=>ps,trimEnd:()=>hs,trimStart:()=>ys,tuple:()=>ku,tupleAsync:()=>Cu,tupleWithRest:()=>$u,tupleWithRestAsync:()=>Eu,ulid:()=>ds,undefined:()=>_u,undefined_:()=>_u,undefinedable:()=>wu,undefinedableAsync:()=>xu,union:()=>Ou,unionAsync:()=>Au,unknown:()=>ju,unwrap:()=>Tl,url:()=>ms,uuid:()=>vs,value:()=>gs,values:()=>bs,variant:()=>Du,variantAsync:()=>Iu,void:()=>Je,void_:()=>Je,words:()=>ks});var he;function Bo(n){he=h(h({},he),n)}function ye(n){return{lang:n?.lang??he?.lang,message:n?.message,abortEarly:n?.abortEarly??he?.abortEarly,abortPipeEarly:n?.abortPipeEarly??he?.abortPipeEarly}}function zo(){he=void 0}var we;function Wo(n,t){we||(we=new Map),we.set(t,n)}function qn(n){return we?.get(n)}function Uo(n){we?.delete(n)}var xe;function Xo(n,t){xe||(xe=new Map),xe.set(t,n)}function Rn(n){return xe?.get(n)}function Ho(n){xe?.delete(n)}var ne;function Jo(n,t,e){ne||(ne=new Map),ne.get(n)||ne.set(n,new Map),ne.get(n).set(e,t)}function Nn(n,t){return ne?.get(n)?.get(t)}function Ko(n,t){ne?.get(n)?.delete(t)}function w(n){let t=typeof n;return t==="string"?`"${n}"`:t==="number"||t==="bigint"||t==="boolean"?`${n}`:t==="object"||t==="function"?(n&&Object.getPrototypeOf(n)?.constructor?.name)??"null":t}function f(n,t,e,r,i){let s=i&&"input"in i?i.input:e.value,u=i?.expected??n.expects??null,l=i?.received??w(s),o={kind:n.kind,type:n.type,input:s,expected:u,received:l,message:`Invalid ${t}: ${u?`Expected ${u} but r`:"R"}eceived ${l}`,requirement:n.requirement,path:i?.path,issues:i?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},a=n.kind==="schema",c=i?.message??n.message??Nn(n.reference,o.lang)??(a?Rn(o.lang):null)??r.message??qn(o.lang);c!==void 0&&(o.message=typeof c=="function"?c(o):c),a&&(e.typed=!1),e.issues?e.issues.push(o):e.issues=[o]}var bt;function Oe(n){return bt||(bt=new TextEncoder),bt.encode(n).length}var kt;function Ae(n){kt||(kt=new Intl.Segmenter);let t=kt.segment(n),e=0;for(let r of t)e++;return e}function He(n,t){if("pipe"in n){let e=[];for(let r=n.pipe.length-1;r>=0;r--){let i=n.pipe[r];if(i.kind==="schema"&&"pipe"in i)e.push(i);else if(i.kind==="metadata"&&i.type===t)return i[t]}for(let r of e){let i=He(r,t);if(i!==void 0)return i}}}function d(n){return{version:1,vendor:"valibot",validate(t){return n["~run"]({value:t},ye())}}}var _e;function je(n,t){_e||(_e=new Map),_e.get(n)||_e.set(n,new Intl.Segmenter(n,{granularity:"word"}));let e=_e.get(n).segment(t),r=0;for(let i of e)i.isWordLike&&r++;return r}var Zo=/\D/gu;function wt(n){let t=n.replace(Zo,""),e=t.length,r=1,i=0;for(;e;){let s=+t[--e];r^=1,i+=r?[0,2,4,6,8,1,3,5,7,9][s]:s}return i%10===0}function re(n,t){return Object.hasOwn(n,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}function V(n,t){let e=[...new Set(n)];return e.length>1?`(${e.join(` ${t} `)})`:e[0]??"never"}function Qo(n,t){let e={};for(let r of n)e[r]=t;return e}function Yo(n){let t={};for(let e of n)Object.assign(t,e.entries);return t}function xt(n){if(n.path){let t="";for(let e of n.path)if(typeof e.key=="string"||typeof e.key=="number")t?t+=`.${e.key}`:t+=e.key;else return null;return t}return null}function el(n,t){return t.kind===n}function tl(n,t){return t.type===n}function nl(n){return n instanceof z}var z=class extends Error{constructor(n){super(n[0].message),this.name="ValiError",this.issues=n}};function Fn(n){return{kind:"transformation",type:"args",reference:Fn,async:!1,schema:n,"~run"(t,e){let r=t.value;return t.value=(...i)=>{let s=this.schema["~run"]({value:i},e);if(s.issues)throw new z(s.issues);return r(...s.value)},t}}}function Mn(n){return{kind:"transformation",type:"args",reference:Mn,async:!1,schema:n,"~run"(t,e){let r=t.value;return t.value=async(...i)=>{let s=await n["~run"]({value:i},e);if(s.issues)throw new z(s.issues);return r(...s.value)},t}}}function Ln(){return{kind:"transformation",type:"await",reference:Ln,async:!0,async"~run"(n){return n.value=await n.value,n}}}var Gn=/^(?:[\da-z+/]{4})*(?:[\da-z+/]{2}==|[\da-z+/]{3}=)?$/iu,Bn=/^[A-Z]{6}(?!00)[\dA-Z]{2}(?:[\dA-Z]{3})?$/u,zn=/^[a-z][\da-z]*$/u,Wn=/^[+-]?(?:\d*\.)?\d+$/u,Un=/^\d+$/u,Xn=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,Hn=new RegExp("^(?:[\\u{1F1E6}-\\u{1F1FF}]{2}|\\u{1F3F4}[\\u{E0061}-\\u{E007A}]{2}[\\u{E0030}-\\u{E0039}\\u{E0061}-\\u{E007A}]{1,3}\\u{E007F}|(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation})(?:\\u200D(?:\\p{Emoji}\\uFE0F\\u20E3?|\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?|\\p{Emoji_Presentation}))*)+$","u"),Jn=/^(?:0[hx])?[\da-fA-F]+$/u,Kn=/^#(?:[\da-fA-F]{3,4}|[\da-fA-F]{6}|[\da-fA-F]{8})$/u,Zn=/^\d{15}$|^\d{2}-\d{6}-\d{6}-\d$/u,Qn=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$/u,Yn=/^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,er=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$|^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,tr=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u,nr=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])[T ](?:0\d|1\d|2[0-3]):[0-5]\d$/u,rr=/^(?:0\d|1\d|2[0-3]):[0-5]\d$/u,ir=/^(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}$/u,sr=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])[T ](?:0\d|1\d|2[0-3])(?::[0-5]\d){2}(?:\.\d{1,9})?(?:Z|[+-](?:0\d|1\d|2[0-3])(?::?[0-5]\d)?)$/u,ur=/^\d{4}-W(?:0[1-9]|[1-4]\d|5[0-3])$/u,or=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$/iu,lr=/^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,ar=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$|^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,cr=/^[\w-]+$/u,fr=/^(?:0o)?[0-7]+$/u,pr=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,hr=/^[\da-z]+(?:[-_][\da-z]+)*$/u,yr=/^[\da-hjkmnp-tv-zA-HJKMNP-TV-Z]{26}$/u,dr=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function mr(n){return{kind:"validation",type:"base64",reference:mr,async:!1,expects:null,requirement:Gn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"Base64",t,e),t}}}function vr(n){return{kind:"validation",type:"bic",reference:vr,async:!1,expects:null,requirement:Bn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"BIC",t,e),t}}}function gr(n){return{kind:"transformation",type:"brand",reference:gr,async:!1,name:n,"~run"(t){return t}}}function br(n,t){return{kind:"validation",type:"bytes",reference:br,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Oe(e.value);i!==this.requirement&&f(this,"bytes",e,r,{received:`${i}`})}return e}}}function kr(n,t){return{kind:"validation",type:"check",reference:kr,async:!1,expects:null,requirement:n,message:t,"~run"(e,r){return e.typed&&!this.requirement(e.value)&&f(this,"input",e,r),e}}}function Cr(n,t){return{kind:"validation",type:"check",reference:Cr,async:!0,expects:null,requirement:n,message:t,async"~run"(e,r){return e.typed&&!await this.requirement(e.value)&&f(this,"input",e,r),e}}}function $r(n,t){return{kind:"validation",type:"check_items",reference:$r,async:!1,expects:null,requirement:n,message:t,"~run"(e,r){if(e.typed)for(let i=0;i<e.value.length;i++){let s=e.value[i];this.requirement(s,i,e.value)||f(this,"item",e,r,{input:s,path:[{type:"array",origin:"value",input:e.value,key:i,value:s}]})}return e}}}function Er(n,t){return{kind:"validation",type:"check_items",reference:Er,async:!0,expects:null,requirement:n,message:t,async"~run"(e,r){if(e.typed){let i=await Promise.all(e.value.map(this.requirement));for(let s=0;s<e.value.length;s++)if(!i[s]){let u=e.value[s];f(this,"item",e,r,{input:u,path:[{type:"array",origin:"value",input:e.value,key:s,value:u}]})}}return e}}}var rl=/^(?:\d{14,19}|\d{4}(?: \d{3,6}){2,4}|\d{4}(?:-\d{3,6}){2,4})$/u,il=/[- ]/gu,sl=[/^3[47]\d{13}$/u,/^3(?:0[0-5]|[68]\d)\d{11,13}$/u,/^6(?:011|5\d{2})\d{12,15}$/u,/^(?:2131|1800|35\d{3})\d{11}$/u,/^5[1-5]\d{2}|(?:222\d|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}$/u,/^(?:6[27]\d{14,17}|81\d{14,17})$/u,/^4\d{12}(?:\d{3,6})?$/u];function _r(n){return{kind:"validation",type:"credit_card",reference:_r,async:!1,expects:null,requirement(t){let e;return rl.test(t)&&(e=t.replace(il,""))&&sl.some(r=>r.test(e))&&wt(e)},message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"credit card",t,e),t}}}function wr(n){return{kind:"validation",type:"cuid2",reference:wr,async:!1,expects:null,requirement:zn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"Cuid2",t,e),t}}}function xr(n){return{kind:"validation",type:"decimal",reference:xr,async:!1,expects:null,requirement:Wn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"decimal",t,e),t}}}function Or(n){return{kind:"metadata",type:"description",reference:Or,description:n}}function Ar(n){return{kind:"validation",type:"digits",reference:Ar,async:!1,expects:null,requirement:Un,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"digits",t,e),t}}}function jr(n){return{kind:"validation",type:"email",reference:jr,expects:null,async:!1,requirement:Xn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"email",t,e),t}}}function Dr(n){return{kind:"validation",type:"emoji",reference:Dr,async:!1,expects:null,requirement:Hn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"emoji",t,e),t}}}function Ir(n){return{kind:"validation",type:"empty",reference:Ir,async:!1,expects:"0",message:n,"~run"(t,e){return t.typed&&t.value.length>0&&f(this,"length",t,e,{received:`${t.value.length}`}),t}}}function Tr(n,t){return{kind:"validation",type:"ends_with",reference:Tr,async:!1,expects:`"${n}"`,requirement:n,message:t,"~run"(e,r){return e.typed&&!e.value.endsWith(this.requirement)&&f(this,"end",e,r,{received:`"${e.value.slice(-this.requirement.length)}"`}),e}}}function Sr(n,t){return{kind:"validation",type:"entries",reference:Sr,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){if(!e.typed)return e;let i=Object.keys(e.value).length;return e.typed&&i!==this.requirement&&f(this,"entries",e,r,{received:`${i}`}),e}}}function Pr(n,t){return{kind:"validation",type:"every_item",reference:Pr,async:!1,expects:null,requirement:n,message:t,"~run"(e,r){return e.typed&&!e.value.every(this.requirement)&&f(this,"item",e,r),e}}}function Vr(n,t){let e=w(n);return{kind:"validation",type:"excludes",reference:Vr,async:!1,expects:`!${e}`,requirement:n,message:t,"~run"(r,i){return r.typed&&r.value.includes(this.requirement)&&f(this,"content",r,i,{received:e}),r}}}function qr(n){return{kind:"transformation",type:"filter_items",reference:qr,async:!1,operation:n,"~run"(t){return t.value=t.value.filter(this.operation),t}}}function Rr(n){return{kind:"transformation",type:"find_item",reference:Rr,async:!1,operation:n,"~run"(t){return t.value=t.value.find(this.operation),t}}}function Nr(n){return{kind:"validation",type:"finite",reference:Nr,async:!1,expects:null,requirement:Number.isFinite,message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"finite",t,e),t}}}function Fr(n){return{kind:"transformation",type:"flavor",reference:Fr,async:!1,name:n,"~run"(t){return t}}}function Mr(n,t){return{kind:"validation",type:"graphemes",reference:Mr,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Ae(e.value);i!==this.requirement&&f(this,"graphemes",e,r,{received:`${i}`})}return e}}}function Lr(n,t){return{kind:"validation",type:"gt_value",reference:Lr,async:!1,expects:`>${n instanceof Date?n.toJSON():w(n)}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!(e.value>this.requirement)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}var ul={md4:32,md5:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8,adler32:8};function Gr(n,t){return{kind:"validation",type:"hash",reference:Gr,expects:null,async:!1,requirement:RegExp(n.map(e=>`^[a-f0-9]{${ul[e]}}$`).join("|"),"iu"),message:t,"~run"(e,r){return e.typed&&!this.requirement.test(e.value)&&f(this,"hash",e,r),e}}}function Br(n){return{kind:"validation",type:"hexadecimal",reference:Br,async:!1,expects:null,requirement:Jn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"hexadecimal",t,e),t}}}function zr(n){return{kind:"validation",type:"hex_color",reference:zr,async:!1,expects:null,requirement:Kn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"hex color",t,e),t}}}function Wr(n){return{kind:"validation",type:"imei",reference:Wr,async:!1,expects:null,requirement(t){return Zn.test(t)&&wt(t)},message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"IMEI",t,e),t}}}function Ur(n,t){let e=w(n);return{kind:"validation",type:"includes",reference:Ur,async:!1,expects:e,requirement:n,message:t,"~run"(r,i){return r.typed&&!r.value.includes(this.requirement)&&f(this,"content",r,i,{received:`!${e}`}),r}}}function Xr(n){return{kind:"validation",type:"integer",reference:Xr,async:!1,expects:null,requirement:Number.isInteger,message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"integer",t,e),t}}}function Hr(n){return{kind:"validation",type:"ip",reference:Hr,async:!1,expects:null,requirement:er,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"IP",t,e),t}}}function Jr(n){return{kind:"validation",type:"ipv4",reference:Jr,async:!1,expects:null,requirement:Qn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"IPv4",t,e),t}}}function Kr(n){return{kind:"validation",type:"ipv6",reference:Kr,async:!1,expects:null,requirement:Yn,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"IPv6",t,e),t}}}function Zr(n){return{kind:"validation",type:"iso_date",reference:Zr,async:!1,expects:null,requirement:tr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"date",t,e),t}}}function Qr(n){return{kind:"validation",type:"iso_date_time",reference:Qr,async:!1,expects:null,requirement:nr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"date-time",t,e),t}}}function Yr(n){return{kind:"validation",type:"iso_time",reference:Yr,async:!1,expects:null,requirement:rr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"time",t,e),t}}}function ei(n){return{kind:"validation",type:"iso_time_second",reference:ei,async:!1,expects:null,requirement:ir,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"time-second",t,e),t}}}function ti(n){return{kind:"validation",type:"iso_timestamp",reference:ti,async:!1,expects:null,requirement:sr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"timestamp",t,e),t}}}function ni(n){return{kind:"validation",type:"iso_week",reference:ni,async:!1,expects:null,requirement:ur,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"week",t,e),t}}}function ri(n,t){return{kind:"validation",type:"length",reference:ri,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.length!==this.requirement&&f(this,"length",e,r,{received:`${e.value.length}`}),e}}}function ii(n,t){return{kind:"validation",type:"lt_value",reference:ii,async:!1,expects:`<${n instanceof Date?n.toJSON():w(n)}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!(e.value<this.requirement)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function si(n){return{kind:"validation",type:"mac",reference:si,async:!1,expects:null,requirement:ar,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"MAC",t,e),t}}}function ui(n){return{kind:"validation",type:"mac48",reference:ui,async:!1,expects:null,requirement:or,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"48-bit MAC",t,e),t}}}function oi(n){return{kind:"validation",type:"mac64",reference:oi,async:!1,expects:null,requirement:lr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"64-bit MAC",t,e),t}}}function li(n){return{kind:"transformation",type:"map_items",reference:li,async:!1,operation:n,"~run"(t){return t.value=t.value.map(this.operation),t}}}function ai(n,t){return{kind:"validation",type:"max_bytes",reference:ai,async:!1,expects:`<=${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Oe(e.value);i>this.requirement&&f(this,"bytes",e,r,{received:`${i}`})}return e}}}function ci(n,t){return{kind:"validation",type:"max_entries",reference:ci,async:!1,expects:`<=${n}`,requirement:n,message:t,"~run"(e,r){if(!e.typed)return e;let i=Object.keys(e.value).length;return e.typed&&i>this.requirement&&f(this,"entries",e,r,{received:`${i}`}),e}}}function fi(n,t){return{kind:"validation",type:"max_graphemes",reference:fi,async:!1,expects:`<=${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Ae(e.value);i>this.requirement&&f(this,"graphemes",e,r,{received:`${i}`})}return e}}}function pi(n,t){return{kind:"validation",type:"max_length",reference:pi,async:!1,expects:`<=${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.length>this.requirement&&f(this,"length",e,r,{received:`${e.value.length}`}),e}}}function hi(n,t){return{kind:"validation",type:"max_size",reference:hi,async:!1,expects:`<=${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.size>this.requirement&&f(this,"size",e,r,{received:`${e.value.size}`}),e}}}function yi(n,t){return{kind:"validation",type:"max_value",reference:yi,async:!1,expects:`<=${n instanceof Date?n.toJSON():w(n)}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!(e.value<=this.requirement)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function di(n,t,e){return{kind:"validation",type:"max_words",reference:di,async:!1,expects:`<=${t}`,locales:n,requirement:t,message:e,"~run"(r,i){if(r.typed){let s=je(this.locales,r.value);s>this.requirement&&f(this,"words",r,i,{received:`${s}`})}return r}}}function mi(n){return{kind:"metadata",type:"metadata",reference:mi,metadata:n}}function vi(n,t){return{kind:"validation",type:"mime_type",reference:vi,async:!1,expects:V(n.map(e=>`"${e}"`),"|"),requirement:n,message:t,"~run"(e,r){return e.typed&&!this.requirement.includes(e.value.type)&&f(this,"MIME type",e,r,{received:`"${e.value.type}"`}),e}}}function gi(n,t){return{kind:"validation",type:"min_bytes",reference:gi,async:!1,expects:`>=${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Oe(e.value);i<this.requirement&&f(this,"bytes",e,r,{received:`${i}`})}return e}}}function bi(n,t){return{kind:"validation",type:"min_entries",reference:bi,async:!1,expects:`>=${n}`,requirement:n,message:t,"~run"(e,r){if(!e.typed)return e;let i=Object.keys(e.value).length;return e.typed&&i<this.requirement&&f(this,"entries",e,r,{received:`${i}`}),e}}}function ki(n,t){return{kind:"validation",type:"min_graphemes",reference:ki,async:!1,expects:`>=${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Ae(e.value);i<this.requirement&&f(this,"graphemes",e,r,{received:`${i}`})}return e}}}function Ci(n,t){return{kind:"validation",type:"min_length",reference:Ci,async:!1,expects:`>=${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.length<this.requirement&&f(this,"length",e,r,{received:`${e.value.length}`}),e}}}function $i(n,t){return{kind:"validation",type:"min_size",reference:$i,async:!1,expects:`>=${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.size<this.requirement&&f(this,"size",e,r,{received:`${e.value.size}`}),e}}}function Ei(n,t){return{kind:"validation",type:"min_value",reference:Ei,async:!1,expects:`>=${n instanceof Date?n.toJSON():w(n)}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!(e.value>=this.requirement)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function _i(n,t,e){return{kind:"validation",type:"min_words",reference:_i,async:!1,expects:`>=${t}`,locales:n,requirement:t,message:e,"~run"(r,i){if(r.typed){let s=je(this.locales,r.value);s<this.requirement&&f(this,"words",r,i,{received:`${s}`})}return r}}}function wi(n,t){return{kind:"validation",type:"multiple_of",reference:wi,async:!1,expects:`%${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value%this.requirement!=0&&f(this,"multiple",e,r),e}}}function xi(n){return{kind:"validation",type:"nanoid",reference:xi,async:!1,expects:null,requirement:cr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"Nano ID",t,e),t}}}function Oi(n){return{kind:"validation",type:"non_empty",reference:Oi,async:!1,expects:"!0",message:n,"~run"(t,e){return t.typed&&t.value.length===0&&f(this,"length",t,e,{received:"0"}),t}}}function Ai(n){return{kind:"transformation",type:"normalize",reference:Ai,async:!1,form:n,"~run"(t){return t.value=t.value.normalize(this.form),t}}}function ji(n,t){return{kind:"validation",type:"not_bytes",reference:ji,async:!1,expects:`!${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Oe(e.value);i===this.requirement&&f(this,"bytes",e,r,{received:`${i}`})}return e}}}function Di(n,t){return{kind:"validation",type:"not_entries",reference:Di,async:!1,expects:`!${n}`,requirement:n,message:t,"~run"(e,r){if(!e.typed)return e;let i=Object.keys(e.value).length;return e.typed&&i===this.requirement&&f(this,"entries",e,r,{received:`${i}`}),e}}}function Ii(n,t){return{kind:"validation",type:"not_graphemes",reference:Ii,async:!1,expects:`!${n}`,requirement:n,message:t,"~run"(e,r){if(e.typed){let i=Ae(e.value);i===this.requirement&&f(this,"graphemes",e,r,{received:`${i}`})}return e}}}function Ti(n,t){return{kind:"validation",type:"not_length",reference:Ti,async:!1,expects:`!${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.length===this.requirement&&f(this,"length",e,r,{received:`${e.value.length}`}),e}}}function Si(n,t){return{kind:"validation",type:"not_size",reference:Si,async:!1,expects:`!${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.size===this.requirement&&f(this,"size",e,r,{received:`${e.value.size}`}),e}}}function Pi(n,t){return{kind:"validation",type:"not_value",reference:Pi,async:!1,expects:n instanceof Date?`!${n.toJSON()}`:`!${w(n)}`,requirement:n,message:t,"~run"(e,r){return e.typed&&this.requirement<=e.value&&this.requirement>=e.value&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function Vi(n,t){return{kind:"validation",type:"not_values",reference:Vi,async:!1,expects:`!${V(n.map(e=>e instanceof Date?e.toJSON():w(e)),"|")}`,requirement:n,message:t,"~run"(e,r){return e.typed&&this.requirement.some(i=>i<=e.value&&i>=e.value)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function qi(n,t,e){return{kind:"validation",type:"not_words",reference:qi,async:!1,expects:`!${t}`,locales:n,requirement:t,message:e,"~run"(r,i){if(r.typed){let s=je(this.locales,r.value);s===this.requirement&&f(this,"words",r,i,{received:`${s}`})}return r}}}function Ri(n){return{kind:"validation",type:"octal",reference:Ri,async:!1,expects:null,requirement:fr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"octal",t,e),t}}}function Ni(n,t){return{kind:"transformation",type:"parse_json",reference:Ni,config:n,message:t,async:!1,"~run"(e,r){try{e.value=JSON.parse(e.value,this.config?.reviver)}catch(i){if(i instanceof Error)f(this,"JSON",e,r,{received:`"${i.message}"`}),e.typed=!1;else throw i}return e}}}function Fi(n,t){if(n.issues)for(let e of t)for(let r of n.issues){let i=!1,s=Math.min(e.length,r.path?.length??0);for(let u=0;u<s;u++)if(e[u]!==r.path[u].key&&(e[u]!=="$"||r.path[u].type!=="array")){i=!0;break}if(!i)return!1}return!0}function Mi(n,t,e){return{kind:"validation",type:"partial_check",reference:Mi,async:!1,expects:null,paths:n,requirement:t,message:e,"~run"(r,i){return(r.typed||Fi(r,n))&&!this.requirement(r.value)&&f(this,"input",r,i),r}}}function Li(n,t,e){return{kind:"validation",type:"partial_check",reference:Li,async:!0,expects:null,paths:n,requirement:t,message:e,async"~run"(r,i){return(r.typed||Fi(r,n))&&!await this.requirement(r.value)&&f(this,"input",r,i),r}}}function Gi(n){return{kind:"validation",type:"raw_check",reference:Gi,async:!1,expects:null,"~run"(t,e){return n({dataset:t,config:e,addIssue:r=>f(this,r?.label??"input",t,e,r)}),t}}}function Bi(n){return{kind:"validation",type:"raw_check",reference:Bi,async:!0,expects:null,async"~run"(t,e){return await n({dataset:t,config:e,addIssue:r=>f(this,r?.label??"input",t,e,r)}),t}}}function zi(n){return{kind:"transformation",type:"raw_transform",reference:zi,async:!1,"~run"(t,e){let r=n({dataset:t,config:e,addIssue:i=>f(this,i?.label??"input",t,e,i),NEVER:null});return t.issues?t.typed=!1:t.value=r,t}}}function Wi(n){return{kind:"transformation",type:"raw_transform",reference:Wi,async:!0,async"~run"(t,e){let r=await n({dataset:t,config:e,addIssue:i=>f(this,i?.label??"input",t,e,i),NEVER:null});return t.issues?t.typed=!1:t.value=r,t}}}function Ui(){return{kind:"transformation",type:"readonly",reference:Ui,async:!1,"~run"(n){return n}}}function Xi(n,t){return{kind:"transformation",type:"reduce_items",reference:Xi,async:!1,operation:n,initial:t,"~run"(e){return e.value=e.value.reduce(this.operation,this.initial),e}}}function Hi(n,t){return{kind:"validation",type:"regex",reference:Hi,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!this.requirement.test(e.value)&&f(this,"format",e,r),e}}}function Ji(n){return{kind:"transformation",type:"returns",reference:Ji,async:!1,schema:n,"~run"(t,e){let r=t.value;return t.value=(...i)=>{let s=this.schema["~run"]({value:r(...i)},e);if(s.issues)throw new z(s.issues);return s.value},t}}}function Ki(n){return{kind:"transformation",type:"returns",reference:Ki,async:!1,schema:n,"~run"(t,e){let r=t.value;return t.value=async(...i)=>{let s=await this.schema["~run"]({value:await r(...i)},e);if(s.issues)throw new z(s.issues);return s.value},t}}}function Zi(n){return{kind:"validation",type:"rfc_email",reference:Zi,expects:null,async:!1,requirement:pr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"email",t,e),t}}}function Qi(n){return{kind:"validation",type:"safe_integer",reference:Qi,async:!1,expects:null,requirement:Number.isSafeInteger,message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"safe integer",t,e),t}}}function Yi(n,t){return{kind:"validation",type:"size",reference:Yi,async:!1,expects:`${n}`,requirement:n,message:t,"~run"(e,r){return e.typed&&e.value.size!==this.requirement&&f(this,"size",e,r,{received:`${e.value.size}`}),e}}}function es(n){return{kind:"validation",type:"slug",reference:es,async:!1,expects:null,requirement:hr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"slug",t,e),t}}}function ts(n,t){return{kind:"validation",type:"some_item",reference:ts,async:!1,expects:null,requirement:n,message:t,"~run"(e,r){return e.typed&&!e.value.some(this.requirement)&&f(this,"item",e,r),e}}}function ns(n){return{kind:"transformation",type:"sort_items",reference:ns,async:!1,operation:n,"~run"(t){return t.value=t.value.sort(this.operation),t}}}function rs(n,t){return{kind:"validation",type:"starts_with",reference:rs,async:!1,expects:`"${n}"`,requirement:n,message:t,"~run"(e,r){return e.typed&&!e.value.startsWith(this.requirement)&&f(this,"start",e,r,{received:`"${e.value.slice(0,this.requirement.length)}"`}),e}}}function is(n,t){return{kind:"transformation",type:"stringify_json",reference:is,message:t,config:n,async:!1,"~run"(e,r){try{let i=JSON.stringify(e.value,this.config?.replacer,this.config?.space);i===void 0&&(f(this,"JSON",e,r),e.typed=!1),e.value=i}catch(i){if(i instanceof Error)f(this,"JSON",e,r,{received:`"${i.message}"`}),e.typed=!1;else throw i}return e}}}function ss(n){return{kind:"metadata",type:"title",reference:ss,title:n}}function us(){return{kind:"transformation",type:"to_lower_case",reference:us,async:!1,"~run"(n){return n.value=n.value.toLowerCase(),n}}}function os(n){return{kind:"transformation",type:"to_max_value",reference:os,async:!1,requirement:n,"~run"(t){return t.value=t.value>this.requirement?this.requirement:t.value,t}}}function ls(n){return{kind:"transformation",type:"to_min_value",reference:ls,async:!1,requirement:n,"~run"(t){return t.value=t.value<this.requirement?this.requirement:t.value,t}}}function as(){return{kind:"transformation",type:"to_upper_case",reference:as,async:!1,"~run"(n){return n.value=n.value.toUpperCase(),n}}}function cs(n){return{kind:"transformation",type:"transform",reference:cs,async:!1,operation:n,"~run"(t){return t.value=this.operation(t.value),t}}}function fs(n){return{kind:"transformation",type:"transform",reference:fs,async:!0,operation:n,async"~run"(t){return t.value=await this.operation(t.value),t}}}function ps(){return{kind:"transformation",type:"trim",reference:ps,async:!1,"~run"(n){return n.value=n.value.trim(),n}}}function hs(){return{kind:"transformation",type:"trim_end",reference:hs,async:!1,"~run"(n){return n.value=n.value.trimEnd(),n}}}function ys(){return{kind:"transformation",type:"trim_start",reference:ys,async:!1,"~run"(n){return n.value=n.value.trimStart(),n}}}function ds(n){return{kind:"validation",type:"ulid",reference:ds,async:!1,expects:null,requirement:yr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"ULID",t,e),t}}}function ms(n){return{kind:"validation",type:"url",reference:ms,async:!1,expects:null,requirement(t){try{return new URL(t),!0}catch{return!1}},message:n,"~run"(t,e){return t.typed&&!this.requirement(t.value)&&f(this,"URL",t,e),t}}}function vs(n){return{kind:"validation",type:"uuid",reference:vs,async:!1,expects:null,requirement:dr,message:n,"~run"(t,e){return t.typed&&!this.requirement.test(t.value)&&f(this,"UUID",t,e),t}}}function gs(n,t){return{kind:"validation",type:"value",reference:gs,async:!1,expects:n instanceof Date?n.toJSON():w(n),requirement:n,message:t,"~run"(e,r){return e.typed&&!(this.requirement<=e.value&&this.requirement>=e.value)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function bs(n,t){return{kind:"validation",type:"values",reference:bs,async:!1,expects:`${V(n.map(e=>e instanceof Date?e.toJSON():w(e)),"|")}`,requirement:n,message:t,"~run"(e,r){return e.typed&&!this.requirement.some(i=>i<=e.value&&i>=e.value)&&f(this,"value",e,r,{received:e.value instanceof Date?e.value.toJSON():w(e.value)}),e}}}function ks(n,t,e){return{kind:"validation",type:"words",reference:ks,async:!1,expects:`${t}`,locales:n,requirement:t,message:e,"~run"(r,i){if(r.typed){let s=je(this.locales,r.value);s!==this.requirement&&f(this,"words",r,i,{received:`${s}`})}return r}}}function ol(n,t){let e=n["~run"]({value:t},{abortEarly:!0}).issues;if(e)throw new z(e)}function ll(n,t){return v(h({},n),{get"~standard"(){return d(this)},"~run"(e,r){return n["~run"](e,h(h({},r),t))}})}function T(n,t,e){return typeof n.fallback=="function"?n.fallback(t,e):n.fallback}function al(n,t){return v(h({},n),{fallback:t,get"~standard"(){return d(this)},"~run"(e,r){let i=n["~run"](e,r);return i.issues?{typed:!0,value:T(this,i,r)}:i}})}function cl(n,t){return v(h({},n),{fallback:t,async:!0,get"~standard"(){return d(this)},async"~run"(e,r){let i=await n["~run"](e,r);return i.issues?{typed:!0,value:await T(this,i,r)}:i}})}function fl(n){let t={};for(let e of n)if(e.path){let r=xt(e);r?(t.nested||(t.nested={}),t.nested[r]?t.nested[r].push(e.message):t.nested[r]=[e.message]):t.other?t.other.push(e.message):t.other=[e.message]}else t.root?t.root.push(e.message):t.root=[e.message];return t}function pl(n,t){return v(h({},n),{"~run"(e,r){let i=e.issues&&[...e.issues];if(e=n["~run"](e,r),e.issues){for(let s of e.issues)if(!i?.includes(s)){let u=e.value;for(let l of t){let o=u[l],a={type:"unknown",origin:"value",input:u,key:l,value:o};if(s.path?s.path.push(a):s.path=[a],!o)break;u=o}}}return e}})}function hl(n,t){return v(h({},n),{async:!0,async"~run"(e,r){let i=e.issues&&[...e.issues];if(e=await n["~run"](e,r),e.issues){for(let s of e.issues)if(!i?.includes(s)){let u=e.value;for(let l of t){let o=u[l],a={type:"unknown",origin:"value",input:u,key:l,value:o};if(s.path?s.path.push(a):s.path=[a],!o)break;u=o}}}return e}})}function x(n,t,e){return typeof n.default=="function"?n.default(t,e):n.default}function Ct(n){if("entries"in n){let t={};for(let e in n.entries)t[e]=Ct(n.entries[e]);return t}return"items"in n?n.items.map(Ct):x(n)}async function $t(n){return"entries"in n?Object.fromEntries(await Promise.all(Object.entries(n.entries).map(async([t,e])=>[t,await $t(e)]))):"items"in n?Promise.all(n.items.map($t)):x(n)}function yl(n){return He(n,"description")}function Et(n){if("entries"in n){let t={};for(let e in n.entries)t[e]=Et(n.entries[e]);return t}return"items"in n?n.items.map(Et):T(n)}async function _t(n){return"entries"in n?Object.fromEntries(await Promise.all(Object.entries(n.entries).map(async([t,e])=>[t,await _t(e)]))):"items"in n?Promise.all(n.items.map(_t)):T(n)}function dl(n){let t={};function e(r){if("pipe"in r)for(let i of r.pipe)i.kind==="schema"&&"pipe"in i?e(i):i.kind==="metadata"&&i.type==="metadata"&&Object.assign(t,i.metadata)}return e(n),t}function ml(n){return He(n,"title")}function vl(n,t){return!n["~run"]({value:t},{abortEarly:!0}).issues}function Cs(){return{kind:"schema",type:"any",reference:Cs,expects:"any",async:!1,get"~standard"(){return d(this)},"~run"(n){return n.typed=!0,n}}}function $s(n,t){return{kind:"schema",type:"array",reference:$s,expects:"Array",async:!1,item:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];for(let s=0;s<i.length;s++){let u=i[s],l=this.item["~run"]({value:u},r);if(l.issues){let o={type:"array",origin:"value",input:i,key:s,value:u};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.push(l.value)}}else f(this,"type",e,r);return e}}}function Es(n,t){return{kind:"schema",type:"array",reference:Es,expects:"Array",async:!0,item:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];let s=await Promise.all(i.map(u=>this.item["~run"]({value:u},r)));for(let u=0;u<s.length;u++){let l=s[u];if(l.issues){let o={type:"array",origin:"value",input:i,key:u,value:i[u]};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.push(l.value)}}else f(this,"type",e,r);return e}}}function _s(n){return{kind:"schema",type:"bigint",reference:_s,expects:"bigint",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="bigint"?t.typed=!0:f(this,"type",t,e),t}}}function ws(n){return{kind:"schema",type:"blob",reference:ws,expects:"Blob",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value instanceof Blob?t.typed=!0:f(this,"type",t,e),t}}}function xs(n){return{kind:"schema",type:"boolean",reference:xs,expects:"boolean",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="boolean"?t.typed=!0:f(this,"type",t,e),t}}}function Os(n,t){return{kind:"schema",type:"custom",reference:Os,expects:"unknown",async:!1,check:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return this.check(e.value)?e.typed=!0:f(this,"type",e,r),e}}}function As(n,t){return{kind:"schema",type:"custom",reference:As,expects:"unknown",async:!0,check:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){return await this.check(e.value)?e.typed=!0:f(this,"type",e,r),e}}}function js(n){return{kind:"schema",type:"date",reference:js,expects:"Date",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value instanceof Date?isNaN(t.value)?f(this,"type",t,e,{received:'"Invalid Date"'}):t.typed=!0:f(this,"type",t,e),t}}}function Ds(n,t){let e=[];for(let r in n)(`${+r}`!==r||typeof n[r]!="string"||!Object.is(n[n[r]],+r))&&e.push(n[r]);return{kind:"schema",type:"enum",reference:Ds,expects:V(e.map(w),"|"),async:!1,enum:n,options:e,message:t,get"~standard"(){return d(this)},"~run"(r,i){return this.options.includes(r.value)?r.typed=!0:f(this,"type",r,i),r}}}function Is(n,t){return{kind:"schema",type:"exact_optional",reference:Is,expects:n.expects,async:!1,wrapped:n,default:t,get"~standard"(){return d(this)},"~run"(e,r){return this.wrapped["~run"](e,r)}}}function Ts(n,t){return{kind:"schema",type:"exact_optional",reference:Ts,expects:n.expects,async:!0,wrapped:n,default:t,get"~standard"(){return d(this)},async"~run"(e,r){return this.wrapped["~run"](e,r)}}}function Ss(n){return{kind:"schema",type:"file",reference:Ss,expects:"File",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value instanceof File?t.typed=!0:f(this,"type",t,e),t}}}function Ps(n){return{kind:"schema",type:"function",reference:Ps,expects:"Function",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="function"?t.typed=!0:f(this,"type",t,e),t}}}function Vs(n,t){return{kind:"schema",type:"instance",reference:Vs,expects:n.name,async:!1,class:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value instanceof this.class?e.typed=!0:f(this,"type",e,r),e}}}function Ue(n,t){if(typeof n==typeof t){if(n===t||n instanceof Date&&t instanceof Date&&+n==+t)return{value:n};if(n&&t&&n.constructor===Object&&t.constructor===Object){for(let e in t)if(e in n){let r=Ue(n[e],t[e]);if(r.issue)return r;n[e]=r.value}else n[e]=t[e];return{value:n}}if(Array.isArray(n)&&Array.isArray(t)&&n.length===t.length){for(let e=0;e<n.length;e++){let r=Ue(n[e],t[e]);if(r.issue)return r;n[e]=r.value}return{value:n}}}return{issue:!0}}function qs(n,t){return{kind:"schema",type:"intersect",reference:qs,expects:V(n.map(e=>e.expects),"&"),async:!1,options:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){if(this.options.length){let i=e.value,s;e.typed=!0;for(let u of this.options){let l=u["~run"]({value:i},r);if(l.issues&&(e.issues?e.issues.push(...l.issues):e.issues=l.issues,r.abortEarly)){e.typed=!1;break}l.typed||(e.typed=!1),e.typed&&(s?s.push(l.value):s=[l.value])}if(e.typed){e.value=s[0];for(let u=1;u<s.length;u++){let l=Ue(e.value,s[u]);if(l.issue){f(this,"type",e,r,{received:"unknown"});break}e.value=l.value}}}else f(this,"type",e,r);return e}}}function Rs(n,t){return{kind:"schema",type:"intersect",reference:Rs,expects:V(n.map(e=>e.expects),"&"),async:!0,options:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){if(this.options.length){let i=e.value,s;e.typed=!0;let u=await Promise.all(this.options.map(l=>l["~run"]({value:i},r)));for(let l of u){if(l.issues&&(e.issues?e.issues.push(...l.issues):e.issues=l.issues,r.abortEarly)){e.typed=!1;break}l.typed||(e.typed=!1),e.typed&&(s?s.push(l.value):s=[l.value])}if(e.typed){e.value=s[0];for(let l=1;l<s.length;l++){let o=Ue(e.value,s[l]);if(o.issue){f(this,"type",e,r,{received:"unknown"});break}e.value=o.value}}}else f(this,"type",e,r);return e}}}function Ns(n){return{kind:"schema",type:"lazy",reference:Ns,expects:"unknown",async:!1,getter:n,get"~standard"(){return d(this)},"~run"(t,e){return this.getter(t.value)["~run"](t,e)}}}function Fs(n){return{kind:"schema",type:"lazy",reference:Fs,expects:"unknown",async:!0,getter:n,get"~standard"(){return d(this)},async"~run"(t,e){return(await this.getter(t.value))["~run"](t,e)}}}function Ms(n,t){return{kind:"schema",type:"literal",reference:Ms,expects:w(n),async:!1,literal:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value===this.literal?e.typed=!0:f(this,"type",e,r),e}}}function Ls(n,t){return{kind:"schema",type:"loose_object",reference:Ls,expects:"Object",async:!1,entries:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};for(let s in this.entries){let u=this.entries[s];if(s in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){let l=s in i?i[s]:x(u),o=u["~run"]({value:l},r);if(o.issues){let a={type:"object",origin:"value",input:i,key:s,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[s]=o.value}else if(u.fallback!==void 0)e.value[s]=T(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]}),r.abortEarly))break}if(!e.issues||!r.abortEarly)for(let s in i)re(i,s)&&!(s in this.entries)&&(e.value[s]=i[s])}else f(this,"type",e,r);return e}}}function Gs(n,t){return{kind:"schema",type:"loose_object",reference:Gs,expects:"Object",async:!0,entries:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};let s=await Promise.all(Object.entries(this.entries).map(async([u,l])=>{if(u in i||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){let o=u in i?i[u]:await x(l);return[u,o,l,await l["~run"]({value:o},r)]}return[u,i[u],l,null]}));for(let[u,l,o,a]of s)if(a){if(a.issues){let c={type:"object",origin:"value",input:i,key:u,value:l};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],e.issues?.push(p);if(e.issues||(e.issues=a.issues),r.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[u]=a.value}else if(o.fallback!==void 0)e.value[u]=await T(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:i,key:u,value:l}]}),r.abortEarly))break;if(!e.issues||!r.abortEarly)for(let u in i)re(i,u)&&!(u in this.entries)&&(e.value[u]=i[u])}else f(this,"type",e,r);return e}}}function Bs(n,t){return{kind:"schema",type:"loose_tuple",reference:Bs,expects:"Array",async:!1,items:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];for(let s=0;s<this.items.length;s++){let u=i[s],l=this.items[s]["~run"]({value:u},r);if(l.issues){let o={type:"array",origin:"value",input:i,key:s,value:u};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.push(l.value)}if(!e.issues||!r.abortEarly)for(let s=this.items.length;s<i.length;s++)e.value.push(i[s])}else f(this,"type",e,r);return e}}}function zs(n,t){return{kind:"schema",type:"loose_tuple",reference:zs,expects:"Array",async:!0,items:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];let s=await Promise.all(this.items.map(async(u,l)=>{let o=i[l];return[l,o,await u["~run"]({value:o},r)]}));for(let[u,l,o]of s){if(o.issues){let a={type:"array",origin:"value",input:i,key:u,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}if(!e.issues||!r.abortEarly)for(let u=this.items.length;u<i.length;u++)e.value.push(i[u])}else f(this,"type",e,r);return e}}}function Ws(n,t,e){return{kind:"schema",type:"map",reference:Ws,expects:"Map",async:!1,key:n,value:t,message:e,get"~standard"(){return d(this)},"~run"(r,i){let s=r.value;if(s instanceof Map){r.typed=!0,r.value=new Map;for(let[u,l]of s){let o=this.key["~run"]({value:u},i);if(o.issues){let c={type:"map",origin:"key",input:s,key:u,value:l};for(let p of o.issues)p.path?p.path.unshift(c):p.path=[c],r.issues?.push(p);if(r.issues||(r.issues=o.issues),i.abortEarly){r.typed=!1;break}}let a=this.value["~run"]({value:l},i);if(a.issues){let c={type:"map",origin:"value",input:s,key:u,value:l};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],r.issues?.push(p);if(r.issues||(r.issues=a.issues),i.abortEarly){r.typed=!1;break}}(!o.typed||!a.typed)&&(r.typed=!1),r.value.set(o.value,a.value)}}else f(this,"type",r,i);return r}}}function Us(n,t,e){return{kind:"schema",type:"map",reference:Us,expects:"Map",async:!0,key:n,value:t,message:e,get"~standard"(){return d(this)},async"~run"(r,i){let s=r.value;if(s instanceof Map){r.typed=!0,r.value=new Map;let u=await Promise.all([...s].map(([l,o])=>Promise.all([l,o,this.key["~run"]({value:l},i),this.value["~run"]({value:o},i)])));for(let[l,o,a,c]of u){if(a.issues){let p={type:"map",origin:"key",input:s,key:l,value:o};for(let y of a.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=a.issues),i.abortEarly){r.typed=!1;break}}if(c.issues){let p={type:"map",origin:"value",input:s,key:l,value:o};for(let y of c.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=c.issues),i.abortEarly){r.typed=!1;break}}(!a.typed||!c.typed)&&(r.typed=!1),r.value.set(a.value,c.value)}}else f(this,"type",r,i);return r}}}function Xs(n){return{kind:"schema",type:"nan",reference:Xs,expects:"NaN",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return Number.isNaN(t.value)?t.typed=!0:f(this,"type",t,e),t}}}function Hs(n){return{kind:"schema",type:"never",reference:Hs,expects:"never",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return f(this,"type",t,e),t}}}function Js(n,t){return{kind:"schema",type:"non_nullable",reference:Js,expects:"!null",async:!1,wrapped:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value!==null&&(e=this.wrapped["~run"](e,r)),e.value===null&&f(this,"type",e,r),e}}}function Ks(n,t){return{kind:"schema",type:"non_nullable",reference:Ks,expects:"!null",async:!0,wrapped:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value!==null&&(e=await this.wrapped["~run"](e,r)),e.value===null&&f(this,"type",e,r),e}}}function Zs(n,t){return{kind:"schema",type:"non_nullish",reference:Zs,expects:"(!null & !undefined)",async:!1,wrapped:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value===null||e.value===void 0||(e=this.wrapped["~run"](e,r)),(e.value===null||e.value===void 0)&&f(this,"type",e,r),e}}}function Qs(n,t){return{kind:"schema",type:"non_nullish",reference:Qs,expects:"(!null & !undefined)",async:!0,wrapped:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value===null||e.value===void 0||(e=await this.wrapped["~run"](e,r)),(e.value===null||e.value===void 0)&&f(this,"type",e,r),e}}}function Ot(n,t){return{kind:"schema",type:"non_optional",reference:Ot,expects:"!undefined",async:!1,wrapped:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value!==void 0&&(e=this.wrapped["~run"](e,r)),e.value===void 0&&f(this,"type",e,r),e}}}function At(n,t){return{kind:"schema",type:"non_optional",reference:At,expects:"!undefined",async:!0,wrapped:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value!==void 0&&(e=await this.wrapped["~run"](e,r)),e.value===void 0&&f(this,"type",e,r),e}}}function Ys(n){return{kind:"schema",type:"null",reference:Ys,expects:"null",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value===null?t.typed=!0:f(this,"type",t,e),t}}}function eu(n,t){return{kind:"schema",type:"nullable",reference:eu,expects:`(${n.expects} | null)`,async:!1,wrapped:n,default:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value===null&&(this.default!==void 0&&(e.value=x(this,e,r)),e.value===null)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function tu(n,t){return{kind:"schema",type:"nullable",reference:tu,expects:`(${n.expects} | null)`,async:!0,wrapped:n,default:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value===null&&(this.default!==void 0&&(e.value=await x(this,e,r)),e.value===null)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function nu(n,t){return{kind:"schema",type:"nullish",reference:nu,expects:`(${n.expects} | null | undefined)`,async:!1,wrapped:n,default:t,get"~standard"(){return d(this)},"~run"(e,r){return(e.value===null||e.value===void 0)&&(this.default!==void 0&&(e.value=x(this,e,r)),e.value===null||e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function ru(n,t){return{kind:"schema",type:"nullish",reference:ru,expects:`(${n.expects} | null | undefined)`,async:!0,wrapped:n,default:t,get"~standard"(){return d(this)},async"~run"(e,r){return(e.value===null||e.value===void 0)&&(this.default!==void 0&&(e.value=await x(this,e,r)),e.value===null||e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function iu(n){return{kind:"schema",type:"number",reference:iu,expects:"number",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:f(this,"type",t,e),t}}}function su(n,t){return{kind:"schema",type:"object",reference:su,expects:"Object",async:!1,entries:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};for(let s in this.entries){let u=this.entries[s];if(s in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){let l=s in i?i[s]:x(u),o=u["~run"]({value:l},r);if(o.issues){let a={type:"object",origin:"value",input:i,key:s,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[s]=o.value}else if(u.fallback!==void 0)e.value[s]=T(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]}),r.abortEarly))break}}else f(this,"type",e,r);return e}}}function uu(n,t){return{kind:"schema",type:"object",reference:uu,expects:"Object",async:!0,entries:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};let s=await Promise.all(Object.entries(this.entries).map(async([u,l])=>{if(u in i||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){let o=u in i?i[u]:await x(l);return[u,o,l,await l["~run"]({value:o},r)]}return[u,i[u],l,null]}));for(let[u,l,o,a]of s)if(a){if(a.issues){let c={type:"object",origin:"value",input:i,key:u,value:l};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],e.issues?.push(p);if(e.issues||(e.issues=a.issues),r.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[u]=a.value}else if(o.fallback!==void 0)e.value[u]=await T(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:i,key:u,value:l}]}),r.abortEarly))break}else f(this,"type",e,r);return e}}}function ou(n,t,e){return{kind:"schema",type:"object_with_rest",reference:ou,expects:"Object",async:!1,entries:n,rest:t,message:e,get"~standard"(){return d(this)},"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(let u in this.entries){let l=this.entries[u];if(u in s||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){let o=u in s?s[u]:x(l),a=l["~run"]({value:o},i);if(a.issues){let c={type:"object",origin:"value",input:s,key:u,value:o};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],r.issues?.push(p);if(r.issues||(r.issues=a.issues),i.abortEarly){r.typed=!1;break}}a.typed||(r.typed=!1),r.value[u]=a.value}else if(l.fallback!==void 0)r.value[u]=T(l);else if(l.type!=="exact_optional"&&l.type!=="optional"&&l.type!=="nullish"&&(f(this,"key",r,i,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:s,key:u,value:s[u]}]}),i.abortEarly))break}if(!r.issues||!i.abortEarly){for(let u in s)if(re(s,u)&&!(u in this.entries)){let l=this.rest["~run"]({value:s[u]},i);if(l.issues){let o={type:"object",origin:"value",input:s,key:u,value:s[u]};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],r.issues?.push(a);if(r.issues||(r.issues=l.issues),i.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),r.value[u]=l.value}}}else f(this,"type",r,i);return r}}}function lu(n,t,e){return{kind:"schema",type:"object_with_rest",reference:lu,expects:"Object",async:!0,entries:n,rest:t,message:e,get"~standard"(){return d(this)},async"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};let[u,l]=await Promise.all([Promise.all(Object.entries(this.entries).map(async([o,a])=>{if(o in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){let c=o in s?s[o]:await x(a);return[o,c,a,await a["~run"]({value:c},i)]}return[o,s[o],a,null]})),Promise.all(Object.entries(s).filter(([o])=>re(s,o)&&!(o in this.entries)).map(async([o,a])=>[o,a,await this.rest["~run"]({value:a},i)]))]);for(let[o,a,c,p]of u)if(p){if(p.issues){let y={type:"object",origin:"value",input:s,key:o,value:a};for(let b of p.issues)b.path?b.path.unshift(y):b.path=[y],r.issues?.push(b);if(r.issues||(r.issues=p.issues),i.abortEarly){r.typed=!1;break}}p.typed||(r.typed=!1),r.value[o]=p.value}else if(c.fallback!==void 0)r.value[o]=await T(c);else if(c.type!=="exact_optional"&&c.type!=="optional"&&c.type!=="nullish"&&(f(this,"key",r,i,{input:void 0,expected:`"${o}"`,path:[{type:"object",origin:"key",input:s,key:o,value:a}]}),i.abortEarly))break;if(!r.issues||!i.abortEarly)for(let[o,a,c]of l){if(c.issues){let p={type:"object",origin:"value",input:s,key:o,value:a};for(let y of c.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=c.issues),i.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value[o]=c.value}}else f(this,"type",r,i);return r}}}function De(n,t){return{kind:"schema",type:"optional",reference:De,expects:`(${n.expects} | undefined)`,async:!1,wrapped:n,default:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value===void 0&&(this.default!==void 0&&(e.value=x(this,e,r)),e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function jt(n,t){return{kind:"schema",type:"optional",reference:jt,expects:`(${n.expects} | undefined)`,async:!0,wrapped:n,default:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value===void 0&&(this.default!==void 0&&(e.value=await x(this,e,r)),e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function Dt(n,t){return{kind:"schema",type:"picklist",reference:Dt,expects:V(n.map(w),"|"),async:!1,options:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){return this.options.includes(e.value)?e.typed=!0:f(this,"type",e,r),e}}}function au(n){return{kind:"schema",type:"promise",reference:au,expects:"Promise",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value instanceof Promise?t.typed=!0:f(this,"type",t,e),t}}}function cu(n,t,e){return{kind:"schema",type:"record",reference:cu,expects:"Object",async:!1,key:n,value:t,message:e,get"~standard"(){return d(this)},"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(let u in s)if(re(s,u)){let l=s[u],o=this.key["~run"]({value:u},i);if(o.issues){let c={type:"object",origin:"key",input:s,key:u,value:l};for(let p of o.issues)p.path=[c],r.issues?.push(p);if(r.issues||(r.issues=o.issues),i.abortEarly){r.typed=!1;break}}let a=this.value["~run"]({value:l},i);if(a.issues){let c={type:"object",origin:"value",input:s,key:u,value:l};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],r.issues?.push(p);if(r.issues||(r.issues=a.issues),i.abortEarly){r.typed=!1;break}}(!o.typed||!a.typed)&&(r.typed=!1),o.typed&&(r.value[o.value]=a.value)}}else f(this,"type",r,i);return r}}}function fu(n,t,e){return{kind:"schema",type:"record",reference:fu,expects:"Object",async:!0,key:n,value:t,message:e,get"~standard"(){return d(this)},async"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};let u=await Promise.all(Object.entries(s).filter(([l])=>re(s,l)).map(([l,o])=>Promise.all([l,o,this.key["~run"]({value:l},i),this.value["~run"]({value:o},i)])));for(let[l,o,a,c]of u){if(a.issues){let p={type:"object",origin:"key",input:s,key:l,value:o};for(let y of a.issues)y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=a.issues),i.abortEarly){r.typed=!1;break}}if(c.issues){let p={type:"object",origin:"value",input:s,key:l,value:o};for(let y of c.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=c.issues),i.abortEarly){r.typed=!1;break}}(!a.typed||!c.typed)&&(r.typed=!1),a.typed&&(r.value[a.value]=c.value)}}else f(this,"type",r,i);return r}}}function pu(n,t){return{kind:"schema",type:"set",reference:pu,expects:"Set",async:!1,value:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(i instanceof Set){e.typed=!0,e.value=new Set;for(let s of i){let u=this.value["~run"]({value:s},r);if(u.issues){let l={type:"set",origin:"value",input:i,key:null,value:s};for(let o of u.issues)o.path?o.path.unshift(l):o.path=[l],e.issues?.push(o);if(e.issues||(e.issues=u.issues),r.abortEarly){e.typed=!1;break}}u.typed||(e.typed=!1),e.value.add(u.value)}}else f(this,"type",e,r);return e}}}function hu(n,t){return{kind:"schema",type:"set",reference:hu,expects:"Set",async:!0,value:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(i instanceof Set){e.typed=!0,e.value=new Set;let s=await Promise.all([...i].map(async u=>[u,await this.value["~run"]({value:u},r)]));for(let[u,l]of s){if(l.issues){let o={type:"set",origin:"value",input:i,key:null,value:u};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.add(l.value)}}else f(this,"type",e,r);return e}}}function yu(n,t){return{kind:"schema",type:"strict_object",reference:yu,expects:"Object",async:!1,entries:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};for(let s in this.entries){let u=this.entries[s];if(s in i||(u.type==="exact_optional"||u.type==="optional"||u.type==="nullish")&&u.default!==void 0){let l=s in i?i[s]:x(u),o=u["~run"]({value:l},r);if(o.issues){let a={type:"object",origin:"value",input:i,key:s,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[s]=o.value}else if(u.fallback!==void 0)e.value[s]=T(u);else if(u.type!=="exact_optional"&&u.type!=="optional"&&u.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]}),r.abortEarly))break}if(!e.issues||!r.abortEarly){for(let s in i)if(!(s in this.entries)){f(this,"key",e,r,{input:s,expected:"never",path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]});break}}}else f(this,"type",e,r);return e}}}function du(n,t){return{kind:"schema",type:"strict_object",reference:du,expects:"Object",async:!0,entries:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(i&&typeof i=="object"){e.typed=!0,e.value={};let s=await Promise.all(Object.entries(this.entries).map(async([u,l])=>{if(u in i||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){let o=u in i?i[u]:await x(l);return[u,o,l,await l["~run"]({value:o},r)]}return[u,i[u],l,null]}));for(let[u,l,o,a]of s)if(a){if(a.issues){let c={type:"object",origin:"value",input:i,key:u,value:l};for(let p of a.issues)p.path?p.path.unshift(c):p.path=[c],e.issues?.push(p);if(e.issues||(e.issues=a.issues),r.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[u]=a.value}else if(o.fallback!==void 0)e.value[u]=await T(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"&&(f(this,"key",e,r,{input:void 0,expected:`"${u}"`,path:[{type:"object",origin:"key",input:i,key:u,value:l}]}),r.abortEarly))break;if(!e.issues||!r.abortEarly){for(let u in i)if(!(u in this.entries)){f(this,"key",e,r,{input:u,expected:"never",path:[{type:"object",origin:"key",input:i,key:u,value:i[u]}]});break}}}else f(this,"type",e,r);return e}}}function mu(n,t){return{kind:"schema",type:"strict_tuple",reference:mu,expects:"Array",async:!1,items:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];for(let s=0;s<this.items.length;s++){let u=i[s],l=this.items[s]["~run"]({value:u},r);if(l.issues){let o={type:"array",origin:"value",input:i,key:s,value:u};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.push(l.value)}!(e.issues&&r.abortEarly)&&this.items.length<i.length&&f(this,"type",e,r,{input:i[this.items.length],expected:"never",path:[{type:"array",origin:"value",input:i,key:this.items.length,value:i[this.items.length]}]})}else f(this,"type",e,r);return e}}}function vu(n,t){return{kind:"schema",type:"strict_tuple",reference:vu,expects:"Array",async:!0,items:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];let s=await Promise.all(this.items.map(async(u,l)=>{let o=i[l];return[l,o,await u["~run"]({value:o},r)]}));for(let[u,l,o]of s){if(o.issues){let a={type:"array",origin:"value",input:i,key:u,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}!(e.issues&&r.abortEarly)&&this.items.length<i.length&&f(this,"type",e,r,{input:i[this.items.length],expected:"never",path:[{type:"array",origin:"value",input:i,key:this.items.length,value:i[this.items.length]}]})}else f(this,"type",e,r);return e}}}function gu(n){return{kind:"schema",type:"string",reference:gu,expects:"string",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="string"?t.typed=!0:f(this,"type",t,e),t}}}function bu(n){return{kind:"schema",type:"symbol",reference:bu,expects:"symbol",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return typeof t.value=="symbol"?t.typed=!0:f(this,"type",t,e),t}}}function ku(n,t){return{kind:"schema",type:"tuple",reference:ku,expects:"Array",async:!1,items:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];for(let s=0;s<this.items.length;s++){let u=i[s],l=this.items[s]["~run"]({value:u},r);if(l.issues){let o={type:"array",origin:"value",input:i,key:s,value:u};for(let a of l.issues)a.path?a.path.unshift(o):a.path=[o],e.issues?.push(a);if(e.issues||(e.issues=l.issues),r.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),e.value.push(l.value)}}else f(this,"type",e,r);return e}}}function Cu(n,t){return{kind:"schema",type:"tuple",reference:Cu,expects:"Array",async:!0,items:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i=e.value;if(Array.isArray(i)){e.typed=!0,e.value=[];let s=await Promise.all(this.items.map(async(u,l)=>{let o=i[l];return[l,o,await u["~run"]({value:o},r)]}));for(let[u,l,o]of s){if(o.issues){let a={type:"array",origin:"value",input:i,key:u,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],e.issues?.push(c);if(e.issues||(e.issues=o.issues),r.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else f(this,"type",e,r);return e}}}function $u(n,t,e){return{kind:"schema",type:"tuple_with_rest",reference:$u,expects:"Array",async:!1,items:n,rest:t,message:e,get"~standard"(){return d(this)},"~run"(r,i){let s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let u=0;u<this.items.length;u++){let l=s[u],o=this.items[u]["~run"]({value:l},i);if(o.issues){let a={type:"array",origin:"value",input:s,key:u,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],r.issues?.push(c);if(r.issues||(r.issues=o.issues),i.abortEarly){r.typed=!1;break}}o.typed||(r.typed=!1),r.value.push(o.value)}if(!r.issues||!i.abortEarly)for(let u=this.items.length;u<s.length;u++){let l=s[u],o=this.rest["~run"]({value:l},i);if(o.issues){let a={type:"array",origin:"value",input:s,key:u,value:l};for(let c of o.issues)c.path?c.path.unshift(a):c.path=[a],r.issues?.push(c);if(r.issues||(r.issues=o.issues),i.abortEarly){r.typed=!1;break}}o.typed||(r.typed=!1),r.value.push(o.value)}}else f(this,"type",r,i);return r}}}function Eu(n,t,e){return{kind:"schema",type:"tuple_with_rest",reference:Eu,expects:"Array",async:!0,items:n,rest:t,message:e,get"~standard"(){return d(this)},async"~run"(r,i){let s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];let[u,l]=await Promise.all([Promise.all(this.items.map(async(o,a)=>{let c=s[a];return[a,c,await o["~run"]({value:c},i)]})),Promise.all(s.slice(this.items.length).map(async(o,a)=>[a+this.items.length,o,await this.rest["~run"]({value:o},i)]))]);for(let[o,a,c]of u){if(c.issues){let p={type:"array",origin:"value",input:s,key:o,value:a};for(let y of c.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=c.issues),i.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}if(!r.issues||!i.abortEarly)for(let[o,a,c]of l){if(c.issues){let p={type:"array",origin:"value",input:s,key:o,value:a};for(let y of c.issues)y.path?y.path.unshift(p):y.path=[p],r.issues?.push(y);if(r.issues||(r.issues=c.issues),i.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}}else f(this,"type",r,i);return r}}}function _u(n){return{kind:"schema",type:"undefined",reference:_u,expects:"undefined",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value===void 0?t.typed=!0:f(this,"type",t,e),t}}}function wu(n,t){return{kind:"schema",type:"undefinedable",reference:wu,expects:`(${n.expects} | undefined)`,async:!1,wrapped:n,default:t,get"~standard"(){return d(this)},"~run"(e,r){return e.value===void 0&&(this.default!==void 0&&(e.value=x(this,e,r)),e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function xu(n,t){return{kind:"schema",type:"undefinedable",reference:xu,expects:`(${n.expects} | undefined)`,async:!0,wrapped:n,default:t,get"~standard"(){return d(this)},async"~run"(e,r){return e.value===void 0&&(this.default!==void 0&&(e.value=await x(this,e,r)),e.value===void 0)?(e.typed=!0,e):this.wrapped["~run"](e,r)}}}function Xe(n){let t;if(n)for(let e of n)t?t.push(...e.issues):t=e.issues;return t}function Ou(n,t){return{kind:"schema",type:"union",reference:Ou,expects:V(n.map(e=>e.expects),"|"),async:!1,options:n,message:t,get"~standard"(){return d(this)},"~run"(e,r){let i,s,u;for(let l of this.options){let o=l["~run"]({value:e.value},r);if(o.typed)if(o.issues)s?s.push(o):s=[o];else{i=o;break}else u?u.push(o):u=[o]}if(i)return i;if(s){if(s.length===1)return s[0];f(this,"type",e,r,{issues:Xe(s)}),e.typed=!0}else{if(u?.length===1)return u[0];f(this,"type",e,r,{issues:Xe(u)})}return e}}}function Au(n,t){return{kind:"schema",type:"union",reference:Au,expects:V(n.map(e=>e.expects),"|"),async:!0,options:n,message:t,get"~standard"(){return d(this)},async"~run"(e,r){let i,s,u;for(let l of this.options){let o=await l["~run"]({value:e.value},r);if(o.typed)if(o.issues)s?s.push(o):s=[o];else{i=o;break}else u?u.push(o):u=[o]}if(i)return i;if(s){if(s.length===1)return s[0];f(this,"type",e,r,{issues:Xe(s)}),e.typed=!0}else{if(u?.length===1)return u[0];f(this,"type",e,r,{issues:Xe(u)})}return e}}}function ju(){return{kind:"schema",type:"unknown",reference:ju,expects:"unknown",async:!1,get"~standard"(){return d(this)},"~run"(n){return n.typed=!0,n}}}function Du(n,t,e){return{kind:"schema",type:"variant",reference:Du,expects:"Object",async:!1,key:n,options:t,message:e,get"~standard"(){return d(this)},"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){let u,l=0,o=this.key,a=[],c=(p,y)=>{for(let b of p.options){if(b.type==="variant")c(b,new Set(y).add(b.key));else{let k=!0,C=0;for(let g of y){let j=b.entries[g];if(g in s?j["~run"]({typed:!1,value:s[g]},{abortEarly:!0}).issues:j.type!=="exact_optional"&&j.type!=="optional"&&j.type!=="nullish"){k=!1,o!==g&&(l<C||l===C&&g in s&&!(o in s))&&(l=C,o=g,a=[]),o===g&&a.push(b.entries[g].expects);break}C++}if(k){let g=b["~run"]({value:s},i);(!u||!u.typed&&g.typed)&&(u=g)}}if(u&&!u.issues)break}};if(c(this,new Set([this.key])),u)return u;f(this,"type",r,i,{input:s[o],expected:V(a,"|"),path:[{type:"object",origin:"value",input:s,key:o,value:s[o]}]})}else f(this,"type",r,i);return r}}}function Iu(n,t,e){return{kind:"schema",type:"variant",reference:Iu,expects:"Object",async:!0,key:n,options:t,message:e,get"~standard"(){return d(this)},async"~run"(r,i){let s=r.value;if(s&&typeof s=="object"){let u,l=0,o=this.key,a=[],c=async(p,y)=>{for(let b of p.options){if(b.type==="variant")await c(b,new Set(y).add(b.key));else{let k=!0,C=0;for(let g of y){let j=b.entries[g];if(g in s?(await j["~run"]({typed:!1,value:s[g]},{abortEarly:!0})).issues:j.type!=="exact_optional"&&j.type!=="optional"&&j.type!=="nullish"){k=!1,o!==g&&(l<C||l===C&&g in s&&!(o in s))&&(l=C,o=g,a=[]),o===g&&a.push(b.entries[g].expects);break}C++}if(k){let g=await b["~run"]({value:s},i);(!u||!u.typed&&g.typed)&&(u=g)}}if(u&&!u.issues)break}};if(await c(this,new Set([this.key])),u)return u;f(this,"type",r,i,{input:s[o],expected:V(a,"|"),path:[{type:"object",origin:"value",input:s,key:o,value:s[o]}]})}else f(this,"type",r,i);return r}}}function Je(n){return{kind:"schema",type:"void",reference:Je,expects:"void",async:!1,message:n,get"~standard"(){return d(this)},"~run"(t,e){return t.value===void 0?t.typed=!0:f(this,"type",t,e),t}}}function gl(n,t){return Dt(Object.keys(n.entries),t)}function bl(n,t){return v(h({},n),{get"~standard"(){return d(this)},"~run"(e,r){return n["~run"](e,v(h({},r),{message:t}))}})}function kl(n,t){let e=h({},n.entries);for(let r of t)delete e[r];return v(h({},n),{entries:e,get"~standard"(){return d(this)}})}function Tu(n,t,e){let r=n["~run"]({value:t},ye(e));if(r.issues)throw new z(r.issues);return r.value}async function Su(n,t,e){let r=await n["~run"]({value:t},ye(e));if(r.issues)throw new z(r.issues);return r.value}function Cl(n,t){let e=r=>Tu(n,r,t);return e.schema=n,e.config=t,e}function $l(n,t){let e=r=>Su(n,r,t);return e.schema=n,e.config=t,e}function El(n,t){let e={};for(let r in n.entries)e[r]=!t||t.includes(r)?De(n.entries[r]):n.entries[r];return v(h({},n),{entries:e,get"~standard"(){return d(this)}})}function _l(n,t){let e={};for(let r in n.entries)e[r]=!t||t.includes(r)?jt(n.entries[r]):n.entries[r];return v(h({},n),{entries:e,get"~standard"(){return d(this)}})}function wl(n,t){let e={};for(let r of t)e[r]=n.entries[r];return v(h({},n),{entries:e,get"~standard"(){return d(this)}})}function xl(...n){return v(h({},n[0]),{pipe:n,get"~standard"(){return d(this)},"~run"(t,e){for(let r of n)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!e.abortEarly&&!e.abortPipeEarly)&&(t=r["~run"](t,e))}return t}})}function Ol(...n){return v(h({},n[0]),{pipe:n,async:!0,get"~standard"(){return d(this)},async"~run"(t,e){for(let r of n)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!e.abortEarly&&!e.abortPipeEarly)&&(t=await r["~run"](t,e))}return t}})}function Al(n,t,e){let r=Array.isArray(t)?t:void 0,i=Array.isArray(t)?e:t,s={};for(let u in n.entries)s[u]=!r||r.includes(u)?Ot(n.entries[u],i):n.entries[u];return v(h({},n),{entries:s,get"~standard"(){return d(this)}})}function jl(n,t,e){let r=Array.isArray(t)?t:void 0,i=Array.isArray(t)?e:t,s={};for(let u in n.entries)s[u]=!r||r.includes(u)?At(n.entries[u],i):n.entries[u];return v(h({},n),{entries:s,get"~standard"(){return d(this)}})}function Pu(n,t,e){let r=n["~run"]({value:t},ye(e));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}async function Vu(n,t,e){let r=await n["~run"]({value:t},ye(e));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}function It(n,t){let e=r=>Pu(n,r,t);return e.schema=n,e.config=t,e}function Dl(n,t){let e=r=>Vu(n,r,t);return e.schema=n,e.config=t,e}function Il(n){let t="";for(let e of n){t&&(t+=`
`),t+=`\xD7 ${e.message}`;let r=xt(e);r&&(t+=`
  \u2192 at ${r}`)}return t}function Tl(n){return n.wrapped}var zu=oo(Nu(),1);function*Tt(n){if("pipe"in n)for(let t of n.pipe)yield*Tt(t);else"wrapped"in n?(yield n,yield*Tt(n.wrapped)):yield n}function Fu(n,t,e){let r=v(h({},e),{environments:e?.environments??["default"]}),i={lazyMap:new Map},s=new r.handle(r,void 0,void 0,i);return J(n,s),t(s)}function J(n,t){t.begin(n);let e=Tt(n),r,i=[];for(let s of e)if(s.kind==="schema")if("wrapped"in s)i.push(s);else{if(r)continue;r=s,t.defineSchema(r)}else s.kind==="metadata"?t.metadata(s,"init"):s.kind==="validation"?t.validation(s):s.kind==="transformation"&&t.transformation(s);for(let s of i.reverse())t.wrappedSchema(s);switch(t.beforeSchemaType(r),r.type){case"lazy":{t.lazySchema(r);break}case"array":{t.arraySchema(r);break}case"tuple":case"tuple_with_rest":case"loose_tuple":case"strict_tuple":{t.tupleSchema(r);break}case"object":case"object_with_rest":case"loose_object":case"strict_object":{t.objectSchema(r);break}case"record":{t.recordSchema(r.key,r.value);break}case"literal":{t.defaultSchema(r);break}case"enum":case"picklist":{t.enumSchema(r);break}case"union":case"variant":{t.unionSchema(r);break}case"intersect":{t.intersectSchema(r);break}case"any":case"unknown":{t.anySchema(r);break}case"undefined":case"null":{t.undefinedSchema(r);break}case"string":case"number":case"boolean":{t.basicSchema(r);break}case"void":case"never":{t.voidSchema(r);break}case"custom":{t.customSchema(r);break}default:t.otherSchema(r)}t.afterSchemaType(r),t.end(n)}function St(n=!0){return{kind:"metadata",type:"asControl",reference:St,value:n}}function Pt(n){return(t,e)=>({kind:"metadata",type:n,reference:Vl,value:t,workOn:e})}var Vl=Pt("rawConfig");function Vt(n){return{kind:"metadata",type:"condition",reference:Vt,value:n}}function qt(n=!0){return{kind:"metadata",type:"asVirtualGroup",reference:qt,value:n}}function Ke(n,t){"pipe"in n?n.pipe.forEach(e=>{Ke(e,t)}):"wrapped"in n?Ke(n.wrapped,t):t(n)}function ql(n){let t=!1;return Ke(n,e=>{e.kind==="metadata"&&e.type==="asControl"&&(t=e.value)}),t}function Ze(n,t){for(t=t.slice();t.length;){let e=t[0];if(ql(n))return n;switch(n.type){case"object":case"object_with_rest":case"loose_object":case"strict_object":n=n.entries[e.key];break;case"array":{n=n.item;break}case"tuple":case"tuple_with_rest":case"loose_tuple":case"strict_tuple":{n=n.items[e.key];break}case"intersect":case"variant":case"union":{for(let i=0;i<n.options.length;i++){let s=n.options[i],u=Ze(s,t);if(u)return u}break}case"nullable":case"nullish":case"exact_optional":case"optional":case"undefinedable":case"non_nullable":case"non_nullish":case"non_optional":{let i=n.wrapped,s=Ze(n.wrapped,t);return s===i?i:s}default:return n}if(!n)return;t.shift()}return n}function Mu(n){let t,e,r;return Ke(n,i=>{if(i.kind==="metadata")switch(i.type){case"title":t=i.title;break;case"metadata":r=i.metadata;break;case"description":e=i.description;break;default:break}}),{title:t,description:e,metadata:r}}function Rl(n){for(;"wrapped"in n;)n=n.wrapped;return n}function R(n){let t=Rl(n);if("entries"in t){let e={},r=x(n);for(let i in t.entries){let s=r?.[i]??R(t.entries[i]);s!==void 0&&(e[i]=s)}return Object.keys(e).length?e:void 0}if("items"in t){let e=[];for(let r=0;r<t.items.length;r++){let i=t.items[r],s=R(i);s!==void 0&&(e[r]=s)}return e.length?e:void 0}if("options"in t){if(t.type==="intersect"){let e=t.options.slice().reduce((r,i)=>h(h({},r),R(i)),{});return Object.keys(e).length?e:void 0}if(t.type==="union"||t.type==="variant")for(let e of t.options){let r=R(e);if(r!==void 0)return r}}return x(n)}var Lu=class{key;fullPath=[];children=[];parent;type;isGroup;isObjectControl=!1;arrayChild;defaultValue;props;priority=0;childrenAsVirtualGroup=!1;undefinedable=!1;nullable=!1;globalConfig;callSchemaHandle;callDefineSchema;sourceSchema;lazyWrapped;context;afterSchemaTypeList=[];constructor(n,t,e,r){this.globalConfig=n,this.callSchemaHandle=t,this.callDefineSchema=e,t&&(this.context=t.context),r&&(this.context=r)}begin(n){this.sourceSchema=n}end(n){}defineSchema(n){this.type=n.type}beforeSchemaType(n){}tupleSchema(n){if(this.isObjectControl){this.defaultValue=R(this.sourceSchema);return}this.tupleDefault(n);for(let t=0;t<n.items.length;t++){let e=n.items[t];this.objectItemSchema(e,t)}n.type==="tuple_with_rest"&&this.restSchema(n.rest),this.afterTupleSchema(n)}tupleDefault(n){}afterTupleSchema(n){}objectSchema(n){if(this.isObjectControl){this.defaultValue=R(this.sourceSchema);return}this.objectDefault(n),this.isGroup??=!0;for(let t in n.entries){let e=n.entries[t];this.objectItemSchema(e,t)}n.type==="object_with_rest"&&this.restSchema(n.rest),this.afterObjectSchema(n)}objectDefault(n){}afterObjectSchema(n){}optionalWrapSchema(n){switch(n.type){case"undefinedable":case"optional":case"exact_optional":this.undefinedable=!0;break;case"nullable":this.nullable=!0;break;case"nullish":this.nullable=!0,this.undefinedable=!0;break;default:break}}nonOptionalSchema(n){switch(n.type){case"non_nullable":this.nullable=!1;break;case"non_nullish":this.nullable=!1,this.undefinedable=!1;break;case"non_optional":this.undefinedable=!1;break;default:break}}wrappedSchema(n){"default"in n?(this.optionalWrapSchema(n),this.defaultValue=n.default):(this.nonOptionalSchema(n),delete this.defaultValue)}recordSchema(n,t){}defaultSchema(n){}enumSchema(n){}voidSchema(n){}customSchema(n){}otherSchema(n){}afterSchemaType(n){this.afterSchemaTypeList.forEach(t=>{this.metadata(t,t.workOn)})}metadataDefaulthandle(n,t,e){}metadataHandle(n,t,e){if(!(this.globalConfig.environments!==t&&this.globalConfig.environments.every(r=>!t.includes(r)))){if(e==="init"&&"workOn"in n&&n.workOn){this.afterSchemaTypeList.push(n);return}switch(n.type){case"rawConfig":{n.value(this,this.globalConfig.context);break}case"title":{this.props??={},this.props.title=n.title;break}case"description":{this.props??={},this.props.description=n.description;break}case"metadata":{this.props??={},this.props.metadata=n.metadata;break}case"asControl":{this.isObjectControl=n.value,this.isGroup=!1;break}case"asVirtualGroup":{this.isGroup=!0,this.childrenAsVirtualGroup=n.value;break}case"condition":n.value.actions.forEach(r=>{this.metadataHandle(r,n.value.environments,e)});default:this.metadataDefaulthandle(n,t,e);break}}}metadata(n,t){this.metadataHandle(n,this.globalConfig.environments,t)}validation(n){}transformation(n){}lazySchema(n){let t=this.context.lazyMap.get(n);if(t)this.lazyWrapped=t;else{let e=n.getter(void 0);t=new this.globalConfig.handle(this.globalConfig,this,e),this.context.lazyMap.set(n,t),this.lazyWrapped=t,J(e,t)}}arraySchema(n){if(this.isObjectControl)return;let t=new this.globalConfig.handle(this.globalConfig,this,n);J(n.item,t),this.arrayChild=t}objectItemSchema(n,t){let e=new this.globalConfig.handle(this.globalConfig,this,n);e.key=t,e.fullPath=[...this.fullPath,t],e.setParent(this),J(n,e)}restSchema(n){}anySchema(n){}undefinedSchema(n){}basicSchema(n){}intersectSchema(n){if(this.isObjectControl){this.defaultValue=R(this.sourceSchema);return}this.intersectBefore(n),n.options.forEach((t,e)=>{this.logicItemSchema(t,e,"intersect")})}intersectBefore(n){this.childrenAsVirtualGroup&&(this.type="intersect-group")}logicItemSchema(n,t,e){let r=new this.globalConfig.handle(this.globalConfig,this,n);r.fullPath=[...this.fullPath],r.setParent(this),J(n,r)}unionSchema(n){if(this.isObjectControl){this.defaultValue=R(this.sourceSchema);return}this.unionBefore(n),n.options.forEach((t,e)=>{this.logicItemSchema(t,e,"union")})}unionBefore(n){}setParent(n){this.parent=n,n.children??=[],n.children.push(this)}};function Nl(n){return n.type==="object"||n.type==="loose_object"||n.type==="object_with_rest"||n.type==="strict_object"}function Fl(n){return n.type==="intersect"}function Rt(n,t){if(Nl(n)){let e=h({},n.entries);for(let r in t)if(t[r]&&n.entries[r]){let i=t[r](n.entries[r]);e[r]=i}return v(h({},n),{entries:e,get"~standard"(){return d(this)}})}else if(Fl(n)){let e=[...n.options];for(let r=0;r<e.length;r++){let i=e[r];e[r]=Rt(i,t)}return v(h({},n),{options:e,get"~standard"(){return d(this)}})}throw new Error("not object or intersect")}function Gu(n){var t,e,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(t=0;t<i;t++)n[t]&&(e=Gu(n[t]))&&(r&&(r+=" "),r+=e)}else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function Ml(){for(var n,t,e=0,r="",i=arguments.length;e<i;e++)(n=arguments[e])&&(t=Gu(n))&&(r&&(r+=" "),r+=t);return r}var K=Ml;function Ft(n,t){return(Array.isArray(t)?t:[t]).every((e,r)=>e===n[r])}function Wu(n,t,e){let r=!0,i=n();return fe(()=>{let s=n();if(r){r=!1,P(i,s)||t();return}return t()},e)}function Mt(n,t,e){let r=e?.injector??A(S),i=new rn(t()),s=Wu(n,()=>{let u;try{u=t()}catch(l){O(()=>i.error(l));return}O(()=>i.next(u))},{injector:r,manualCleanup:!0});return r.get(be).onDestroy(()=>{s.destroy(),i.complete()}),i.asObservable()}var Gt=(0,zu.default)({proto:!1,circles:!1});function N(n){return ut(n)?n():n}function Bt(n){return n===void 0||Array.isArray(n)?n:[n]}var Te=class extends Array{#e;constructor(t){super(),this.#e=t}push(...t){let e=super.push(...t);return this.sort(this.#e),e}};function Bu(n){return n}var Ie="VALID",se="INVALID",q="PENDING",me=class{emptyValue$$=m(()=>Gt(this.config$().emptyValue));shouldInclude$$=m(()=>this.valueNoError$$()&&(!this.selfDisabled$$()||this.selfDisabled$$()&&this.config$().disabledValue==="reserve"));injector;selfDisabled$$=m(()=>this.config$?.().disabled??!1);selfEnabled$$=m(()=>!this.selfDisabled$$());disabled$$=m(()=>(this.parent?.disabled$$()||this.selfDisabled$$())??!1);enabled$$=m(()=>!this.disabled$$());get disabled(){return this.disabled$$()}get enabled(){return!this.disabled$$()}enable(){this.config$.update(t=>(t=v(h({},t),{disabled:!1}),v(h({},t),{disabled:!1})))}disable(){this.config$.update(t=>v(h({},t),{disabled:!0}))}selfTouched$=_(!1);touched$$=m(()=>this.reduceChildren(this.selfTouched$(),(t,e)=>e||t.touched$$(),Bu));get touched(){return O(this.touched$$)}get untouched(){return!O(this.touched$$)}selfDirty$=_(!1);dirty$$=m(()=>this.reduceChildren(this.selfDirty$(),(t,e)=>e||t.dirty$$(),Bu));get dirty(){return O(this.dirty$$)}get pristine(){return!O(this.dirty$$)}#e=m(()=>this.config$().validators??[]);#t=m(()=>this.config$().asyncValidators??[]);syncError$$=dt(m(()=>{if(this.disabled$$())return;this.value$$();let e=this.#e().reduce((i,s)=>{let u=O(()=>s(this));return u&&(i=h(h({},i),u)),i},{}),r=this.#i();return r.success?Object.keys(e).length?e:void 0:v(h({},e),{valibot:r.issues})}));asyncErrorRes$$=m(()=>{let t=this.#t();if(t.length!==0)return O(()=>ze({params:()=>this.value$$(),loader:async()=>{let r=(await Promise.all(t.map(i=>O(()=>i(this))))).reduce((i,s)=>(s&&(i=h(h({},i),s)),i),{});return Object.keys(r).length?r:void 0},injector:this.injector}))});asyncError$$=m(()=>{if(this.disabled$$())return;let e=this.asyncErrorRes$$();if(e)return e.isLoading()?q:e.value()});rawError$$=m(()=>{if(this.disabled$$())return;let e=this.syncError$$(),r=this.asyncError$$();return r===q?q:e&&r?h(h({},e),r):e||r?e||r:void 0});valueNoError$$=m(()=>this.rawError$$()===void 0);get errors(){let t=this.rawError$$();return t===q?void 0:t}_parent;get parent(){return this._parent}get value(){return this.value$$()}required$$=m(()=>this.config$().required);schemaParser;constructor(t,e){this.injector=e,this.schemaParser=It(t)}#i=m(()=>this.schemaParser(this.value$$()));setParent(t){this._parent=t}get valid(){return this.status$$()===Ie}get invalid(){return this.status$$()===se}get pending(){return this.status$$()===q}selfUpdateOn$$=m(()=>this.config$?.().updateOn);updateOn$$=m(()=>(this.selfUpdateOn$$()||this.parent?.updateOn$$())??"change");markAsTouched(){this.selfTouched$.set(!0)}markAllAsDirty(){this.markAsDirty(),this._forEachChild(t=>t.markAllAsDirty())}markAllAsTouched(){this.markAsTouched(),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(){this.selfTouched$.set(!1)}markAsDirty(){this.selfDirty$.set(!0)}markAsPristine(){this.selfDirty$.set(!1)}getRawValue(){return this.value}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r.find(i),this)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}config$=_({});initConfig(t){this.config$=t}find(t){return null}setControl(t,e){}reduceChildren(t,e,r){let i=this.children$$?.();if(!i)return t;let s=t;for(let u of i){if(r?.(s))break;s=e(u,s)}return s}#r;get valueChanges(){return this.#r??(this.#r=Mt(m(()=>({value:this.value$$(),disabled:this.disabled$$()})),this.value$$,{injector:this.injector}))}status$$=m(()=>this.disabled$$()?Ie:this.rawError$$()?this.rawError$$()!==q?se:q:this.reduceChildren(Ie,(t,e)=>e===se||t.status$$()===se?se:e===q||t.status$$()===q?q:Ie,t=>t===se));#n;get statusChanges(){return this.#n??(this.#n=Mt(this.status$$,this.status$$,{injector:this.injector}))}},ve=class extends me{#e=m(()=>this.config$().deletionMode??"shrink");value$$=m(()=>{let t=[];for(let e of this.controls$())if(e&&e.shouldInclude$$())t.push(e.value$$());else{if(this.#e()==="shrink")continue;this.#e()==="mark"&&t.push(void 0)}return t.length===0?this.emptyValue$$():t});children$$=m(()=>this.controls$());controls$=_([]);get controls(){return this.controls$()}removeAt(t){let e=this._adjustIndex(t);this.controls$()[e]&&this.controls$.update(r=>(r=r.slice(),r.splice(e,1),r))}setControl(t,e){let r=this._adjustIndex(t);this.controls$.update(i=>(i=i.slice(),i[r]=e,i)),e.setParent(this)}get length(){return this.controls$().length}reset(t=[]){this._forEachChild((e,r)=>{e.reset(t[r])})}getRawValue(){return this.controls$().map(t=>t.getRawValue())}clear(){this.controls$().length<1||this.controls$.update(()=>[])}_adjustIndex(t){return t<0?Math.max(t+this.length,0):t}_forEachChild(t){this.controls$().forEach((e,r)=>{e&&t(e,r)})}find(t){return this.controls$()[this._adjustIndex(t)]}beforeUpdateList=[];updateValue(t=[]){P(t,this.value$$())||(this.beforeUpdateList.forEach(e=>e(t)),this.controls$().forEach((e,r)=>{e.updateValue(t[r])}))}},Se=class extends me{children$$;#e=0;viewIndex$=_(0);modelValue$=_(void 0);modelValueToViewValueOrigin$$=m(()=>{let t=this.modelValue$(),e=this.config$?.().transfomer?.toView;return e?e(t,this):t});modelValueToViewValue$$=m(()=>(this.viewIndex$(),this.modelValueToViewValueOrigin$$()),{equal:()=>!1});value$$=_(void 0);reset(t=this.config$().defaultValue){this.updateValue(t),this.markAsPristine(),this.markAsUntouched()}_forEachChild(t){}#t=!0;setViewValue(t){this.#e++;let e=this.config$?.().transfomer?.toModel,r=e?e(t,this):t,i=this.schemaParser(r);i.success?(this.value$$.set(i.output),this.syncError$$.set(void 0)):this.syncError$$.set({valibot:i.issues}),this.markAllAsDirty()}updateValue(t){if(this.#t){this.#t=!1,t!==void 0&&!P(t,this.value$$())&&(this.modelValue$.set(t),this.value$$.set(t));return}P(t,this.value$$())||(this.viewIndex$.set(this.#e),this.modelValue$.set(t),this.value$$.set(t))}initConfig(t){super.initConfig(t),"defaultValue"in this.config$()&&(this.modelValue$.set(this.config$().defaultValue),this.value$$.set(this.config$().defaultValue))}},Pe=class extends ve{activateIndex$=_(0);type=_("and");activateControl$=_(void 0);value$$=m(()=>this.getValue(!1));getActivateControls(){let t;if(this.activateControl$())t=this.activateControl$();else if(this.type()==="and")t=this.controls$();else if(this.type()==="or")t=[this.controls$()[this.activateIndex$()]];else throw new Error("");return t}getValue(t){let e=t?this.getActivateControls():this.getActivateControls().filter(s=>s.shouldInclude$$()),r=e[0];if(e.length===0)return this.emptyValue$$();if(e.length===1)return r.value;let i=e.reduce((s,u)=>h(h({},s),u.value$$()),{});return Object.keys(i).length?i:this.emptyValue$$()}getRawValue(){return this.getValue(!0)}updateValue(t){P(t,this.value$$())||this.controls$().forEach((e,r)=>{e.updateValue(t)})}};function Ll(n){return n instanceof qe}function Uu(n){return n instanceof ve}function Gl(n){return n instanceof Se}function Ve(n){return n instanceof Pe}var qe=class extends me{value$$=m(()=>{let t={},e=this._reduceChildren(t,(i,s,u)=>(s.shouldInclude$$()&&(i[u]=s.value),i)),r=h(h({},e),this.looseValue$$());return Object.keys(r).length?r:this.emptyValue$$()});children$$=m(()=>Object.values(this.controls$()));controls$=_({});get controls(){return this.controls$()}registerControl(t,e){return this.controls$()[t]?this.controls$()[t]:(this.controls$.update(r=>v(h({},r),{[t]:e})),e.setParent(this),e)}removeControl(t){this.controls$()[t]&&this.controls$.update(e=>(e=h({},e),delete e[t],e))}setControl(t,e){this.controls$.update(r=>(r=h({},r),delete r[t],r)),e&&this.registerControl(t,e)}reset(t={}){this._forEachChild((e,r)=>{e.reset(t?t[r]:void 0)})}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_forEachChild(t){Object.keys(this.controls$()).forEach(e=>{let r=this.controls$()[e];r&&t(r,e)})}_reduceChildren(t,e){let r=t;return this._forEachChild((i,s)=>{r=e(r,i,s)}),r}find(t){return this.controls$()[t]}looseValue$$=m(()=>{let t=this.#e();if(!t||Ve(this.parent))return{};let e=this.controls$(),r={};for(let i in t)i in e||(r[i]=t[i]);return r});#e=_({});setInitValue(t){this.#e.set(t)}updateValue(t){if(!P(t,this.value$$())){for(let e in this.controls$())this.controls$()[e].updateValue(t?.[e]);if(!P(t,this.#e())){this.setInitValue(t);return}}}},Ne=new L("PI_VIEW_CONFIG"),zt=new L("PI_FORM_BUILDER_OPTIONS"),Lt=new L("PI_FORM_BUILDER_ALIAS_MAP");function Ye(n){return n.isGroup}function Wt(n){return n.isArray}function Bl(n,t,e,r,i,s){let u;t.isLogicAnd||t.isLogicOr?u=Pe:Ye(t)?u=qe:Wt(t)||t.isTuple?u=ve:u=Se;let l;return i?(l=new u(t.sourceSchema,s),Ve(l)&&l.type.set(t.isLogicAnd?"and":"or"),l.initConfig(r)):(l=n.get([e]),l||(l=new u(t.sourceSchema,s),Ve(l)&&l.type.set(t.isLogicAnd?"and":"or"),n.setControl?.(e,l),l.initConfig(r))),l}function Qe(n){return ut(n)?n():n}var ie={props:"merge",formConfig:"merge",renderConfig:"merge",inputs:"merge",outputs:"merge",wrappers:"replace",attributes:"merge"},et=class extends Map{parent;constructor(t){super(),this.parent=t}get(t){let e=super.get(t);return e===void 0?this.parent?.get(t):e}};function*Xu(n){for(let t of n)!t.keyPath?.length&&t.fieldGroup?.().length?yield*Xu(t.fieldGroup()):t.keyPath?.length&&(yield t)}function Nt(n,t,e,r,i){let s=Array.isArray(n)?n:typeof n=="number"?[n]:n.split("."),u=s[0],l;if(u==="#")t=r,l=[{field:r,level:1}];else if(u==="..")l=[{field:t.parent,level:1}];else if(typeof u=="string"&&u.startsWith("@")){let o=e.get(u.slice(1));!o&&i&&(o=i(u.slice(1),t)),l=[{field:o,level:1}]}else t.fieldGroup?l=Xu(t.fieldGroup()).filter(o=>o.keyPath&&Ft(s,o.keyPath)).map(o=>({field:o,level:o.keyPath?.length})):t.fieldArray&&(l=t.fieldArray().filter(o=>o.keyPath&&Ft(s,o.keyPath)).map(o=>({field:o,level:o.keyPath?.length})));if(l)for(let o of l){if(s.length===o.level)return o.field;let a=o.field.get(s.slice(o.level),i);if(a)return a}}var Re=class{#e=A(Lt,{optional:!0})??new et;#t=A(zt);#i=A(S);#r=A(G);#n=A(Ne,{optional:!0})??void 0;#s=[];buildRoot(t){let e=this.#l({type:"root",field:{fullPath:[]},form:void 0,resolvedField$:t.resolvedField$,append:()=>{}},t.field,0);this.allFieldInitHookCall()}allFieldInitHookCall(){let t=this.#s;this.#s=[],t.forEach(e=>e())}#u(t){t.type==="group"?this.#o(t):this.#c(t)}afterResolveConfig(t,e){}#l(t,e,r){let i,s=e.type,u;if(s){let M=this.#a(s);i=M.defaultConfig,u=M.define}let l=this.#n?.defaultConfigMergeStrategy,o=this.configMerge([this.#n?.defaultConfig?.inputs,i?.inputs,e.inputs],!1,typeof l=="string"?l:l?.inputs??ie.inputs),a=this.configMerge([this.#n?.defaultConfig?.outputs,i?.outputs,e.outputs],!1,typeof l=="string"?l:l?.outputs??ie.outputs),c=this.configMerge([this.#n?.defaultConfig?.attributes,i?.attributes,e.attributes],!1,typeof l=="string"?l:l?.attributes??ie.attributes),p=this.configMerge([this.#n?.defaultConfig?.wrappers,i?.wrappers,e.wrappers],!0,typeof l=="string"?l:l?.wrappers??ie.wrappers),y=this.configMerge([this.#n?.defaultConfig?.props,e.props],!1,typeof l=="string"?l:l?.props??ie.props),b=this.configMerge([this.#n?.defaultConfig?.formConfig,i?.formConfig,e.formConfig],!1,typeof l=="string"?l:l?.formConfig??ie.formConfig),k=this.configMerge([this.#n?.defaultConfig?.renderConfig,i?.renderConfig,e.renderConfig],!1,typeof l=="string"?l:l?.renderConfig??ie.renderConfig),C,g=e.key;Ve(t.form)?g??=t.form.controls$().length:Uu(t.form)&&(g??=r);let j=t.type==="root";!e.nonFieldControl&&(g!==void 0||j)&&(C=Bl(t.form,e,g,b,j,this.#i));let U=this.#t.form$$,$={id:e.id,keyPath:Bt(g),get fullPath(){return[...$.parent.fullPath,...$.keyPath??[]]},form:{parent:t.form,control:C??(Ye(e)?t.form:void 0),get root(){return U()}},get:(M,nt)=>O(()=>Nt(M,$,this.#e,this.#t.resolvedField$(),nt)),parent:t.field,origin:e,renderConfig:k,formConfig:b,props:y,context:this.#t.context(),priority:e.priority,hooks:e.hooks,alias:e.alias,inputs:o,outputs:a,attributes:c,define:u?v(h({},u),{inputs:o,outputs:a,attributes:c}):void 0,wrappers:p,wrappers$$:m(()=>this.#f(p()))};return $=this.afterResolveConfig(e,$)??$,e.movePath?this.moveViewField(e.movePath,$):t.append($),e.alias&&this.#e.set(e.alias,$),$.hooks?.fieldResolved?.($),j&&t.resolvedField$.set($),Ye(e)||e.isLogicAnd||e.isLogicOr||e.isTuple?($.fieldGroup=_(new Te((M,nt)=>M.priority-nt.priority)),this.#u({type:"group",fields:e.children,field:$,form:C||t.form,append:M=>{$.fieldGroup().push(M)}})):Wt(e)&&this.#u({type:"array",templateField:e.arrayChild,field:$,form:C,append:M=>{}}),$.hooks?.allFieldsResolved&&this.#s.push(()=>{$.hooks.allFieldsResolved($)}),$}#o(t){for(let r=0;r<t.fields.length;r++){let i=t.fields[r];this.#l(t,i,r)}let e=t.field;e.hooks?.afterChildrenInit?.(e)}createArrayItem(t,e,r){let i=this.constructor,s=S.create({providers:[i,{provide:Lt,useValue:new et(this.#e)},{provide:G,useFactory:()=>s}],parent:this.#r});this.#r.get(be).onDestroy(()=>{l.injector?.destroy()});let u=s.get(i),l=u.#l(t,e,r);return this.#s.push(()=>u.allFieldInitHookCall()),l.injector=s.get(G),l}#c(t){let{templateField:e,form:r}=t;t.field.action={set:(i,s)=>{O(()=>{s=typeof s=="number"?s:t.field.fieldArray?.().length??0;let u=this.createArrayItem(t,e,s),l=[...t.field.fieldArray()];l[s]=u,t.field.fieldArray.set(l),this.allFieldInitHookCall(),u.form.control.updateValue(i)})},remove:i=>{O(()=>{let s=[...t.field.fieldArray()],[u]=s.splice(i,1);t.field.fieldArray.set(s),r.removeAt(i),u&&(u.injector.destroy(),u.injector=void 0)})}},t.field.fieldArray=_([]),t.field.hooks?.afterChildrenInit?.(t.field),r.beforeUpdateList.push(i=>{let s=r.controls$().length;if(s<i.length){let u=t.field.fieldArray().slice();for(let l=s;l<i.length;l++){let o=this.createArrayItem(t,t.templateField,l);u[l]=o}t.field.fieldArray.set(u)}else if(i.length<s){let u=t.field.fieldArray().slice();for(let l=t.field.fieldArray().length-1;l>=i.length;l--){let[o]=u.splice(l,1);r.removeAt(l),o&&(o.injector?.destroy(),o.injector=void 0)}t.field.fieldArray.set(u)}this.allFieldInitHookCall()})}#a(t){let e,r;if(typeof t=="string"){let i=this.#n?.types?.[t];if(!i)throw new Error(`define:\u672A\u6CE8\u518C[${t}]`);if(r=i,Object.keys(i).length)return e=h({},i),{define:h({},i),defaultConfig:r}}else return{define:{type:t}};return{define:e,defaultConfig:r}}configMerge(t,e,r){let i;return e?r==="merge"?i=t.filter(Boolean).flat().map(s=>Qe(s)):i=t.reduce((s,u)=>Qe(u)??s,[]):r==="merge"?i=t.reduce((s,u)=>h(h({},s),Qe(u)),{}):i=t.reduce((s,u)=>Qe(u)??s,{}),_(Gt(i))}moveViewField(t,e){let r=Nt(t,e,this.#e,this.#t.resolvedField$(),(u,l)=>{let o=this.#t.form$$,a={alias:u,parent:l,get fullPath(){return l.fullPath},form:{parent:l.form.control??l.form.parent,control:void 0,get root(){return o()}},get:(c,p)=>Nt(c,a,this.#e,this.#t.resolvedField$(),p),fieldGroup:_(new Te((c,p)=>c.priority-p.priority)),priority:0,renderConfig:_({}),wrappers$$:_([])};if(this.#e.set(u,a),e===l)throw new Error("\u6DFB\u52A0\u4F4D\u7F6E\u4E0D\u53EF\u4E3A\u81EA\u8EAB");return l.fieldGroup().push(a),a});if(!r)throw new Error("\u79FB\u52A8\u89C6\u56FE\u9879\u5931\u8D25");let i=e.parent.fieldGroup?.().findIndex(u=>u===e);typeof i=="number"&&i!==-1&&e.parent.fieldGroup?.().splice(i,1);let s=e.fullPath.slice(r.fullPath.length);e.keyPath=s,e.parent=r,r.fieldGroup().push(e)}#f(t){return(t??[]).map(e=>{if(typeof e=="string"){let r=this.#n?.wrappers?.[e];if(!r)throw new Error(`wrapper:\u672A\u6CE8\u518C[${e}]`);return v(h({},r),{inputs:_(r.inputs),attributes:_(r.attributes)})}else if(typeof e.type=="string"){let r=this.#n?.wrappers?.[e.type];if(!r)throw new Error(`wrapper:\u672A\u6CE8\u518C[${e.type}]`);return{inputs:_(h(h({},r.inputs),e.inputs)),outputs:h(h({},r.outputs),e.outputs),attributes:_(h(h({},r.attributes),e.attributes)),type:r.type}}else return v(h({},e),{inputs:_(e.inputs),attributes:_(e.attributes)})})}};function Hu(n){return{kind:"metadata",type:"layout",reference:Hu,value:n}}var E=Pt("viewRawConfig");function zl(n){return E(t=>{t.type=n})}var Wl=n=>E(t=>{t.hooks=n}),Ul=n=>E(t=>{t.hooks=h(h({},t.hooks),n)}),Xl={position:"bottom"};function F(n,t,e){e.hooks??={};for(let r in n){let i=e.hooks[r];e.hooks[r]=(...s)=>{t.position==="top"&&n[r](...s),i?.(...s),t.position==="bottom"&&n[r](...s)}}}var Hl=(n,t=Xl)=>E(e=>F(n,t,e));function Jl(n){return E(t=>{let e=t.hooks;e&&(n.forEach(r=>{delete e[r]}),t.hooks=e)})}function Kl(n){return!!n&&typeof n.then=="function"}function Zl(n){return!!n&&typeof n.subscribe=="function"}function Ql(n){return E(t=>{t.inputs=n})}function Yl(n){return E(t=>{let e=N(t.inputs);t.inputs=m(()=>h(h({},e),N(n)))})}function ea(n){return E(t=>{let e=N(t.inputs);e&&(n.forEach(r=>{delete e[r]}),t.inputs=e)})}function ta(n,t){return E(e=>{let r=Object.keys(n),i=t?.hookName??"fieldResolved";return e.inputs=h(h({},e.inputs),r.reduce((s,u)=>(s[u]=void 0,s),{})),F({[i]:s=>{r.forEach(u=>{let l=n[u](s);Kl(l)?l.then(o=>{s.inputs.update(a=>(a=h({},a),a[u]=o,a))}):Zl(l)?l.subscribe({next:o=>{s.inputs.update(a=>(a=h({},a),a[u]=o,a))}}):s.inputs.update(o=>(o=h({},o),o[u]=l,o))})}},{position:t?.addPosition??"bottom"},e)})}function na(n,t){return E(e=>{let r=Object.keys(n),i=t?.hookName??"fieldResolved";return F({[i]:s=>{let u=s.inputs;s.inputs=dt(m(()=>h(h({},u()),r.reduce((l,o)=>v(h({},l),{[o]:n[o]()}),{}))))}},{position:t?.addPosition??"bottom"},e)})}function ra(n){return E(t=>{t.outputs=n})}function ia(n){return E(t=>{let e=t.outputs;t.outputs=h(h({},e),n)})}function sa(n){return E(t=>{let e=t.outputs;e&&(n.forEach(r=>{delete e[r]}),t.outputs=e)})}function Ut(n,t,e){n.outputs.update(r=>{r=h({},r);for(let i in t){let s=r[i];r[i]=(...u)=>{e.position==="top"&&t[i](...u,n),s?.(...u,n),e.position==="bottom"&&t[i](...u,n)}}return r})}var ua={position:"bottom"},oa=(n,t=ua)=>E(e=>{F({allFieldsResolved:r=>{Ut(r,n,t)}},{position:"bottom"},e)});function Ju(n,t){F({allFieldsResolved:e=>t(r=>{let i=[];for(let s of r){let u=s.list?e.get(s.list):e,l=new nn;Ut(e,{[s.output]:(...o)=>{l.next(o)}},{position:"bottom"}),i.push({subject:l,field:u})}return it(i.map(({subject:s})=>s.pipe(sn(void 0)))).pipe(st(1),rt(s=>({list:s,field:e,listenFields:i.map(u=>u.field)})))})},{position:"bottom"},n)}function la(n){return E(t=>Ju(t,n))}function aa(n){return E(t=>{t.wrappers=n})}var ca={position:"tail"};function fa(n,t=ca){return E(e=>{let r=Bt(n);e.wrappers??=[],t.position==="tail"?e.wrappers.push(...r):e.wrappers.unshift(...r)})}function pa(n){return E(t=>{if(!t.wrappers)return;let e=t.wrappers;for(let r=0;r<n.length;r++){let i=n[r];for(let s=0;s<e.length;s++){let u=e[s];if((typeof u=="string"?u:u.type)===i){e.splice(s,1);break}}}t.wrappers=e})}function ha(n){return E(t=>{t.alias=n})}function ya(n){return E(t=>{t.renderConfig=n})}function da(n){return E(t=>{t.formConfig=h(h({},t.formConfig),n)})}function ma(n){return E(t=>{t.attributes=n})}function va(n){return E(t=>{let e=N(t.attributes);t.attributes=m(()=>h(h({},e),N(n)))})}function ga(n){return E(t=>{let e=N(t.attributes);e&&(n.forEach(r=>{delete e[r]}),t.attributes=e)})}var ba=[void 0];function tt(n,t={}){let e=(t.list??ba).map(r=>r?n.get(r).form.control:n.form.control);return it(e.map(r=>t.skipInitValue?r.valueChanges.pipe(st(1)):r.valueChanges)).pipe(rt(r=>({list:r,field:n,listenFields:r})))}function ka(n){return E(t=>{F({allFieldsResolved:e=>{n(r=>tt(e,r),e)}},{position:"bottom"},t)})}function Ca(n){return E(t=>(F({allFieldsResolved:e=>{n.listen(r=>tt(e,r)).subscribe(r=>{e.renderConfig.update(i=>!!i.hidden!==r?v(h({},i),{hidden:r}):i),n.disabled!==void 0&&e.formConfig&&e.formConfig.update(i=>(i=h({},i),i.disabled=r?n.disabled:!1,i))})}},{position:"bottom"},t),t))}function $a(n){return E(t=>(F({allFieldsResolved:e=>{n.listen(r=>tt(e,r)).subscribe(r=>{e.formConfig().disabled!==r&&e.formConfig.update(i=>v(h({},i),{disabled:r}))})}},{position:"bottom"},t),t))}function Ea(n,t){return E(e=>{F({fieldResolved:r=>{let i=r.wrappers();i?.length?typeof i[0]=="string"?i[0]={type:i[0],attributes:{class:K(n)}}:i[0]=v(h({},i[0]),{attributes:v(h({},i[0].attributes),{class:t?K(i[0].attributes?.class,n):K(n)})}):r.attributes.update(s=>v(h({},s),{class:t?K(s?.class,n):K(n)}))}},{position:"bottom"},e)})}function _a(n,t){return E(e=>{e.attributes=v(h({},e.attributes),{class:t?K(e.attributes?.class,n):K(n)})})}function Ku(n=!0){return{kind:"metadata",type:"nonFieldControl",reference:Ku,value:n}}var ge=class extends Lu{inputs;outputs;wrappers;attributes;alias;movePath;renderConfig;formConfig={};id;isLogicAnd=!1;isLogicOr=!1;isArray=!1;isTuple=!1;nonFieldControl=!1;hooks;lazySchema(t){super.lazySchema(t),this.type=this.lazyWrapped.type}arraySchema(t){if(!this.isObjectControl){this.isArray=!0;let e=new this.globalConfig.handle(this.globalConfig,this,t);e.fullPath=[],J(t.item,e),this.arrayChild=e}}defaultSchema(t){this.defaultValue=t.literal}tupleDefault(t){super.tupleDefault(t),this.isTuple=!0}enumSchema(t){this.props??={},this.props.options??=t.options}intersectBefore(t){this.childrenAsVirtualGroup?this.type==="intersect"&&(this.type="intersect-group"):this.isLogicAnd=!0}logicItemSchema(t,e,r){let i=new this.globalConfig.handle(this.globalConfig,this,t);this.childrenAsVirtualGroup?i.fullPath=[...this.fullPath]:(i.key=e,i.fullPath=[...this.fullPath,e]),i.setParent(this),J(t,i)}unionBefore(t){this.childrenAsVirtualGroup||(this.isLogicOr=!0)}beforeSchemaType(t){super.beforeSchemaType(t),this.formConfig.required=!this.undefinedable&&!this.nullable}voidSchema(t){this.nonFieldControl=!0}metadataDefaulthandle(t,e){switch(t.type){case"viewRawConfig":{t.value(this,this.globalConfig.context);break}case"layout":{this.movePath=t.value.keyPath,this.priority=t.value.priority;break}case"nonFieldControl":{this.nonFieldControl=t.value;break}default:break}}end(t){super.end(t),this.formConfig.defaultValue=this.defaultValue}};function Xt(n,t){let e={form$$:m(()=>e.resolvedField$()?.form.control),resolvedField$:_(void 0),context:m(()=>t.context)},r=S.create({providers:[{provide:zt,useValue:e},{provide:Ne,useValue:t.fieldGlobalConfig},t.builder,{provide:G,useFactory:()=>r}],parent:t.injector});return t.registerOnDestroy?.(()=>{r.get(G).destroy()}),Fu(n,i=>(r.get(t.builder).buildRoot({field:i,resolvedField$:e.resolvedField$}),e.resolvedField$()),v(h({},t),{handle:t?.handle??ge}))}var wa=De(Je());var to=n=>({$implicit:n}),Oa=(n,t)=>t.id||n;function Aa(n,t){n&1&&ce(0)}function ja(n,t){if(n&1&&oe(0,Aa,1,0,"ng-container",0),n&2){let e=t.$implicit,r=D();X("ngTemplateOutlet",r.fieldTemplateRef())("ngTemplateOutletContext",ht(2,to,e))}}function Da(n,t){if(n&1&&(ce(0,1),B(1,"pure"),B(2,"pure")),n&2){let e;D(3);let r=Y(2),i=Y(5),s=D().$implicit,u=D(),l=Ge(1);X("ngComponentOutlet",r)("ngComponentOutletInputs",(e=yt(1,7,u.groupInputsValue,s.inputs,s.fieldGroup(),l))==null?null:e())("ngComponentOutletOutputs",s.outputs())("ngComponentOutletWrappers",i)("ngComponentOutletField",s)("ngComponentOutletDirectives",s.directives)("ngComponentOutletTopDirectives",ee(2,12,u.topDirectives,s.renderConfig))}}function Ia(n,t){if(n&1&&(le(0,Da,3,15,"ng-container",1),B(1,"pure")),n&2){let e=D(3).$implicit,r=D();ae(ee(1,1,r.groupHidden,e)()?-1:0)}}function Ta(n,t){if(n&1&&(ce(0,1),B(1,"pure"),B(2,"pure")),n&2){let e;D(2);let r=Y(2),i=Y(5),s=D().$implicit,u=D(),l=Ge(1);X("ngComponentOutlet",r)("ngComponentOutletInputs",(e=yt(1,7,u.groupInputsValue,s.inputs,s.fieldArray(),l))==null?null:e())("ngComponentOutletOutputs",s.outputs())("ngComponentOutletWrappers",i)("ngComponentOutletField",s)("ngComponentOutletDirectives",s.directives)("ngComponentOutletTopDirectives",ee(2,12,u.topDirectives,s.renderConfig))}}function Sa(n,t){if(n&1&&(ce(0,2),B(1,"pure")),n&2){D(2);let e=Y(2),r=Y(5),i=D().$implicit,s=D();X("ngComponentOutlet",e)("ngComponentOutletInputs",i.inputs())("ngComponentOutletOutputs",i.outputs())("ngComponentOutletFormControl",i.form.control)("ngComponentOutletWrappers",r)("ngComponentOutletField",i)("ngComponentOutletDirectives",i.directives)("ngComponentOutletTopDirectives",ee(1,9,s.topDirectives,i.renderConfig))("ngComponentOutletContent",i.contents)}}function Pa(n,t){if(n&1&&le(0,Ia,2,4)(1,Ta,3,15,"ng-container",1)(2,Sa,2,12,"ng-container",2),n&2){let e=D(2).$implicit;ae(e.fieldGroup?0:e.fieldArray?1:2)}}function Va(n,t){if(n&1&&(Be(0),B(1,"pure"),Be(2)(3),B(4,"pure"),Be(5),le(6,Pa,3,1)),n&2){let e=D().$implicit,r=D(),i=ee(1,1,r.resolvedComponent,e.define);Ce(2);let s=pt(i.value()),u=ee(4,5,r.resolvedWrapper,e.wrappers$$());Ce(3),pt(u.value()),Ce(),ae(s?6:-1)}}function qa(n,t){if(n&1&&le(0,Va,7,9),n&2){let r=t.$implicit.renderConfig();ae(r!=null&&r.hidden?-1:0)}}function Ra(n,t){n&1&&ce(0)}function Na(n,t){if(n&1&&oe(0,Ra,1,0,"ng-container",3),n&2){D();let e=Ge(1);X("ngTemplateOutlet",e)("ngTemplateOutletContext",ht(2,to,t))}}var Fa=["fieldComponent"],Ma=(()=>{class n{fields=I.required();fieldTemplateRef=I.required();static \u0275fac=function(r){return new(r||n)};static \u0275dir=ue({type:n,inputs:{fields:[1,"fields"],fieldTemplateRef:[1,"fieldTemplateRef"]}})}return n})(),Fc=(()=>{class n extends Ma{static \u0275fac=(()=>{let e;return function(i){return(e||(e=ke(n)))(i||n)}})();static \u0275cmp=$e({type:n,selectors:[["piying-view-group"]],features:[Me],decls:2,vars:0,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,i){r&1&&fn(0,ja,1,4,"ng-container",null,Oa),r&2&&pn(i.fields())},dependencies:[vt],encapsulation:2,changeDetection:0})}return n})(),en=new L("PI_VIEW_FIELD_TOKEN"),no=new L("PI_COMPONENT_LIST"),Jt=new L("PI_COMPONENT_INDEX"),ro=new L("PI_COMPONENT_LIST_LISTEN"),La=[],Ga={directives:"merge",formConfig:"merge",inputs:"merge",outputs:"merge",props:"merge",renderConfig:"merge",wrappers:"replace",attributes:"merge"};function Zu(n){return v(h({},n),{inputs:Object.keys(n.inputs()??{}).join(","),attributes:Object.keys(n.attributes()??{}).join(","),directives:n.directives?n.directives.map(t=>v(h({},t),{inputs:`${t.inputs?Object.keys(t.inputs()).join(","):""}`})):void 0,contents:n.contents?.map(t=>v(h({},t),{text:!!t.text}))})}var Qu=new RegExp(`(\\:not\\()|(([\\.\\#]?)[-\\w]+)|(?:\\[([-.\\w*\\\\$]+)(?:=(["']?)([^\\]"']*)\\5)?\\])|(\\))|(\\s*,\\s*)`,"g"),Z=function(n){return n[n.ALL=0]="ALL",n[n.NOT=1]="NOT",n[n.TAG=2]="TAG",n[n.PREFIX=3]="PREFIX",n[n.ATTRIBUTE=4]="ATTRIBUTE",n[n.ATTRIBUTE_STRING=5]="ATTRIBUTE_STRING",n[n.ATTRIBUTE_VALUE=6]="ATTRIBUTE_VALUE",n[n.NOT_END=7]="NOT_END",n[n.SEPARATOR=8]="SEPARATOR",n}(Z||{}),Kt=class n{element=null;classNames=[];attrs=[];notSelectors=[];static parse(t){let e=[],r=(o,a)=>{a.notSelectors.length>0&&!a.element&&a.classNames.length==0&&a.attrs.length==0&&(a.element="*"),o.push(a)},i=new n,s,u=i,l=!1;for(Qu.lastIndex=0;s=Qu.exec(t);){if(s[Z.NOT]){if(l)throw new Error("Nesting :not in a selector is not allowed");l=!0,u=new n,i.notSelectors.push(u)}let o=s[Z.TAG];if(o){let c=s[Z.PREFIX];c==="#"?u.addAttribute("id",o.slice(1)):c==="."?u.addClassName(o.slice(1)):u.setElement(o)}let a=s[Z.ATTRIBUTE];if(a&&u.addAttribute(u.unescapeAttribute(a),s[Z.ATTRIBUTE_VALUE]),s[Z.NOT_END]&&(l=!1,u=i),s[Z.SEPARATOR]){if(l)throw new Error("Multiple selectors in :not are not supported");r(e,i),i=u=new n}}return r(e,i),e}unescapeAttribute(t){let e="",r=!1;for(let i=0;i<t.length;i++){let s=t.charAt(i);if(s==="\\"){r=!0;continue}if(s==="$"&&!r)throw new Error(`Error in attribute selector "${t}". Unescaped "$" is not supported. Please escape with "\\$".`);r=!1,e+=s}return e}escapeAttribute(t){return t.replace(/\\/g,"\\\\").replace(/\$/g,"\\$")}setElement(t=null){this.element=t}addAttribute(t,e=""){this.attrs.push(t,e&&e.toLowerCase()||"")}addClassName(t){this.classNames.push(t.toLowerCase())}toString(){let t=this.element||"";if(this.classNames&&this.classNames.forEach(e=>t+=`.${e}`),this.attrs)for(let e=0;e<this.attrs.length;e+=2){let r=this.escapeAttribute(this.attrs[e]),i=this.attrs[e+1];t+=`[${r}${i?"="+i:""}]`}return this.notSelectors.forEach(e=>t+=`:not(${e})`),t}},W=function(n){return n[n.NOT=1]="NOT",n[n.ATTRIBUTE=2]="ATTRIBUTE",n[n.ELEMENT=4]="ELEMENT",n[n.CLASS=8]="CLASS",n}(W||{});function Ba(n){let t=n.classNames&&n.classNames.length?[W.CLASS,...n.classNames]:[];return[n.element&&n.element!=="*"?n.element:"",...n.attrs,...t]}function za(n){let t=n.classNames&&n.classNames.length?[W.CLASS,...n.classNames]:[];return n.element?[W.NOT|W.ELEMENT,n.element,...n.attrs,...t]:n.attrs.length?[W.NOT|W.ATTRIBUTE,...n.attrs,...t]:n.classNames&&n.classNames.length?[W.NOT|W.CLASS,...n.classNames]:[]}function Wa(n){let t=Ba(n),e=n.notSelectors&&n.notSelectors.length?n.notSelectors.map(r=>za(r)):[];return t.concat(...e)}function Ua(n){return n?Kt.parse(n).map(Wa):[]}function Xa(n,t){let e=0,r=[],i=[],s=[],u=[],l=[],o;if(typeof n.type=="string")o=n.type;else{let p=mt(n.type);o=n.selector??p.selector,i.push(n.type)}if(!o)throw new Error("\u672A\u627E\u5230\u5143\u7D20\u5BF9\u5E94\u7684\u9009\u62E9\u5668");let a=n.attributes?.();if(a)for(let p in a)r.push(p,a[p]);let c=[n,...t];for(let p=0;p<c.length;p++){let y=c[p];if(p>0){i.push(y.type);let k=y.type.\u0275dir.selectors,C=y.selector??k.find(g=>g.length===3&&g[0]===""&&g[2]==="")[1];(y.inputs&&!(C in y.inputs())||!y.inputs)&&(y.model&&!(C in y.model)||!y.model)&&r.push(C,"")}if(y.inputs){s[p]={signal:y.inputs,keyList:[]};for(let b in y.inputs())e++,s[p].keyList.push(b)}for(let b in y.outputs)u.push({eventName:b,listenerFn:y.outputs[b]});for(let b in y.model)e++,l.push({key:b,eventName:`${b}Change`,signal:y.model[b]})}return r.push(3),r.push(...new Set([...u.map(({eventName:p})=>p),...l.map(({eventName:p})=>p)])),r.push(...new Set([...s.flatMap(p=>p.keyList),...l.map(({key:p})=>p)])),{vars:e,consts:[["el",""],r],directiveList:i,propertyList:s,listenerList:u,modelList:l,elementTag:o}}var Ht=["el"],Ha=0;function Ja(n,t){let e=Xa(n,t),r,i;n.contents?.length&&(r=new Array(n.contents.length).fill("*"));function s(u,l){u&1&&(hn(0,e.elementTag,1,0),e.listenerList.reduce((o,a)=>o(a.eventName,a.listenerFn),ct),e.modelList.reduce((o,a)=>o(a.eventName,c=>{bn(a.signal,c)}),ct),n.contents?.length&&n.contents.forEach((o,a)=>{o.select?ft(a+2,a,["ngProjectAs",o.select,5,Ua(o.select)[0]],o.text?(c,p)=>{c&1&&mn(0),c&2&&vn(o.text())}:void 0,o.text?1:void 0,o.text?1:void 0):ft(a+1,a)}),yn()),u&2&&(e.propertyList.reduce((o,{signal:a,keyList:c})=>{let p=a();return c.reduce((y,b)=>y(b,p[b]),o)},X),e.modelList.reduce((o,a)=>o(a.key,a.signal),gn))}return class Zt{templateRef=pe.required(at);componentInstance=pe("el");elementRef=pe("el",{read:lt});directiveRefList=t.map(({type:l})=>pe("el",{read:l}));static \u0275fac=l=>new(l||Zt);static \u0275cmp=$e({type:Zt,selectors:[[`d-${Ha++}`]],ngContentSelectors:r,decls:1,vars:0,consts:e.consts,template:(l,o)=>{l&1&&(r&&dn(r),oe(0,s,2+(n.contents?.length??0),e.vars,"ng-template"))},viewQuery:(l,o)=>{l&1&&(Q(o.templateRef,at,5),Q(o.componentInstance,Ht,5),Q(o.elementRef,Ht,5,lt),t.forEach(({type:a},c)=>{Q(o.directiveRefList[c],Ht,5,a)})),l&2&&Le(3+t.length)},dependencies:e.directiveList,encapsulation:2,changeDetection:0})}}var Ka={},io=(()=>{class n{#e=A(Jt,{optional:!0});#t;#i;#r;destroyComponentFn;fieldComponentInstance;fieldElementRef;fieldDirectiveRefList;#n;#s(e){this.#n=m(()=>O(()=>Zu(e)))}setFieldData(e,r){this.#e=r}#u;#l;#o=_(0);createComponent(e,r){this.destroyComponentFn?.(),this.#r=r,this.#t=new cn;let i=e[this.#e];this.#i=i,this.#u={inputs:m(()=>(this.#o(),this.#i.inputs()??Ka)),directiveList:this.#i?.directives?.map((o,a)=>o.inputs?m(()=>(this.#o(),this.#i.directives[a].inputs())):void 0)},this.#l=i.contents?.map((o,a)=>o.text?v(h({},o),{text:m(()=>(this.#o(),this.#i.contents[a].text()))}):o),this.#s(i);let s=Ja(v(h({},i),{inputs:this.#u.inputs,contents:this.#l}),i.directives?.map((o,a)=>v(h({},o),{inputs:this.#u.directiveList[a]}))??[]),u=S.create({providers:[{provide:no,useValue:e},{provide:Jt,useValue:this.#e+1},{provide:ro,useValue:this.#t}],parent:i.injector??r.injector}),l=En(s,{elementInjector:u,environmentInjector:u.get(G),projectableNodes:i.contents?.map(({nodes:o})=>o).filter(Boolean)});if(r.createEmbeddedView(l.instance.templateRef()),this.fieldComponentInstance=l.instance.componentInstance(),this.fieldElementRef=l.instance.elementRef(),this.fieldDirectiveRefList=l.instance.directiveRefList.map(o=>o()),this.destroyComponentFn=()=>{r.clear(),l.destroy(),this.#t.unsubscribe()},e.length===this.#e+1){let o=u.get(en)();o.hooks?.afterCreateComponent?.(o)}}update(e){let r=e[this.#e],i=Zu(r);P(i,this.#n())?(this.#i=r,this.#o.update(u=>u+1),this.#t.next(e)):this.createComponent(e,this.#r)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ue({type:n})}return n})();function Za(n,t){if(typeof n=="string")n=n.trim().split(/\s+/);else if(!n)return t??[];return typeof t=="string"&&(t=t.trim().split(/\s+/)),new Set([...n,...t??[]])}var Qt=class extends gt{field;constructor(t){super(),this.field=t}control=this;get value(){return this.field().value}get valid(){return this.field().valid}get invalid(){return!this.field().valid}get pending(){return!1}get disabled(){return this.field().disabled}get enabled(){return!this.field().disabled}get errors(){return this.field().errors??null}get pristine(){return!0}get dirty(){return!1}get touched(){return this.field().touched}get untouched(){return!this.field().touched}get submitted(){return!1}viewToModelUpdate(t){}get valueChanges(){return this.field().valueChanges}get statusChanges(){return this.field().statusChanges}hasValidator(t){return xn.required===t?this.field().required$$():!1}},Qa={provide:gt,useFactory:()=>A(so).ngControl},so=(()=>{class n{fieldControl=I.required();cvaArray=A(wn);injector=A(S);get cva(){return this.cvaArray[0]}#e;get ngControl(){return this.#e??=new Qt(()=>this.fieldControl())}ngOnInit(){let e=this.cva,r,i=!1;e.registerOnChange(u=>{this.fieldControl().disabled$$()||(r=u,i=!0,this.fieldControl().updateOn$$()==="change"&&this.fieldControl().setViewValue(u))}),e.registerOnTouched(()=>{this.fieldControl().markAsTouched(),i&&this.fieldControl().updateOn$$()==="blur"&&(this.fieldControl().setViewValue(r),i=!1)});let s=fe(()=>{let u=this.fieldControl().modelValueToViewValue$$();O(()=>{e.writeValue(u)})},{injector:this.injector});if(this.cva.writeValue(this.fieldControl().modelValueToViewValue$$()),this.disposeList.push(()=>s.destroy()),e.setDisabledState){let u=fe(()=>{let l=this.fieldControl().disabled$$();O(()=>{e.setDisabledState(l)})},{injector:this.injector});e.setDisabledState(this.fieldControl().disabled$$()),this.disposeList.push(()=>u.destroy())}}disposeList=[];clear(){this.disposeList.forEach(e=>e()),this.disposeList=[]}ngOnDestroy(){this.clear()}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ue({type:n,selectors:[["","fieldControl",""]],inputs:{fieldControl:[1,"fieldControl"]},standalone:!1,features:[kn([Qa])]})}return n})(),Ya=(()=>{class n extends io{ngComponentOutlet=I();ngComponentOutletInputs=I();ngComponentOutletOutputs=I();ngComponentOutletInjector=I();ngComponentOutletContent=I();ngComponentOutletFormControl=I();ngComponentOutletWrappers=I();ngComponentOutletTopDirectives=I();ngComponentOutletDirectives=I();ngComponentOutletField=I.required();#e=A(Fe);#t=m(()=>this.ngComponentOutletWrappers()?.map(e=>v(h({},e),{type:e.type.component,module:e.type.module})));#i=m(()=>this.ngComponentOutletOutputs(),{equal:P});#r;#n=m(()=>{this.#r?.();let e=this.ngComponentOutletInjector()||this.#u,r=this.ngComponentOutlet()?.type.module;if(!r)return;let i=on(r,e);return this.#r=()=>{i.destroy(),this.#r=void 0},i});#s=m(()=>{let e=this.#n()?.injector??(this.ngComponentOutletInjector()||this.#u);return S.create({providers:[{provide:en,useValue:this.ngComponentOutletField},{provide:Jt,useValue:0}],parent:e}).get(S)});#u=A(S);#l=m(()=>{let e=this.ngComponentOutletFormControl();return e?{type:so,inputs:m(()=>({fieldControl:e}))}:void 0});#o=m(()=>{let e=this.ngComponentOutletDirectives(),r=this.#l();return r?[...e?.()??[],r]:e?.()});#c=m(()=>{let e=this.ngComponentOutlet();if(!e)return;let r=this.#o();return v(h({},e),{type:e.type.component,module:e.type.module,inputs:this.ngComponentOutletInputs,directives:r?r.map(i=>{let s=i.outputs;return s?v(h({},i),{outputs:s}):i}):void 0,outputs:this.#i(),contents:this.ngComponentOutletContent()})});#a=m(()=>{let e=this.#c();if(!e)return La;let r=this.#s(),i=[...this.#t()??[],e],s=this.ngComponentOutletTopDirectives();if(i[0]=v(h({},i[0]),{injector:r}),s){let u=i[0].directives?.findIndex(l=>l.type===s[0].type);if(typeof u=="number"&&u!==-1){let o=s.pop().inputs,a=i[0].directives?.[u]?.inputs;i[0].directives[u].inputs=m(()=>{let c=N(a)?.ngClass,p=N(o)?.ngClass;return{ngClass:Za(c,p)}})}i[0]=v(h({},i[0]),{directives:i[0].directives?[...i[0].directives,...s]:[...s]})}return i});#f;ngOnChanges(){let e=this.#a();if(!e.length)return this.destroyComponentFn?.();if(this.#f)this.#f!==e&&this.update(e);else{let r=this.ngComponentOutletField();r.hooks?.beforeCreateComponent?.(r),this.setFieldData(this.ngComponentOutletField,0),this.createComponent(e,this.#e)}this.#f=e}ngOnDestroy(){this.#r?.(),this.destroyComponentFn?.()}static \u0275fac=(()=>{let e;return function(i){return(e||(e=ke(n)))(i||n)}})();static \u0275dir=ue({type:n,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:[1,"ngComponentOutlet"],ngComponentOutletInputs:[1,"ngComponentOutletInputs"],ngComponentOutletOutputs:[1,"ngComponentOutletOutputs"],ngComponentOutletInjector:[1,"ngComponentOutletInjector"],ngComponentOutletContent:[1,"ngComponentOutletContent"],ngComponentOutletFormControl:[1,"ngComponentOutletFormControl"],ngComponentOutletWrappers:[1,"ngComponentOutletWrappers"],ngComponentOutletTopDirectives:[1,"ngComponentOutletTopDirectives"],ngComponentOutletDirectives:[1,"ngComponentOutletDirectives"],ngComponentOutletField:[1,"ngComponentOutletField"]},exportAs:["ngComponentOutlet"],features:[Me,ot]})}return n})();function Yu(n){return!!mt(n)}function eo(n,t){let e=new Map,r=new Map;return i=>O(()=>{if(!i)return{value:m(()=>{})};let s=!1,u=(n?[i]:i).map(l=>{if(r.has(l))return r.get(l);if(e.has(l))return s=!0,e.get(l);let o=l,a=o.type;if(typeof a=="string"||Yu(a)){let c=v(h({},o),{type:{component:a}});return r.set(l,c),c}else if(typeof a=="function"){s=!0;let c=a().then(p=>{let y=v(h({},o),{type:Yu(p)?{component:p}:p});return r.set(l,y),e.delete(l),y});return e.set(l,c),c}else return o});return s?ze({loader:async()=>n?u[0]:Promise.all(u),injector:t}):{value:m(()=>n?u[0]:u)}})}function ec(n,t,e,r){let i=!0;return fe(()=>{let s=t.value$$();i?(P(s,n)||r(s),i=!1):r(s)},{injector:e})}var tc=(()=>{class n extends Re{#e=A(Ne,{optional:!0})??void 0;afterResolveConfig(e,r){let i=e,s=e.type,u,l,o=this.#e?.defaultConfigMergeStrategy;if(s){let c=this.#t(s);l=c.define,u=c.defaultConfig}let a=this.configMerge([u?.directives,i.directives],!0,typeof o=="string"?o:o?.directives??Ga.directives);return v(h({},r),{contents:i.contents?.sort((c,p)=>c.nodes&&p.nodes?0:c.nodes?-1:1),directives:a})}#t(e){let r,i;if(typeof e=="string"){let s=this.#e?.types?.[e];if(!s)throw new Error(`\u672A\u6CE8\u518C${e}`);i=s,Object.keys(s).length&&(r=h({},s))}else r={type:e};return{define:r,defaultConfig:i}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=ke(n)))(i||n)}})();static \u0275prov=un({token:n,factory:n.\u0275fac})}return n})(),Yt=class extends ge{contents;directives},nc=(()=>{class n{transform(e,...r){return e(...r)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=an({name:"pure",type:n,pure:!0})}return n})(),rc={builder:tc,handle:Yt},Mc=(()=>{class n{schema=I.required();model=I(void 0);modelChange=$n();options=I();form$$=m(()=>this.resolvedField$()?.form.control);#e;ngOnChanges(e){let r=this.#i();(this.#e!==r||"model"in e)&&this.#t(),this.#e=r}#t=m(()=>{let e=this.model();O(()=>this.#c(e))});#i=m(()=>(this.schema(),O(()=>this.#l())));#r=A(S);#n=A(G);#s;resolvedField$=_(void 0);#u=[];#l(){this.#o();let e=ln([],this.#n);this.#s=e;let r=Xt(this.schema(),v(h(h({},rc),this.options()),{injector:e,registerOnDestroy:i=>{e.get(be).onDestroy(()=>{i()})}}));if(this.resolvedField$.set(r),r.form.control){let i=ec(this.model(),r.form.control,this.#r,s=>{O(()=>{r.form.control?.valueNoError$$()&&this.modelChange.emit(s)})});this.#u.push(()=>i.destroy())}return r}#o(e=!1){this.#u.forEach(r=>r()),this.#u=[],!e&&this.#s&&(this.#s.destroy(),this.#s=void 0)}#c(e){if(!this.resolvedField$())return;this.resolvedField$().form.control?.updateValue(e)}groupInputsValue=(e,r,i)=>m(()=>v(h({},e()),{fields:r,fieldTemplateRef:i}));resolvedComponent=eo(!0,this.#r);resolvedWrapper=eo(!1,this.#r);topDirectives=e=>[{type:_n,inputs:m(()=>({ngClass:e().ngClass??""}))}];groupHidden=e=>m(()=>this.#a(e));#a(e){return e.fieldGroup?e.fieldGroup().length?e.fieldGroup().every(r=>this.#a(r)):!0:!e.define||!!e.renderConfig().hidden}ngOnDestroy(){this.#o(!0)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$e({type:n,selectors:[["piying-view"]],inputs:{schema:[1,"schema"],model:[1,"model"],options:[1,"options"]},outputs:{modelChange:"modelChange"},features:[ot],decls:3,vars:1,consts:[["dynamicComponent",""],[3,"ngComponentOutlet","ngComponentOutletInputs","ngComponentOutletOutputs","ngComponentOutletWrappers","ngComponentOutletField","ngComponentOutletDirectives","ngComponentOutletTopDirectives"],[3,"ngComponentOutlet","ngComponentOutletInputs","ngComponentOutletOutputs","ngComponentOutletFormControl","ngComponentOutletWrappers","ngComponentOutletField","ngComponentOutletDirectives","ngComponentOutletTopDirectives","ngComponentOutletContent"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,i){if(r&1&&(oe(0,qa,1,1,"ng-template",null,0,Cn),le(2,Na,1,4,"ng-container")),r&2){let s;Ce(2),ae((s=i.resolvedField$())?2:-1,s)}},dependencies:[Ya,nc,vt],encapsulation:2,changeDetection:0})}return n})(),Lc=(()=>{class n extends io{fieldComponentAnchor=pe("fieldComponent",{read:Fe});field$$=A(en);props$$=m(()=>this.field$$().props());#e=A(ro);#t=A(no);createComponent(){let e=super.createComponent(this.#t,this.fieldComponentAnchor());return this.#e.subscribe(r=>{this.update(r)}),e}ngOnInit(){this.createComponent()}static \u0275fac=(()=>{let e;return function(i){return(e||(e=ke(n)))(i||n)}})();static \u0275dir=ue({type:n,viewQuery:function(r,i){r&1&&Q(i.fieldComponentAnchor,Fa,5,Fe),r&2&&Le()},features:[Me]})}return n})();export{P as a,Bo as b,Xo as c,Jo as d,mr as e,vr as f,br as g,kr as h,Cr as i,$r as j,Er as k,_r as l,wr as m,xr as n,Ar as o,jr as p,Dr as q,Ir as r,Tr as s,Pr as t,Vr as u,Nr as v,Mr as w,Gr as x,Br as y,zr as z,Wr as A,Ur as B,Xr as C,Hr as D,Jr as E,Kr as F,Zr as G,Qr as H,Yr as I,ei as J,ti as K,ni as L,ri as M,si as N,ui as O,oi as P,ai as Q,fi as R,pi as S,hi as T,yi as U,di as V,vi as W,gi as X,ki as Y,Ci as Z,$i as _,Ei as $,_i as aa,wi as ba,xi as ca,Oi as da,ji as ea,Ii as fa,Ti as ga,Si as ha,Pi as ia,qi as ja,Ri as ka,Mi as la,Hi as ma,Qi as na,Yi as oa,ts as pa,rs as qa,ss as ra,ds as sa,ms as ta,vs as ua,gs as va,ks as wa,xs as xa,qs as ya,iu as za,su as Aa,De as Ba,Dt as Ca,gu as Da,xl as Ea,Il as Fa,qu as Ga,qt as Ha,zl as Ia,Ql as Ja,ta as Ka,ka as La,Ea as Ma,_a as Na,wa as Oa,xa as Pa,Ma as Qa,Fc as Ra,en as Sa,tc as Ta,Mc as Ua,Lc as Va};
